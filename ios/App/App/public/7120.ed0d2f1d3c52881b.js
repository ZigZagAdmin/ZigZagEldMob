"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7120],{2187:(T,C,a)=>{a.d(C,{a:()=>e});var n=a(8256),m=a(4465),p=a(6994),f=a(6895),g=a(4006);const l=function(u,_,s){return{"label-error":u,"input-label-top":_,"input-label-left":s}};function c(u,_){if(1&u&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&u){const s=n.oxw();n.Q6J("ngClass",n.kEZ(3,l,!s.valid,"top"===s.labelPosition,"left"===s.labelPosition)),n.xp6(1),n.AsE(" ",s.label,"",s.required?"*":""," ")}}const v=function(u,_){return{"custom-input-top":u,"custom-input-left":_}},S=function(u,_,s){return{"input-fill":u,"validation-error":_,"input-left":s}};let e=(()=>{class u{constructor(s,d){this.toastService=s,this.shareService=d,this.type="text",this.placeholder="",this.fill=!0,this.validators=[],this.noValidation=!1,this.disabled=!1,this.required=!1,this.labelPosition="top",this.valueChange=new n.vpe,this.validationChange=new n.vpe,this.valid=!0}get value(){return this._value}set value(s){this._value!==s&&(this._value=s,this.valueChange.emit(s))}get validation(){return this._validation}set validation(s){this._validation!==s&&(this._validation=s,this.validationChange.emit(s))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(s=>{s&&0!==s.length&&this.validateInput()})}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(s){0!==s.target.value&&(this.valid=!0),this.value=s.target.value,this.valueChange.emit(this.value)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(s=>!!s.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(s.message),!1)),this.validation=this.valid)}}return u.\u0275fac=function(s){return new(s||u)(n.Y36(m.k),n.Y36(p.t))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-input"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",validators:"validators",noValidation:"noValidation",disabled:"disabled",required:"required",labelPosition:"labelPosition",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:3,vars:14,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],[1,"input-box",3,"type","ngModel","disabled","placeholder","ngClass","input","ngModelChange"],[1,"input-label",3,"ngClass"]],template:function(s,d){1&s&&(n.TgZ(0,"div",0),n.YNc(1,c,2,7,"div",1),n.TgZ(2,"input",2),n.NdJ("input",function(E){return d.onInputChange(E)})("ngModelChange",function(E){return d.value=E}),n.qZA()()),2&s&&(n.Q6J("ngClass",n.WLB(7,v,"top"===d.labelPosition,"left"===d.labelPosition)),n.xp6(1),n.Q6J("ngIf",d.label),n.xp6(1),n.Q6J("type",d.type)("ngModel",d.value)("disabled",d.disabled)("placeholder",d.placeholder)("ngClass",n.kEZ(10,S,d.fill,!d.valid,"left"===d.labelPosition)))},dependencies:[f.mk,f.O5,g.Fj,g.JJ,g.On],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{width:100%;height:45px;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200);background-color:#fff}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}"]}),u})()},4166:(T,C,a)=>{a.d(C,{v:()=>g});var n=a(6895),m=a(4006),p=a(6114),f=a(8256);let g=(()=>{class l{}return l.\u0275fac=function(v){return new(v||l)},l.\u0275mod=f.oAB({type:l}),l.\u0275inj=f.cJS({imports:[n.ez,m.u5,p.Pc]}),l})()},7120:(T,C,a)=>{a.r(C),a.d(C,{LoginPageModule:()=>B});var n=a(6895),m=a(4006),p=a(6114),f=a(4529),g=a(4128),l=a(2843),c=a(3900),v=a(262),S=a(8746),e=a(8256),u=a(7556),_=a(4761),s=a(4382),d=a(4465),y=a(849),E=a(7278),I=a(6994),w=a(2187);function x(o,M){1&o&&(e.TgZ(0,"span"),e._uU(1,"Login"),e.qZA())}function A(o,M){1&o&&e._UZ(0,"ion-spinner",12)}const U=[{path:"",component:(()=>{class o{constructor(i,r,t,h,P,O,b,D){this.authService=i,this.manageService=r,this.databaseService=t,this.toastService=h,this.storage=P,this.navCtrl=O,this.utilityService=b,this.shareService=D,this.username="",this.password="",this.loading=!1,this.focused=!1,this.validation={username:!1,password:!1}}ngOnInit(){}ngOnDestroy(){this.shareService.destroyMessage()}login(i,r){this.shareService.changeMessage(this.utilityService.generateString(5)),this.utilityService.validateForm(this.validation)&&(this.loading=!0,this.authService.login(i,r).pipe((0,c.w)(t=>(this.authUser=t,this.storage.set("accessToken",t.AccessToken),this.storage.set("driverId",t.DriverId),this.storage.set("companyId",t.CompanyId),this.storage.set("name",t.Name),localStorage.setItem("accessToken",t.AccessToken),this.saveAuthUser(t))),(0,c.w)(()=>{const t=[this.manageService.getDrivers(),this.manageService.getCompany(),this.manageService.getVehicles(),this.manageService.getTerminals(),this.manageService.getELDs(),this.manageService.getDVIRs(),this.manageService.getLogDailies(this.authUser.DriverId,(0,n.p6)(new Date,"yyyy-MM-dd","en_US"),14),this.manageService.getLogEvents(this.authUser.DriverId),this.manageService.getPlacesCity()];return(0,g.D)(t).pipe((0,v.K)(h=>{const P="Error fetching data";return this.toastService.showToast(P),(0,l._)(P)}))}),(0,c.w)(([t,h,P,O,b,D,J,W,Y])=>{const z=[this.saveDrivers(t),this.saveCompany(h),this.saveVehicles(P),this.saveTerminals(O),this.saveDVIRs(D),this.saveELDs(b),this.saveLogDailies(J),this.saveLogEvents(W),this.savePlacesCity(Y)];return(0,g.D)(z).pipe((0,v.K)(j=>{const L="Error saving data to database";return this.toastService.showToast(L),(0,l._)(L)}))}),(0,S.x)(()=>{this.loading=!1})).subscribe(()=>{this.storage.set("bAuthorized",!1),this.toastService.showToast("Login successful","success"),this.navCtrl.navigateRoot("/select-vehicle",{animated:!0,animationDirection:"forward"})},t=>{const h="An error occurred during login";this.toastService.showToast(h,"danger"),console.log(h)}))}saveAuthUser(i){return this.databaseService.saveAuthUser(i).pipe((0,v.K)(r=>{const t="Error saving auth user to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveDrivers(i){return this.databaseService.saveDrivers(i).pipe((0,v.K)(r=>{const t="Error saving drivers to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveCompany(i){return this.databaseService.saveCompany(i).pipe((0,v.K)(r=>{const t="Error saving company to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveVehicles(i){return this.databaseService.saveVehicles(i).pipe((0,v.K)(r=>{const t="Error saving vehicles to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveTerminals(i){return this.databaseService.saveTerminals(i).pipe((0,v.K)(r=>{const t="Error saving terminals to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveELDs(i){return this.databaseService.saveELDs(i).pipe((0,v.K)(r=>{const t="Error saving ELDs to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveDVIRs(i){return this.databaseService.saveDvirs(i).pipe((0,v.K)(r=>{const t="Error saving dvirs to database";return this.toastService.showToast(t),(0,l._)(t)}))}savePlacesCity(i){return this.databaseService.savePlacesCity(i).pipe((0,v.K)(r=>{const t="Error saving logMaps to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveLogDailies(i){return this.databaseService.saveLogDailies(i).pipe((0,v.K)(r=>{const t="Error saving log dailies to database";return this.toastService.showToast(t),(0,l._)(t)}))}saveLogEvents(i){return this.databaseService.saveLogEvents(i).pipe((0,v.K)(r=>{const t="Error saving log histories to database";return this.toastService.showToast(t),(0,l._)(t)}))}forgotPassword(){}}return o.\u0275fac=function(i){return new(i||o)(e.Y36(u.e),e.Y36(_.N),e.Y36(s.k),e.Y36(d.k),e.Y36(y.K),e.Y36(p.SH),e.Y36(E.t),e.Y36(I.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:15,vars:12,consts:[["forceOverscroll","false"],[1,"login-wrapper"],["src","assets/imgs/login-img.png","alt","truck",1,"image"],[1,"login-form-container"],[1,"title"],[1,"form-login"],[3,"label","fill","type","value","validation","valueChange","validationChange"],[2,"display","flex","flex-direction","column"],[1,"forgot-password",3,"click"],[1,"btn-login","primary-btn","f-submit-button",3,"click"],[4,"ngIf"],["name","circular","color","light",4,"ngIf"],["name","circular","color","light"]],template:function(i,r){1&i&&(e.TgZ(0,"ion-content",0)(1,"div",1),e._UZ(2,"img",2),e.TgZ(3,"div",3)(4,"div",4),e._uU(5,"Welcome to ZigZag ELD"),e.qZA(),e.TgZ(6,"div",5)(7,"app-input",6),e.NdJ("valueChange",function(h){return r.username=h})("validationChange",function(h){return r.validation.username=h}),e.qZA(),e.TgZ(8,"div",7)(9,"app-input",6),e.NdJ("valueChange",function(h){return r.password=h})("validationChange",function(h){return r.validation.password=h}),e.qZA(),e.TgZ(10,"div",8),e.NdJ("click",function(){return r.forgotPassword()}),e._uU(11,"Forgot Password?"),e.qZA()(),e.TgZ(12,"button",9),e.NdJ("click",function(){return r.login(r.username,r.password)}),e.YNc(13,x,2,0,"span",10),e.YNc(14,A,1,0,"ion-spinner",11),e.qZA()()()()()),2&i&&(e.xp6(7),e.Q6J("label","Username")("fill",!1)("type","text")("value",r.username)("validation",r.validation.username),e.xp6(2),e.Q6J("label","Password")("fill",!1)("type","password")("value",r.password)("validation",r.validation.password),e.xp6(4),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[n.O5,p.W2,p.PQ,w.a],styles:[".login-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.login-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.login-wrapper[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{border-radius:unset;width:100%}.login-wrapper[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px}.login-wrapper[_ngcontent-%COMP%]   .form-login[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:40px}.login-form-container[_ngcontent-%COMP%]{padding:0 30px}.f-submit-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.forgot-password[_ngcontent-%COMP%]{align-self:flex-end;margin-top:5px;font-size:14px;font-weight:400;color:var(--gray-500)}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),o})()}];let K=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(U),f.Bz]}),o})(),Z=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[n.ez,m.u5]}),o})();var R=a(4166);let B=(()=>{class o{}return o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[s.k,y.K],imports:[n.ez,m.u5,p.Pc,K,Z,R.v]}),o})()},6994:(T,C,a)=>{a.d(C,{t:()=>f});var n=a(7579),m=a(1135),p=a(8256);let f=(()=>{class g{constructor(){this.editDataDetails=[],this.subject=new n.x,this.messageSource=new m.X(this.editDataDetails),this.currentMessage=this.messageSource.asObservable()}changeMessage(c){this.messageSource.next(c)}destroyMessage(){this.messageSource.next("")}}return g.\u0275fac=function(c){return new(c||g)},g.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},4465:(T,C,a)=>{a.d(C,{k:()=>f});var n=a(5861),m=a(8256),p=a(6114);let f=(()=>{class g{constructor(c){this.toastController=c}showToast(c,v="danger",S=1e3){var e=this;return(0,n.Z)(function*(){e.currentToast&&(yield e.dismissToast());const u=yield e.toastController.create({message:c,duration:S,color:v});e.currentToast=u,u.onDidDismiss().then(()=>{e.currentToast=null}),u.present()})()}dismissToast(){var c=this;return(0,n.Z)(function*(){c.currentToast&&(yield c.toastController.dismiss(),c.currentToast=null)})()}}return g.\u0275fac=function(c){return new(c||g)(m.LFG(p.yF))},g.\u0275prov=m.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);