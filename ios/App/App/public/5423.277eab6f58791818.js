"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5423],{8924:($,U,f)=>{f.d(U,{EQ:()=>w});const w={ET:"UTC-4",CT:"UTC-5",MT:"UTC-6",PT:"UTC-7",AT:"UTC-8",HT:"UTC-10"}},5423:($,U,f)=>{f.r(U),f.d(U,{HosPageModule:()=>Rt});var x=f(6895),w=f(4006),t=f(8256),L=f(5963);function Z(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"linearGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.outerLinearGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function Q(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"radialGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.radialGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop2)("stop-opacity",1)}}function M(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill",e.svg.backgroundCircle.fill)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function V(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.zWS("fill","url(",e.window.location.href,"#",e.svg.radialGradient.id,")"),t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function it(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,M,1,7,"circle",2),t.YNc(2,V,1,8,"circle",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient)}}function ot(i,c){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(2);t.uIk("cx",e.svg.circle.cx)("cy",e.svg.circle.cy)("r",e.svg.circle.r)("fill",e.svg.circle.fill)("stroke",e.svg.circle.stroke)("stroke-width",e.svg.circle.strokeWidth)}}function nt(i,c){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.uIk("d",e.svg.path.d)("stroke",e.svg.path.stroke)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function st(i,c){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.zWS("stroke","url(",e.window.location.href,"#",e.svg.outerLinearGradient.id,")"),t.uIk("d",e.svg.path.d)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function rt(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,nt,1,5,"path",2),t.YNc(2,st,1,6,"path",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.outerStrokeGradient)}}function at(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=c.$implicit,o=t.oxw(4);t.uIk("x",o.svg.title.x)("y",o.svg.title.y)("dy",e.dy)("font-size",o.svg.title.fontSize)("font-weight",o.svg.title.fontWeight)("fill",o.svg.title.color),t.xp6(1),t.Oqu(e.span)}}function lt(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,at,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.title.tspans)}}function ct(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.uIk("font-size",e.svg.units.fontSize)("font-weight",e.svg.units.fontWeight)("fill",e.svg.units.color),t.xp6(1),t.Oqu(e.svg.units.text)}}function gt(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=c.$implicit,o=t.oxw(4);t.uIk("x",o.svg.subtitle.x)("y",o.svg.subtitle.y)("dy",e.dy)("font-size",o.svg.subtitle.fontSize)("font-weight",o.svg.subtitle.fontWeight)("fill",o.svg.subtitle.color),t.xp6(1),t.Oqu(e.span)}}function dt(i,c){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,gt,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.subtitle.tspans)}}function ut(i,c){if(1&i&&(t.O4$(),t.TgZ(0,"text",7),t.YNc(1,lt,2,1,"ng-container",2),t.YNc(2,ct,2,4,"tspan",2),t.YNc(3,dt,2,1,"ng-container",2),t.qZA()),2&i){const e=t.oxw(2);t.uIk("x",e.svg.circle.cx)("y",e.svg.circle.cy)("text-anchor",e.svg.title.textAnchor),t.xp6(1),t.Q6J("ngIf",e.options.showTitle),t.xp6(1),t.Q6J("ngIf",e.options.showUnits),t.xp6(1),t.Q6J("ngIf",e.options.showSubtitle)}}function pt(i,c){if(1&i&&(t.O4$(),t._UZ(0,"image",9)),2&i){const e=t.oxw(2);t.uIk("height",e.svg.image.height)("width",e.svg.image.width)("href",e.svg.image.src,null,"xlink")("x",e.svg.image.x)("y",e.svg.image.y)}}function ht(i,c){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",1),t.NdJ("click",function(r){t.CHM(e);const p=t.oxw();return t.KtG(p.emitClickEvent(r))}),t.TgZ(1,"defs"),t.YNc(2,Z,3,5,"linearGradient",2),t.YNc(3,Q,3,5,"radialGradient",2),t.qZA(),t.YNc(4,it,3,2,"ng-container",2),t.YNc(5,ot,1,6,"circle",2),t.YNc(6,rt,3,2,"ng-container",2),t.YNc(7,ut,4,6,"text",3),t.YNc(8,pt,1,5,"image",4),t.qZA()}if(2&i){const e=t.oxw();t.uIk("viewBox",e.svg.viewBox)("height",e.svg.height)("width",e.svg.width)("class",e.options.class),t.xp6(2),t.Q6J("ngIf",e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.showBackground),t.xp6(1),t.Q6J("ngIf",e.options.showInnerStroke),t.xp6(1),t.Q6J("ngIf",0!=+e.options.percent||e.options.showZeroOuterStroke),t.xp6(1),t.Q6J("ngIf",!e.options.showImage&&(e.options.showTitle||e.options.showUnits||e.options.showSubtitle)),t.xp6(1),t.Q6J("ngIf",e.options.showImage)}}class R{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=0,this.imageWidth=0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let mt=(()=>{class i{constructor(e,o,r,p){this.ngZone=o,this.elRef=r,this.onClick=new t.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new t.vpe,this._viewportChangedSubscriber=null,this.options=new R,this.defaultOptions=new R,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(a,g,u,n)=>{let s=n*Math.PI/180;return{x:a+Math.sin(s)*u,y:g-Math.cos(s)*u}},this.draw=a=>{let g=(a=void 0===a?this.options.percent:Math.abs(a))>100?100:a,u=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(u+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let l,m,n={x:u/2,y:u/2},s_x=n.x,s_y=n.y-this.options.radius,d=this.polarToCartesian(n.x,n.y,this.options.radius,360*(this.options.clockwise?g:100-g)/100);100===g&&(d.x=d.x+(this.options.clockwise?-.01:.01)),[l,m]=g>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let S=this.options.animateTitle?a:this.options.percent,P=S>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:S.toFixed(this.options.toFixed),T=this.options.animateSubtitle?a:this.options.percent,y={x:n.x,y:n.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let h=this.options.titleFormat(S);h instanceof Array?y.texts=[...h]:y.texts.push(h.toString())}else"auto"===this.options.title?y.texts.push(P):this.options.title instanceof Array?y.texts=[...this.options.title]:y.texts.push(this.options.title.toString());let _={x:n.x,y:n.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let h=this.options.subtitleFormat(T);h instanceof Array?_.texts=[...h]:_.texts.push(h.toString())}else this.options.subtitle instanceof Array?_.texts=[...this.options.subtitle]:_.texts.push(this.options.subtitle.toString());let C={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},b=0,v=1;if(this.options.showTitle&&(b+=y.texts.length),this.options.showSubtitle&&(b+=_.texts.length),this.options.showTitle)for(let h of y.texts)y.tspans.push({span:h,dy:this.getRelativeY(v,b)}),v++;if(this.options.showSubtitle)for(let h of _.texts)_.tspans.push({span:h,dy:this.getRelativeY(v,b)}),v++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${u} ${u}`,width:this.options.responsive?"100%":u,height:this.options.responsive?"100%":u,backgroundCircle:{cx:n.x,cy:n.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${s_x} ${s_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${l} ${m} ${d.x} ${d.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:n.x,cy:n.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:y,units:C,subtitle:_,image:{x:n.x-this.options.imageWidth/2,y:n.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(a,g)=>{let n,s,d,l=this.options.startFromZero||a<0?0:a,m=g<0?0:this.min(g,this.options.maxPercent),S=Math.abs(Math.round(m-l));return S>=100?(n=100,s=this.options.animateTitle||this.options.animateSubtitle?Math.round(S/n):1):(n=S,s=1),d=Math.round(this.options.animationDuration/n),d<10&&(d=10,n=this.options.animationDuration/d,s=!this.options.animateTitle&&!this.options.animateSubtitle&&S>100?Math.round(100/n):Math.round(S/n)),s<1&&(s=1),{times:n,step:s,interval:d}},this.animate=(a,g)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let u=this.options.startFromZero?0:a,n=g,{step:s,interval:d}=this.getAnimationParameters(u,n),l=u;this._timerSubscription=u<n?(0,L.H)(0,d).subscribe(()=>{l+=s,l<=n?!this.options.animateTitle&&!this.options.animateSubtitle&&l>=100?(this.draw(n),this._timerSubscription.unsubscribe()):this.draw(l):(this.draw(n),this._timerSubscription.unsubscribe())}):(0,L.H)(0,d).subscribe(()=>{l-=s,l>=n?!this.options.animateTitle&&!this.options.animateSubtitle&&n>=100?(this.draw(n),this._timerSubscription.unsubscribe()):this.draw(l):(this.draw(n),this._timerSubscription.unsubscribe())})},this.applyOptions=()=>{for(let a of Object.keys(this.options))this.hasOwnProperty(a)&&void 0!==this[a]?this.options[a]=this[a]:this.templateOptions&&void 0!==this.templateOptions[a]&&(this.options[a]=this.templateOptions[a]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(a,g)=>(1*(a-g/2)-.18).toFixed(2)+"em",this.min=(a,g)=>a<g?a:g,this.max=(a,g)=>a>g?a:g,this.uuid=()=>{var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var n=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==u?n:3&n|8).toString(16)})},this.checkViewport=()=>{this.findSvgElement();let a=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),a!==this.isInViewport&&this.onViewportChanged.observers.length>0&&this.ngZone.run(()=>{this.onViewportChanged.emit({oldValue:a,newValue:this.isInViewport})})},this.onScroll=a=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.ngZone.runOutsideAngular(()=>{this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0)}),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:u})=>{u&&this.render()}));let a=(0,L.H)(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():a.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=p.get(x.K0),this.window=this.document.defaultView,Object.assign(this.options,e),Object.assign(this.defaultOptions,e)}emitClickEvent(e){this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.observers.length>0&&this.onClick.emit(e)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}findSvgElement(){if(null===this.svgElement){let e=this.elRef.nativeElement.getElementsByTagName("svg");e.length>0&&(this.svgElement=e[0])}}isElementInViewport(e){if(null==e)return!1;let p,o=e.getBoundingClientRect(),r=e.parentNode;do{if(p=r.getBoundingClientRect(),o.top>=p.bottom||o.bottom<=p.top||o.left>=p.right||o.right<=p.left)return!1;r=r.parentNode}while(r!=this.document.body);return!(o.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||o.bottom<=0||o.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||o.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(e){this.render(),"lazy"in e&&(e.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(R),t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.zs3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[t.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(e,o){1&e&&t.YNc(0,ht,9,11,"svg",0),2&e&&t.Q6J("ngIf",o.svg)},dependencies:[x.sg,x.O5],encapsulation:2}),i})(),ft=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[{provide:R,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez]}),i})();var I=f(6114),q=f(4529),D=f(5861),_t=f(4128),N=f(8924),j=f(4382),vt=f(9386),Ct=f(7219),xt=f(849),bt=f(7972),St=f(3646);let yt=(()=>{class i{constructor(){this.checkedCallback=new t.vpe,this.uncheckedCallback=new t.vpe,this.isChecked=!1}ngOnInit(){}onCheckboxChange(){this.isChecked?this.checkedCallback.emit():this.uncheckedCallback.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-toggle-switch"]],outputs:{checkedCallback:"checkedCallback",uncheckedCallback:"uncheckedCallback"},decls:3,vars:1,consts:[[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"]],template:function(e,o){1&e&&(t.TgZ(0,"label",0)(1,"input",1),t.NdJ("ngModelChange",function(p){return o.isChecked=p})("change",function(){return o.onCheckboxChange()}),t.qZA(),t._UZ(2,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngModel",o.isChecked))},dependencies:[w.Wl,w.JJ,w.On],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#fff;transition:.3s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:var(--gray-300);transition:.3s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:var(--success-500);transform:translate(20px)}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px transparent}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),i})();var kt=f(2187),wt=f(4081),Mt=f(7772);let Tt=(()=>{class i{transform(e){const o=Math.floor(e/3600),r=Math.floor(e%3600/60);return`${String(o).padStart(2,"0")}:${String(r).padStart(2,"0")}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"convertSecotdsToHoursAndMinutes",type:i,pure:!0}),i})();function Ot(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ion-content",0)(1,"app-header",32),t.NdJ("backButtonCallback",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.cancel())}),t.qZA(),t.TgZ(2,"div",33)(3,"app-duty-radio-button",34),t.NdJ("selectedValue",function(r){t.CHM(e);const p=t.oxw(2);return t.KtG(p.selectButton(r))}),t.qZA(),t.TgZ(4,"app-input",35),t.NdJ("valueChange",function(r){t.CHM(e);const p=t.oxw(2);return t.KtG(p.location=r)}),t.qZA(),t.TgZ(5,"app-textarea",35),t.NdJ("valueChange",function(r){t.CHM(e);const p=t.oxw(2);return t.KtG(p.comments=r)}),t.qZA(),t.TgZ(6,"div",36)(7,"button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.cancel())}),t._uU(8,"Back"),t.qZA(),t.TgZ(9,"button",38),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.confirm())}),t._uU(10,"Save"),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.Q6J("forceOverscroll",!1),t.xp6(1),t.Q6J("title","Select Duty Status")("backButton",!0),t.xp6(3),t.Q6J("label","Location")("fill",!0)("type","text")("value",e.location)("noValidation",!0),t.xp6(1),t.Q6J("label","Comments")("fill",!0)("type","text")("value",e.comments)("noValidation",!0),t.xp6(4),t.Q6J("disabled",!e.isConfirmButtonActive)}}function Pt(i,c){if(1&i&&(t.TgZ(0,"div",39)(1,"div",40),t._UZ(2,"circle-progress",41),t.qZA(),t.TgZ(3,"div",40),t._UZ(4,"circle-progress",42),t.qZA(),t.TgZ(5,"div",40),t._UZ(6,"circle-progress",43),t.qZA(),t.TgZ(7,"div",40),t._UZ(8,"circle-progress",44),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("percent",e.percentBreak)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleBreak))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentDriving)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleDriving))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentShift)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleShift))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentCycle)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleCycle))("showUnits",!1)("animationDuration",500)}}function Dt(i,c){if(1&i&&(t.TgZ(0,"div",45)(1,"div",46)(2,"div",47)(3,"p",7),t._uU(4,"Minimum Break Required"),t.qZA(),t.TgZ(5,"p",7),t._uU(6),t.qZA()(),t.TgZ(7,"div",48),t._UZ(8,"div",49),t.qZA()(),t.TgZ(9,"div",46)(10,"div",47)(11,"p",7),t._uU(12,"Until shift reset"),t.qZA(),t.TgZ(13,"p",7),t._uU(14),t.qZA()(),t.TgZ(15,"div",48),t._UZ(16,"div",50),t.qZA()(),t.TgZ(17,"div",46)(18,"div",47)(19,"p",7),t._uU(20,"Until Cycle Reset"),t.qZA(),t.TgZ(21,"p",7),t._uU(22),t.qZA()(),t.TgZ(23,"div",48),t._UZ(24,"div",51),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(6),t.hij("",e.restBreak," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressBreak+"%"),t.xp6(6),t.hij("",e.restShift," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressShift+"%"),t.xp6(6),t.hij("",e.restCycle," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressCycle+"%")}}function Zt(i,c){1&i&&t._UZ(0,"img",52)}function At(i,c){1&i&&t._UZ(0,"img",53)}const K=function(i,c){return{"status-dot-error":i,"status-dot-success":c}};function It(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",54),t.NdJ("click",function(){const p=t.CHM(e).$implicit,a=t.oxw(2);return t.KtG(a.selectLog(p))}),t.TgZ(1,"div",55)(2,"p",7),t._uU(3),t.ALo(4,"date"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",56),t._UZ(7,"div",57),t.TgZ(8,"p"),t._uU(9,"Form"),t.qZA(),t._UZ(10,"div",57),t.TgZ(11,"p"),t._uU(12,"Certify"),t.qZA()()(),t.TgZ(13,"div",58)(14,"p",59),t._uU(15),t.ALo(16,"convertSecotdsToHoursAndMinutes"),t.qZA()()()}if(2&i){const e=c.$implicit;t.xp6(3),t.AsE("",t.xi3(4,5,e.logDate,"EEEE"),", ",t.xi3(5,8,e.logDate,"MMMM dd"),""),t.xp6(4),t.Q6J("ngClass",t.WLB(13,K,!e.formManner,e.formManner)),t.xp6(3),t.Q6J("ngClass",t.WLB(16,K,!e.certified,e.certified)),t.xp6(5),t.Oqu(t.lcZ(16,11,e.timeWorked))}}const Ut=function(i,c){return{"service-on":i,"service-off":c}};function Ft(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4),t._UZ(3,"img",5),t.qZA(),t.TgZ(4,"div",6)(5,"p",7),t._uU(6),t.qZA(),t.TgZ(7,"p",8),t._uU(8),t.qZA()(),t.TgZ(9,"div",9),t._UZ(10,"img",10),t.qZA()(),t.TgZ(11,"div",11),t._UZ(12,"img",12),t.TgZ(13,"div",13)(14,"p",7),t._uU(15,"Warning"),t.qZA(),t.TgZ(16,"p",8),t._uU(17,"Make sure that ELD hardware is properly installed and Vehicle power is ON"),t.qZA()()(),t.TgZ(18,"div",14)(19,"p",7),t._uU(20,"Current Status"),t.qZA(),t.TgZ(21,"div",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.toggleModal())}),t.TgZ(22,"span",16),t._uU(23),t.qZA(),t._UZ(24,"img",17),t.qZA(),t.TgZ(25,"div",18),t._uU(26),t.qZA()(),t.TgZ(27,"ion-modal",19),t.NdJ("willDismiss",function(r){t.CHM(e);const p=t.oxw();return t.KtG(p.onWillDismiss(r))}),t.YNc(28,Ot,11,14,"ng-template"),t.qZA(),t.TgZ(29,"div",20)(30,"p",21),t._uU(31,"Hours Remaining"),t.qZA(),t.YNc(32,Pt,9,32,"div",22),t.qZA(),t.YNc(33,Dt,25,9,"div",23),t.TgZ(34,"div",24)(35,"div",25)(36,"p",7),t._uU(37,"8 h 33 m"),t.qZA(),t.TgZ(38,"p",8),t._uU(39,"WH Last 7 Days"),t.qZA()(),t.TgZ(40,"div",25)(41,"p",7),t._uU(42,"+ 00h 00h"),t.qZA(),t.TgZ(43,"p",8),t._uU(44,"Hours Recap"),t.qZA()()(),t.TgZ(45,"div",26)(46,"p",7),t._uU(47,"Split Sleeper Berth"),t.qZA(),t._UZ(48,"app-toggle-switch"),t.qZA(),t.TgZ(49,"button",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.switchMode())}),t.YNc(50,Zt,1,0,"img",28),t.YNc(51,At,1,0,"img",29),t._uU(52),t.qZA(),t.TgZ(53,"p",7),t._uU(54,"Logs and Recap Hours"),t.qZA(),t.TgZ(55,"div",30),t.YNc(56,It,17,19,"div",31),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.WLB(12,Ut,e.locationStatus,!e.locationStatus)),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.hij("Vehicle Unit: ",e.vehicle.vehicleUnit,""),t.xp6(15),t.Oqu(e.currentStatus.statusName),t.xp6(3),t.Oqu(e.currentStatusTime),t.xp6(1),t.Q6J("isOpen",e.isModalOpen),t.xp6(5),t.Q6J("ngIf",!e.restMode),t.xp6(1),t.Q6J("ngIf",e.restMode),t.xp6(17),t.Q6J("ngIf",!e.restMode),t.xp6(1),t.Q6J("ngIf",e.restMode),t.xp6(1),t.hij(" ",e.restMode?"Switch to Drive Mode":"Switch to Rest Mode"," "),t.xp6(4),t.Q6J("ngForOf",e.logDailies)}}const Et=[{path:"",component:(()=>{class i{constructor(e,o,r,p,a,g,u,n,s){this.navCtrl=e,this.route=o,this.databaseService=r,this.dashboardService=p,this.internetService=a,this.storage=g,this.modalController=u,this.storageService=n,this.locationService=s,this.message="",this.someErrors=!1,this.bReady=!1,this.logDailies=[],this.logEvents=[],this.countDays=[],this.selectedButton="",this.progressBreak=0,this.progressShift=0,this.progressCycle=0,this.isConfirmButtonActive=!0,this.vehicleId="",this.driverId="",this.driverName="",this.companyId="",this.name="",this.pickedVehicle="",this.TimeZoneCity="",this.networkStatus=!1,this.percentBreak=0,this.percentDriving=0,this.percentShift=0,this.percentCycle=0,this.titleBreak=0,this.titleDriving=0,this.titleShift=0,this.titleCycle=0,this.redCircle=0,this.restBreak="",this.restShift="",this.restCycle="",this.currentStatus={statusCode:"",statusName:""},this.currentStatusTime="",this.location="",this.comments="",this.restMode=!1,this.locationStatus=!1}ngOnInit(){this.locationStatusSub=this.locationService.getLocationStatusObservable().subscribe(e=>{console.log("hos location",e),this.locationStatus=e})}ionViewWillEnter(){var e=this;return(0,D.Z)(function*(){e.getVehicle(),e.vehicleId=yield e.storage.get("vehicleId"),e.driverId=yield e.storage.get("driverId"),e.driverName=yield e.storage.get("driverName"),e.companyId=yield e.storage.get("companyId"),e.TimeZoneCity=yield e.storage.get("TimeZoneCity"),e.bAuthorized=yield e.storage.get("bAuthorized"),e.name=yield e.storage.get("name"),e.pickedVehicle=yield e.storage.get("vehicleUnit"),e.databaseSubscription=e.databaseService.databaseReadySubject.subscribe(o=>{if(o){e.bReady=o;const r=e.databaseService.getLogDailies(),p=e.databaseService.getLogEvents();(0,_t.D)([r,p]).subscribe(([a,g])=>{if(e.logDailies=a,e.logEvents=g,!1===e.bAuthorized){const u=e.logEvents[e.logEvents.length-1];u.eventTime.logDate=(0,x.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",N.EQ[e.TimeZoneCity]);let n={logEventId:e.uuidv4(),companyId:"",driverId:e.driverId,eventTime:{logDate:(0,x.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",N.EQ[e.TimeZoneCity]),timeStamp:(new Date).getTime(),timeStampEnd:(new Date).getTime(),timeZone:e.TimeZoneCity},vehicle:{vehicleId:e.vehicleId},eld:{eldId:"00000000-0000-0000-0000-000000000000",macAddress:"",serialNumber:""},location:{locationType:"AUTOMATIC",description:"2mi from Chisinau, Chisinau",latitude:0,longitude:0},sequenceNumber:u?u.sequenceNumber+1:1,type:{name:"Login",code:"LOGIN"},recordStatus:{name:"Driver",code:"DRIVER"},recordOrigin:{name:"Active",code:"ACTIVE"},odometer:0,engineHours:0,malfunction:!1,dataDiagnosticEvent:!1,certificationDate:u.certificationDate,comment:"",eventDataCheck:"",inspection:!1};e.logEvents.push(n),e.storage.set("bAuthorized",!0),e.storage.set("logEvents",e.logEvents),e.dashboardService.updateLogEvent(n).subscribe(s=>{console.log("Login LogEvent is updated on server:",s)},function(){var s=(0,D.Z)(function*(d){console.log("Internet Status"+e.networkStatus);let l={url:"api/eldDashboard/UploadLogEvent",body:n},m=yield e.storage.get("offlineArray");m.push(l),yield e.storage.set("offlineArray",m),console.log("Login LogEvent Pushed in offlineArray")});return function(d){return s.apply(this,arguments)}}()),e.dashboardService.updateLogEvent(u).subscribe(s=>{console.log("Predposlednii LogEvent is updated on server:",s)},function(){var s=(0,D.Z)(function*(d){console.log("Internet Status: "+e.networkStatus);let l={url:"api/eldDashboard/UploadLogEvent",body:u},m=yield e.storage.get("offlineArray");m.push(l),yield e.storage.set("offlineArray",m),console.log("Predposlednii LogEvent Pushed in offlineArray")});return function(d){return s.apply(this,arguments)}}())}e.updateLogDailies()})}}),e.networkSub=e.internetService.internetStatus$.subscribe(o=>{e.networkStatus=o,console.log("Intenet Status"+o)}),e.sayHello(),e.calculateCircles(),e.paramsSubscription=e.route.params.subscribe(o=>{console.log("after ngOnInit dvir"),e.bReady&&(e.databaseSubscription=e.databaseService.getLogDailies().subscribe(r=>{0!==r.length&&(e.logDailies=r)}))}),console.log("willEnter hos"),e.logDailies=e.countDays})()}getVehicle(){this.storageService.getVehicles().subscribe(e=>{this.vehicle=e[0]},e=>console.log(e))}switchMode(){this.restMode=!this.restMode}toggleMode(){const e=document.getElementById("driveModeContainer"),o=document.getElementById("restModeContainer"),r=document.querySelector(".drive_mode ion-button");e&&o&&r&&("none"===e.style.display?(e.style.display="block",o.style.display="none"):(e.style.display="none",o.style.display="block"))}calculateCircles(){var e=this;return(0,D.Z)(function*(){const o=["OFF","SB","D","ON","PC","YM"];let r=yield e.storage.get("HoursOfServiceRuleHours"),a=(yield e.storage.get("HoursOfServiceRuleDays"),28800),g=39600,u=50400,n=60*r*60,s=28800,d=39600,l=50400,m=60*r*60,S=0,P=0,T=0,y=0,_=0,C=0,b=0,v=0,h=0,k=0,O=0,Jt=0,F=0,E=0,J=0,H=0,W=0,G=36e3,Y=122400,tt="",z="",A="",et="",Gt=!1;console.log(e.logEvents),e.logEvents.forEach(B=>{if(o.includes(B.type.code)){switch(tt=new Date(B.eventTime.timeStamp).toISOString(),A=B.type.code,et=B.type.name,z=B.eventTime.timeStampEnd?new Date(B.eventTime.timeStampEnd).toISOString():(new Date).toISOString(),"0001-01-01T00:00:00"==z&&(z=(0,x.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",N.EQ[e.TimeZoneCity])),_=(new Date(z).getTime()-new Date(tt).getTime())/1e3,A){case"OFF":case"SB":O+=_,b+=_,_>=7200&&_<14400&&(F+=_),"SB"==A&&_>=25200&&_<32400&&(E+=_),_>=Y&&(v=0,Jt=0,Gt=!0),_>=G&&(h=0,k=0,O=0,F=0,E=0),H=G-_,W=Y-_;break;case"D":k+=_,C+=_,v+=_,b=0,H=G,W=Y;break;case"ON":case"PC":case"YM":h+=_,v+=_,b+=_,H=G,W=Y}b>=1800&&(C=0),J=1800-b}}),0===e.logEvents.length?e.currentStatus={statusCode:"OFF",statusName:"Off Duty"}:(e.currentStatus.statusCode=A,e.currentStatus.statusName=et),console.log(e.currentStatus),e.currentStatusTime=e.convertSecondToHours(_),e.restBreak=e.convertSecondToHours(0),e.restShift=e.convertSecondToHours(0),e.restCycle=e.convertSecondToHours(0),J>=0&&(e.restBreak=e.convertSecondToHours(J),e.progressBreak=100*J/1800/100),H>=0&&(e.restShift=e.convertSecondToHours(H),e.progressShift=100*H/36e3/100),W>=0&&(e.restCycle=e.convertSecondToHours(W),e.progressCycle=100*W/122400/100),(A="")&&(A="OFF",e.message="Off Duty"),m<v&&(s=0,d=0,l=0),d<k&&(s=0),l-k-h-O<0?"OFF"==A||"SB"==A?l=l-k-h<0?-1:k+h+O<l?l-k-h-O:0:(l=l+E+F-k-h-O,l=l-k-h-O):l=l-k-h-O,l>=0?(T=100*l/u,e.percentShift=T,e.titleShift=l,e.redCircle+=0,console.log(T)):(T=100*-l/u,l=u+l,e.percentShift=T,e.titleShift=l,e.redCircle+=1),d-=k,d>=0?(P=100*d/g,e.percentDriving=P,e.titleDriving=d,e.redCircle+=0):(d=g-d,P=100*-d/g,e.percentDriving=P,e.titleDriving=-d,e.redCircle+=1),s-=C,s>=0?(S=100*s/a,e.percentBreak=S,e.titleBreak=s,e.redCircle+=0):(S=100*-s/a,s=a-s,e.percentBreak=S,e.titleBreak=-s,e.redCircle+=1,console.log(e.percentBreak)),m-=v,m>=0?(y=100*m/n,e.percentCycle=y,e.titleCycle=m,e.redCircle+=0):(m=n-m,y=100*m/n,e.percentCycle=y,e.titleCycle=-m,e.redCircle+=1),console.log("iAvailableBreak: ",s),console.log("iAvailableDrive: ",d),console.log("iAvailableShift: ",l),console.log("iAvailableCycle: ",m)})()}getStatusColor(e){switch(e){case"Off Duty":return"light";case"Driving":case"Personal Conveyance":return"success";case"On Duty":case"Yard Moves":return"warning";default:return"medium"}}toggleModal(){this.isModalOpen=!0,this.currentStatus&&this.selectButton(this.currentStatus.statusCode)}selectLog(e){this.navCtrl.navigateForward(["log-item",e.logDailyId])}selectButton(e){this.selectedButton=e,this.isConfirmButtonActive=this.selectedButton!==this.currentStatus.statusCode}cancel(){this.modal.dismiss(null,"cancel"),this.isModalOpen=!1}confirm(){var e=this;return(0,D.Z)(function*(){e.selectedButton&&(yield e.modal.dismiss(e.selectedButton,"confirm")),e.isModalOpen=!1})()}onWillDismiss(e){var o=this;if("confirm"===e.detail.role){const p=["OFF","SB","D","ON","PC","YM"],a=this.logEvents.filter(s=>p.includes(s.type.code));let g=a[a.length-1];if(g){const s=new Date((0,x.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",N.EQ[this.TimeZoneCity])).getTime();g.eventTime.timeStampEnd=s,console.log("LAST LogEvent = ",g)}let u={OFF:{statusName:"Off Duty",eventTypeType:"DUTY_STATUS"},SB:{statusName:"Sleeper Berth",eventTypeType:"DUTY_STATUS"},D:{statusName:"Driving",eventTypeType:"DUTY_STATUS"},ON:{statusName:"On Duty",eventTypeType:"DUTY_STATUS"},PC:{statusName:"Personal Conveyance",eventTypeType:"DRIVER_INDICATES"},YM:{statusName:"Yard Moves",eventTypeType:"DRIVER_INDICATES"}},n={logEventId:this.uuidv4(),companyId:"",driverId:this.driverId,eventTime:{logDate:(0,x.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",N.EQ[this.TimeZoneCity]),timeStamp:(new Date).getTime(),timeStampEnd:(new Date).getTime(),timeZone:""},vehicle:{vehicleId:this.vehicleId},eld:{eldId:"00000000-0000-0000-0000-000000000000",macAddress:"",serialNumber:""},location:{locationType:"AUTOMATIC",description:"2mi from Chisinau, Chisinau",latitude:0,longitude:0},sequenceNumber:g?g.sequenceNumber+1:1,type:{name:u[this.selectedButton]?u[this.selectedButton].statusName:"Unknown",code:this.selectedButton},recordStatus:{name:"Driver",code:"DRIVER"},recordOrigin:{name:"Active",code:"ACTIVE"},odometer:0,engineHours:0,malfunction:!1,dataDiagnosticEvent:!1,certificationDate:g.certificationDate,comment:"",eventDataCheck:"",inspection:!1};this.logEvents.push(n),this.storage.set("logEvents",this.logEvents),this.updateLogDailies(),this.calculateCircles(),this.dashboardService.updateLogEvent(g).subscribe(s=>{console.log("Last LogEvent is updated on server:",s)},function(){var s=(0,D.Z)(function*(d){console.log("Internet Status"+o.networkStatus);let l={url:"api/",body:g},m=yield o.storage.get("offlineArray");m.push(l),yield o.storage.set("offlineArray",m),console.log("Last   LogEvent Pushed in offlineArray")});return function(d){return s.apply(this,arguments)}}()),this.dashboardService.updateLogEvent(n).subscribe(s=>{console.log("New status is updated on server:",s)},function(){var s=(0,D.Z)(function*(d){console.log("Internet Status"+o.networkStatus);let l={url:"api/eldDashboard/UploadLogEvent",body:n},m=yield o.storage.get("offlineArray");m.push(l),yield o.storage.set("offlineArray",m),console.log("New status Pushed in offlineArray")});return function(d){return s.apply(this,arguments)}}())}this.isModalOpen=!1}convertSecondToHours(e){let o,r,p;return e<0?(o="-",e=-e):o="",r=(24*Math.trunc(e/86400%24)+Math.trunc(e/3600%24)).toString(),p=(Math.trunc(e/60)%60).toString(),0===r.length&&(r="00"),1===r.length&&(r="0"+r),0===p.length&&(p="0"),1===p.length&&(p="0"+p),o+r+":"+p}updateLogDailies(){var e=this;console.log("updating...");let o=new Date;this.countDays=[],console.log(this.logDailies);for(let C=0;C<14;C++){const b=o.toISOString().split("T")[0].replace(/-/g,"/"),v=this.logDailies.findIndex(h=>h.logDate.includes(b));if(-1!==v)this.countDays.push(this.logDailies[v]);else{let h={logDailyId:this.uuidv4(),companyId:this.companyId,driverId:this.driverId,driverName:"",logDate:b.replace(/-/g,"/"),timeOffDuty:0,timeSleeper:0,timeDriving:0,timeOnDuty:0,timeWorked:0,violations:[],formManner:!1,certified:!1,form:{trailers:"",shippingDoc:"",fromAddress:"",toAddress:"",signatureId:"00000000-0000-0000-0000-000000000000"}};this.logDailies.push(h)}o.setDate(o.getDate()-1)}this.logDailies.sort((C,b)=>b.logDate.localeCompare(C.logDate)),console.log(this.logDailies);const r=["OFF","SB","D","ON","PC","YM"];let p=null,a=null,g=0,u=0,n=0,s=0,d=0,l=0,m=0,S=0,P=0,T=0;console.log(this.logDailies);for(let C=0;C<this.logDailies.length;C++){let b=this.logDailies[C].logDate;n=0,s=0,d=0,l=0,m=this.logDailies[C].timeOffDuty,S=this.logDailies[C].timeSleeper,P=this.logDailies[C].timeDriving,T=this.logDailies[C].timeOnDuty,this.logEvents.forEach(v=>{if(r.includes(v.type.code)){let h=v.eventTime.timeStampEnd?(0,x.p6)(new Date(b),"yyyy-MM-dd","en_US")<=(0,x.p6)(new Date(v.eventTime.timeStampEnd),"yyyy-MM-dd","en_US"):(0,x.p6)(new Date(b),"yyyy-MM-dd","en_US")<=(0,x.p6)(new Date,"yyyy-MM-dd","en_US");if((0,x.p6)(new Date(v.eventTime.timeStamp),"yyyy-MM-dd","en_US")<=(0,x.p6)(new Date(b),"yyyy-MM-dd","en_US")&&h)switch(p=new Date(v.eventTime.timeStamp),g=p.toLocaleDateString()===new Date(b).toLocaleDateString()?60*p.getHours()+p.getMinutes():0,a=new Date(v.eventTime.timeStampEnd),u=a.toLocaleDateString()===new Date(b).toLocaleDateString()?60*a.getHours()+a.getMinutes():1440,v.type.code.toUpperCase()){case"OFF":case"PC":n+=60*(u-g);break;case"SB":s+=60*(u-g);break;case"D":d+=60*(u-g);break;case"ON":case"YM":l+=60*(u-g)}}}),console.log(m!=n||S!=s||P!=d||T!=l),(m!=n||S!=s||P!=d||T!=l)&&(this.logDailies[C].timeOffDuty=n,this.logDailies[C].timeSleeper=s,this.logDailies[C].timeDriving=d,this.logDailies[C].timeOnDuty=l,this.logDailies[C].timeWorked=d+l,this.dashboardService.updateLogDaily(this.logDailies[C]).subscribe(function(){var v=(0,D.Z)(function*(h){console.log("LogDaily (durationStatuses) is updated on server:",h),yield e.storage.set("logDailies",e.logDailies)});return function(h){return v.apply(this,arguments)}}(),function(){var v=(0,D.Z)(function*(h){console.log("Internet Status: "+e.networkStatus),yield e.storage.set("logDailies",e.logDailies),console.log("Pushed in logDailies")});return function(h){return v.apply(this,arguments)}}()))}}sayHello(){setInterval(()=>{this.updateLogDailies(),this.calculateCircles()},6e4)}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})}ionViewWillLeave(){this.databaseSubscription&&this.databaseSubscription.unsubscribe(),this.networkSub.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(I.SH),t.Y36(q.gz),t.Y36(j.k),t.Y36(vt.s),t.Y36(Ct.W),t.Y36(xt.K),t.Y36(I.IN),t.Y36(j.k),t.Y36(bt.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-hos"]],viewQuery:function(e,o){if(1&e&&t.Gf(I.ki,5),2&e){let r;t.iGM(r=t.CRH())&&(o.modal=r.first)}},decls:2,vars:2,consts:[[3,"forceOverscroll"],["class","hos-wrapper",4,"ngIf"],[1,"hos-wrapper"],[1,"hos-header"],[1,"service",3,"ngClass"],["src","assets/icon/location_icon.svg"],[1,"hos-name"],[1,"subtitle"],[1,"text-1"],[1,"service","service-off"],["src","assets/icon/bluetooth_icon.svg"],[1,"warning"],["src","assets/icon/warning.svg","alt","warning"],[1,"warning-text"],[1,"status-bar"],[1,"green",2,"max-width","39%",3,"click"],[1,"text-elipsis"],["src","assets/icon/arrow-bottom.svg","alt","arrow"],[1,"green"],[3,"isOpen","willDismiss"],[1,"circles"],[1,"text-2",2,"margin-bottom","5px"],["class","circles-block",4,"ngIf"],["class","rest-mode",4,"ngIf"],[1,"time"],[1,"time-block"],[1,"switch-sleep"],[1,"btn","primary-btn",3,"click"],["src","assets/icon/moon.svg","alt","moon",4,"ngIf"],["src","assets/icon/drive.svg","alt","moon",4,"ngIf"],[1,"log-dailies"],["class","log-daily",3,"click",4,"ngFor","ngForOf"],[3,"title","backButton","backButtonCallback"],[1,"modal-content"],[3,"selectedValue"],[3,"label","fill","type","value","noValidation","valueChange"],[1,"btns-flex"],[1,"btn","secondary-btn",3,"click"],[1,"btn","primary-btn",3,"disabled","click"],[1,"circles-block"],[1,"circle-block"],["outerStrokeColor","rgb(254, 200, 75)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgb(254, 200, 75)","titleFontWeight","600","subtitle","Break","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(18, 183, 106, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(18, 183, 106, 1)","titleFontWeight","600","subtitle","Driving","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(155, 138, 251, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(155, 138, 251, 1)","titleFontWeight","600","subtitle","Shift","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(251, 101, 20, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(251, 101, 20, 1)","titleFontWeight","600","subtitle","Cycle","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],[1,"rest-mode"],[1,"rest-row"],[1,"row-1"],[1,"progress-bar-outer"],["id","inner-1",1,"progress-bar-inner"],["id","inner-2",1,"progress-bar-inner"],["id","inner-3",1,"progress-bar-inner"],["src","assets/icon/moon.svg","alt","moon"],["src","assets/icon/drive.svg","alt","moon"],[1,"log-daily",3,"click"],[1,"log-left"],[1,"sub-info"],[1,"status-dot",3,"ngClass"],[1,"log-right"],[1,"hours-worked"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0),t.YNc(1,Ft,57,15,"div",1),t.qZA()),2&e&&(t.Q6J("forceOverscroll",!1),t.xp6(1),t.Q6J("ngIf",o.vehicle))},dependencies:[x.mk,x.sg,x.O5,I.W2,I.ki,mt,St.G,yt,kt.a,wt.R,Mt.U,x.uU,Tt],styles:[".hos-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:20px;padding:20px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:10px;background-color:var(--gray-100);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]   .hos-name[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background-color:var(--warning-500);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%], .hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{color:var(--warning-25)}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{flex-grow:1}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;gap:10px;background-color:var(--success-500);color:var(--gray-25);font-size:16px;border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;max-width:80%;min-width:60%;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]   .circle-block[_ngcontent-%COMP%]{width:45%;max-width:140px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-between;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]{width:100%;height:10px;background-color:var(--gray-200);border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   .progress-bar-inner[_ngcontent-%COMP%]{height:10px;border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-1[_ngcontent-%COMP%]{background-color:#fec84b}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-2[_ngcontent-%COMP%]{background-color:#9b8afb}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-3[_ngcontent-%COMP%]{background-color:#fb6514}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]{flex-grow:1;border-radius:30px;background-color:var(--gray-100);text-align:center;padding:20px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:30px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--handle-background: var(--gray-300);--handle-background-checked: var(--success-500);--track-background: var(--gray-25);--track-background-checked: var(--gray-25);--handle-width: 23px;--handle-height: 23px}.hos-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:217px;height:50px;display:flex;justify-content:space-between;align-items:center;border-radius:41px;font-size:16px;padding:15px;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:10px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]   .sub-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]{background-color:var(--success-500);border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]   .hours-worked[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:30px}.modal-content[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{height:100px}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:41px;font-size:16px}ion-progress-bar[_ngcontent-%COMP%]{--background: var(--gray-200);--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-break[_ngcontent-%COMP%]{--progress-background: #fec84b}ion-progress-bar[_ngcontent-%COMP%]   #progress-shift[_ngcontent-%COMP%]{--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-cycle[_ngcontent-%COMP%]{--progress-background: #fb6514}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.status-dot-error[_ngcontent-%COMP%]{background-color:var(--error-600)}.status-dot-success[_ngcontent-%COMP%]{background-color:var(--success-600)}.service[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;justify-content:center;align-items:center}.service-on[_ngcontent-%COMP%]{background-color:var(--success-500)}.service-off[_ngcontent-%COMP%]{background-color:var(--error-500)}"]}),i})()}];let Ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[q.Bz.forChild(Et),q.Bz]}),i})();var Wt=f(4546);let Bt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,w.u5,I.Pc]}),i})();var Lt=f(4166),Nt=f(4877),zt=f(2218);let Rt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[x.ez,w.u5,I.Pc,Ht,ft.forRoot(),Wt.y,Bt,Lt.v,Nt.r,zt.H]}),i})()},9386:($,U,f)=>{f.d(U,{s:()=>L});var x=f(5505),w=f(8256),t=f(529);let L=(()=>{class Z{constructor(M,V){this.http=M,this.apiUrl=V}updateDVIR(M){return this.http.post(this.apiUrl+"api/EldDashboard/uploadDVIR",M)}updateLogDaily(M){return this.http.post(this.apiUrl+"api/eldDashboard/UploadLogDailies",M)}updateLogEvent(M){return this.http.post(this.apiUrl+"api/eldDashboard/UploadLogEvent",M)}}return Z.\u0275fac=function(M){return new(M||Z)(w.LFG(t.eN),w.LFG(x.f))},Z.\u0275prov=w.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z})()}}]);