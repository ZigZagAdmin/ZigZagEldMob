"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6441,4546],{5960:(W,w,s)=>{s.d(w,{C:()=>_});var n=s(8256);const O=["Break","Pre-Trip Inspection","Post-Trip Inspection","Waiting","Loading","Download","Meal","Drop","Hook","Fuel","Lunch","Shop","Delivery","Driving","Sleeper"];var e=s(4465),D=s(6994),b=s(6895),d=s(4006);const C=function(m){return{"label-error":m}};function f(m,S){if(1&m&&(n.TgZ(0,"div",8),n._uU(1),n.qZA()),2&m){const u=n.oxw();n.Q6J("ngClass",n.VKq(2,C,!u.valid)),n.xp6(1),n.Oqu(u.label)}}function E(m,S){if(1&m){const u=n.EpF();n.TgZ(0,"div",9)(1,"div",10),n.NdJ("click",function(){const I=n.CHM(u).$implicit,V=n.oxw();return n.KtG(V.completeWord(I))}),n._uU(2),n.qZA(),n._UZ(3,"div",11),n.qZA()}if(2&m){const u=S.$implicit;n.xp6(2),n.Oqu(u)}}const L=function(m,S){return{"input-fill":m,"validation-error":S}},Z=function(m){return{"hide-tooltip":m}};let _=(()=>{class m{constructor(u,M,y,I){this.toastService=u,this.shareService=M,this.renderer=y,this.el=I,this.type="text",this.placeholder="",this.fill=!0,this.disabled=!1,this.validators=[],this.noValidation=!1,this.valueChange=new n.vpe,this.validationChange=new n.vpe,this.valid=!0,this.suggestions=O,this.foundSuggestions=[],this.showTooltip=!1}get value(){return this._value}set value(u){this._value!==u&&(this._value=u,this.valueChange.emit(u))}get validation(){return this._validation}set validation(u){this._validation!==u&&(this._validation=u,this.validationChange.emit(u))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(u=>{"reset"===u?this.valid=!0:"invalidate"!==u||this.noValidation?u&&0!==u.length&&this.validateInput():this.valid=!1})}calculatePosition(){const u=this.el.nativeElement.querySelector("#custom-tooltip");console.log(window.innerWidth),console.log(u.offsetWidth),u&&this.renderer.setStyle(u,"left",(window.innerWidth-u.offsetWidth-40)/2+"px")}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(u){0!==u.target.value&&(this.valid=!0),this.value=u.target.value,this.findSuggestions(),this.valueChange.emit(this.value)}findSuggestions(){this.foundSuggestions=[];let u=this.value.split(" "),M=u[u.length-1];M.length>=2&&this.suggestions.forEach(y=>{y.toLocaleLowerCase().includes(M.toLocaleLowerCase())&&y.toLocaleLowerCase()!==M.toLocaleLowerCase()&&this.foundSuggestions.push(y)}),0!==this.foundSuggestions.length?(this.showTooltip=!0,setTimeout(()=>this.calculatePosition(),0)):this.showTooltip=!1}completeWord(u){let M=this.value.split(" ");M[M.length-1]=u,this.value=M.join(" ")+" ",document.getElementById("custom-textarea").focus(),setTimeout(()=>this.showTooltip=!1,100)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(u=>!!u.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(u.message),!1)),this.validation=this.valid)}}return m.\u0275fac=function(u){return new(u||m)(n.Y36(e.k),n.Y36(D.t),n.Y36(n.Qsj),n.Y36(n.SBq))},m.\u0275cmp=n.Xpm({type:m,selectors:[["app-comments"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",disabled:"disabled",validators:"validators",noValidation:"noValidation",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:8,vars:12,consts:[[1,"custom-input"],["class","input-label",3,"ngClass",4,"ngIf"],["id","custom-textarea",1,"input-box",3,"ngModel","readonly","placeholder","ngClass","input","ngModelChange"],["id","custom-tooltip",1,"custom-tooltip",3,"ngClass"],["id","tooltip-box",1,"tooltip-box"],[1,"tooltip-buttons"],["class","button-box",4,"ngFor","ngForOf"],[1,"tooltip-triangle"],[1,"input-label",3,"ngClass"],[1,"button-box"],[1,"tooltip-button",3,"click"],[1,"tooltip-button-separator"]],template:function(u,M){1&u&&(n.TgZ(0,"div",0),n.YNc(1,f,2,4,"div",1),n.TgZ(2,"textarea",2),n.NdJ("input",function(I){return M.onInputChange(I)})("ngModelChange",function(I){return M.value=I}),n.qZA(),n.TgZ(3,"div",3)(4,"div",4)(5,"div",5),n.YNc(6,E,4,1,"div",6),n.qZA()(),n._UZ(7,"div",7),n.qZA()()),2&u&&(n.xp6(1),n.Q6J("ngIf",M.label),n.xp6(1),n.Q6J("ngModel",M.value)("readonly",M.disabled)("placeholder",M.placeholder)("ngClass",n.WLB(7,L,M.fill,!M.valid)),n.xp6(1),n.Q6J("ngClass",n.VKq(10,Z,!M.showTooltip)),n.xp6(3),n.Q6J("ngForOf",M.foundSuggestions))},dependencies:[b.mk,b.sg,b.O5,d.Fj,d.JJ,d.On],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;position:relative;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:column;gap:5px}.input-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--gray-500)}.input-box[_ngcontent-%COMP%]{width:100%;height:100px;resize:none;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;background-color:#fff;border:1px solid var(--gray-200)}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)!important}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}.custom-tooltip[_ngcontent-%COMP%]{position:absolute;z-index:99999;top:-22px;display:flex;flex-direction:column;justify-content:center;align-items:center;opacity:1;visibility:visible;transition:visibility .1s,opacity .1s ease-in-out}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]{background-color:var(--gray-100);border-radius:10px;width:-moz-fit-content;width:fit-content;height:35px;padding:0 10px}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;width:100%}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]{flex:1;height:100%;border-radius:3px;padding:5px;display:flex;justify-content:center;align-items:center;background-color:transparent;font-size:12px;font-weight:400;color:var(--gray-500)}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:last-child{border-right:none}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]:active{background-color:var(--gray-200)}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]   .tooltip-button-separator[_ngcontent-%COMP%]{height:70%;width:1px;margin:0 5px;background-color:var(--gray-200)}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-box[_ngcontent-%COMP%]   .tooltip-buttons[_ngcontent-%COMP%]   .button-box[_ngcontent-%COMP%]:last-child   .tooltip-button-separator[_ngcontent-%COMP%]{display:none}.custom-tooltip[_ngcontent-%COMP%]   .tooltip-triangle[_ngcontent-%COMP%]{width:0;height:0;z-index:3;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid var(--gray-100)}.hide-tooltip[_ngcontent-%COMP%]{visibility:hidden;opacity:0;transition:visibility 0s,opacity 0s}"]}),m})()},4748:(W,w,s)=>{s.d(w,{e:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},7772:(W,w,s)=>{s.d(w,{U:()=>C});var n=s(8256),O=s(6895),e=s(7151);const D=function(f,E){return{"disable-form":f,"disable-input-opacity":E}},b=function(f){return{"background-color":f}};function d(f,E){if(1&f){const L=n.EpF();n.TgZ(0,"div",2),n.NdJ("click",function(){const m=n.CHM(L).$implicit,S=n.oxw();return n.KtG(S.select(m))}),n.TgZ(1,"div",3),n._UZ(2,"div",4),n.TgZ(3,"div",5),n._uU(4),n.qZA()(),n.TgZ(5,"div",6),n._UZ(6,"ion-checkbox",7),n.qZA()()}if(2&f){const L=E.$implicit,Z=n.oxw();n.Q6J("ngClass",n.WLB(4,D,Z.disable,Z.showDisabled)),n.xp6(2),n.Q6J("ngStyle",n.VKq(7,b,L.color)),n.xp6(2),n.Oqu(L.label),n.xp6(2),n.Q6J("checked",L.checked)}}let C=(()=>{class f{constructor(){this.data=[{color:"var(--gray-300)",label:"Off Duty",value:"OFF",checked:!1},{color:"var(--gray-500)",label:"Sleeper Berth",value:"SB",checked:!1},{color:"var(--warning-400)",label:"On Duty",value:"ON",checked:!1},{color:"var(--success-500)",label:"Driving",value:"D",checked:!1},{color:"var(--gray-300)",label:"Personal Conveyance",value:"PC",checked:!1},{color:"var(--warning-400)",label:"Yard Moves",value:"YM",checked:!1}],this.currentValue="",this.disable=!1,this.showDisabled=!1,this.selectedValue=new n.vpe}ngOnInit(){if(0!==this.currentValue.length){let L=this.data.find(Z=>Z.value===this.currentValue);this.select(L)}}select(L){let Z=this.data.findIndex(_=>_.value===L.value);this.data.forEach(_=>_.checked=!1),this.data[Z].checked=!0,this.selectedValue.emit(this.data[Z].value)}}return f.\u0275fac=function(L){return new(L||f)},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-duty-radio-button"]],inputs:{currentValue:"currentValue",disable:"disable",showDisabled:"showDisabled"},outputs:{selectedValue:"selectedValue"},decls:2,vars:1,consts:[[1,"list-container"],["class","list-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-item",3,"ngClass","click"],[1,"item-data"],[1,"status-color",3,"ngStyle"],[1,"status-label"],[1,"item-checkbox"],[3,"checked"]],template:function(L,Z){1&L&&(n.TgZ(0,"div",0),n.YNc(1,d,7,9,"div",1),n.qZA()),2&L&&(n.xp6(1),n.Q6J("ngForOf",Z.data))},dependencies:[O.mk,O.sg,O.PC,e.nz,e.w],styles:[".list-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:15px}.list-item[_ngcontent-%COMP%]{width:100%;border:none;border-radius:10px;background-color:var(--gray-100);padding:15px;display:flex;align-items:center;justify-content:space-between}.item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.status-color[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:50%}.status-label[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--gray-500)}.item-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--checkbox-background-checked: var(--success-500);--border-color: transparent;--border-color-checked: transparent;--checkmark-width: 2px;pointer-events:none}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:50%}.disable-form[_ngcontent-%COMP%]{pointer-events:none}"]}),f})()},2218:(W,w,s)=>{s.d(w,{H:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},4546:(W,w,s)=>{s.d(w,{y:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},4166:(W,w,s)=>{s.d(w,{v:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},7236:(W,w,s)=>{s.d(w,{L:()=>S});var n=s(8256),O=s(4465),e=s(6994),D=s(6895),b=s(4006),d=s(7151);const C=function(u,M,y,I){return{"label-error":u,"input-label-top":M,"input-label-left":y,"no-label":I}};function f(u,M){if(1&u&&(n.TgZ(0,"div",7),n._uU(1),n.qZA()),2&u){const y=n.oxw();n.Q6J("ngClass",n.l5B(3,C,!y.valid,"top"===y.labelPosition,"left"===y.labelPosition,"none"===y.label)),n.xp6(1),n.AsE(" ",y.label,"",y.required?"*":""," ")}}function E(u,M){1&u&&n._UZ(0,"img",8)}function L(u,M){1&u&&n._UZ(0,"ion-spinner",9)}const Z=function(u,M){return{"custom-input-top":u,"custom-input-left":M}},_=function(u,M,y,I){return{"input-fill":u,"validation-error":M,"input-left":y,"disable-input-opacity":I}},m=function(u){return{"disable-fetch":u}};let S=(()=>{class u{constructor(y,I){this.toastService=y,this.shareService=I,this.type="text",this.placeholder="",this.fill=!0,this.loading=!1,this.validators=[],this.noValidation=!1,this.disabled=!1,this.showDisabled=!1,this.required=!1,this.labelPosition="top",this.valueChange=new n.vpe,this.validationChange=new n.vpe,this.gpsCallback=new n.vpe,this.valid=!0}get value(){return this._value}set value(y){this._value!==y&&(this._value=y,this._value&&0!==this._value.length&&this.validateInput(),this.valueChange.emit(y))}get validation(){return this._validation}set validation(y){this._validation!==y&&(this._validation=y,this.validationChange.emit(y))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(y=>{"reset"===y?this.valid=!0:"invalidate"!==y||this.noValidation?y&&0!==y.length&&this.validateInput():this.valid=!1})}triggerGps(){this.gpsCallback.emit()}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(y){0!==y.target.value&&(this.valid=!0),this.value=y.target.value,this.valueChange.emit(this.value)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(y=>!!y.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(y.message),!1)),this.validation=this.valid)}}return u.\u0275fac=function(y){return new(y||u)(n.Y36(O.k),n.Y36(e.t))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-location-input"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",loading:"loading",validators:"validators",noValidation:"noValidation",disabled:"disabled",showDisabled:"showDisabled",required:"required",labelPosition:"labelPosition",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange",gpsCallback:"gpsCallback"},decls:7,vars:20,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],[1,"input-container"],["autocomplete","one-time-code",1,"input-box",3,"type","ngModel","readonly","placeholder","ngClass","input","ngModelChange"],[1,"input-fetch",3,"ngClass","click"],["src","../../../assets/icon/gps.svg",4,"ngIf"],["class","input-loading","name","circular","color","medium",4,"ngIf"],[1,"input-label",3,"ngClass"],["src","../../../assets/icon/gps.svg"],["name","circular","color","medium",1,"input-loading"]],template:function(y,I){1&y&&(n.TgZ(0,"div",0),n.YNc(1,f,2,8,"div",1),n.TgZ(2,"div",2)(3,"input",3),n.NdJ("input",function(j){return I.onInputChange(j)})("ngModelChange",function(j){return I.value=j}),n.qZA(),n.TgZ(4,"div",4),n.NdJ("click",function(){return I.triggerGps()}),n.YNc(5,E,1,0,"img",5),n.YNc(6,L,1,0,"ion-spinner",6),n.qZA()()()),2&y&&(n.Q6J("ngClass",n.WLB(10,Z,"top"===I.labelPosition,"left"===I.labelPosition)),n.xp6(1),n.Q6J("ngIf",I.label),n.xp6(2),n.Q6J("type",I.type)("ngModel",I.value)("readonly",I.disabled||I.loading)("placeholder",I.placeholder)("ngClass",n.l5B(13,_,I.fill,!I.valid,"left"===I.labelPosition,I.showDisabled)),n.xp6(1),n.Q6J("ngClass",n.VKq(18,m,I.loading)),n.xp6(1),n.Q6J("ngIf",!I.loading),n.xp6(1),n.Q6J("ngIf",I.loading))},dependencies:[D.mk,D.O5,b.Fj,b.JJ,b.On,d.PQ],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{width:100%;height:45px;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200);background-color:#fff}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}.no-label[_ngcontent-%COMP%]{color:transparent!important}.input-container[_ngcontent-%COMP%]{position:relative}.input-fetch[_ngcontent-%COMP%]{position:absolute;width:24px;height:45px;right:12px;top:0px;display:flex;justify-content:center;align-items:center}.input-fetch[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.input-fetch[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{zoom:.7}.disable-fetch[_ngcontent-%COMP%]{pointer-events:none}"]}),u})()},8134:(W,w,s)=>{s.d(w,{y:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},8974:(W,w,s)=>{s.d(w,{p:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},4877:(W,w,s)=>{s.d(w,{r:()=>b});var n=s(6895),O=s(4006),e=s(7151),D=s(8256);let b=(()=>{class d{}return d.\u0275fac=function(f){return new(f||d)},d.\u0275mod=D.oAB({type:d}),d.\u0275inj=D.cJS({imports:[n.ez,O.u5,e.Pc]}),d})()},8924:(W,w,s)=>{s.d(w,{Eb:()=>n,Rk:()=>D,W3:()=>e,bm:()=>O});const n={ET:"UTC-4",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-5",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-6",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-7",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-8",AKT:"UTC-8",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-9",HST:"UTC-10",HAST:"UTC-9"},O={ET:"UTC-5",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-6",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-7",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-8",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-9",AKT:"UTC-9",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-10",HST:"UTC-10",HAST:"UTC-9"},e={ET:"UTC-5",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-6",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-7",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-8",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-9",AKT:"UTC-9",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-10",HST:"UTC-10",HAST:"UTC-9"},D={2024:{summer:17100288e5,winter:173059194e4},2025:{summer:17414784e5,winter:176204154e4},2026:{summer:1772928e6,winter:179349114e4},2027:{summer:18049824e5,winter:182554554e4}}},6441:(W,w,s)=>{s.r(w),s.d(w,{HosPageModule:()=>ae});var n=s(6895),O=s(4006),e=s(8256),D=s(9751),b=s(1566),d=s(3532);function f(i=0,g,t=b.P){let o=-1;return null!=g&&((0,d.K)(g)?t=g:o=g),new D.y(r=>{let l=function C(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;l<0&&(l=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=o?this.schedule(void 0,o):r.complete())},l)})}function E(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"linearGradient"),e._UZ(1,"stop",5)(2,"stop",6),e.qZA()),2&i){const t=e.oxw(2);e.uIk("id",t.svg.outerLinearGradient.id),e.xp6(1),e.uIk("stop-color",t.svg.outerLinearGradient.colorStop1)("stop-opacity",1),e.xp6(1),e.uIk("stop-color",t.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function L(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"radialGradient"),e._UZ(1,"stop",5)(2,"stop",6),e.qZA()),2&i){const t=e.oxw(2);e.uIk("id",t.svg.radialGradient.id),e.xp6(1),e.uIk("stop-color",t.svg.radialGradient.colorStop1)("stop-opacity",1),e.xp6(1),e.uIk("stop-color",t.svg.radialGradient.colorStop2)("stop-opacity",1)}}function Z(i,g){if(1&i&&(e.O4$(),e._UZ(0,"circle")),2&i){const t=e.oxw(3);e.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill",t.svg.backgroundCircle.fill)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function _(i,g){if(1&i&&(e.O4$(),e._UZ(0,"circle")),2&i){const t=e.oxw(3);e.zWS("fill","url(",t.window.location.href,"#",t.svg.radialGradient.id,")"),e.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function m(i,g){if(1&i&&(e.O4$(),e.ynx(0),e.YNc(1,Z,1,7,"circle",2),e.YNc(2,_,1,8,"circle",2),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.options.backgroundGradient),e.xp6(1),e.Q6J("ngIf",t.options.backgroundGradient)}}function S(i,g){if(1&i&&(e.O4$(),e._UZ(0,"circle")),2&i){const t=e.oxw(2);e.uIk("cx",t.svg.circle.cx)("cy",t.svg.circle.cy)("r",t.svg.circle.r)("fill",t.svg.circle.fill)("stroke",t.svg.circle.stroke)("stroke-width",t.svg.circle.strokeWidth)}}function u(i,g){if(1&i&&(e.O4$(),e._UZ(0,"path")),2&i){const t=e.oxw(3);e.uIk("d",t.svg.path.d)("stroke",t.svg.path.stroke)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function M(i,g){if(1&i&&(e.O4$(),e._UZ(0,"path")),2&i){const t=e.oxw(3);e.zWS("stroke","url(",t.window.location.href,"#",t.svg.outerLinearGradient.id,")"),e.uIk("d",t.svg.path.d)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function y(i,g){if(1&i&&(e.O4$(),e.ynx(0),e.YNc(1,u,1,5,"path",2),e.YNc(2,M,1,6,"path",2),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.options.outerStrokeGradient),e.xp6(1),e.Q6J("ngIf",t.options.outerStrokeGradient)}}function I(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&i){const t=g.$implicit,o=e.oxw(4);e.uIk("x",o.svg.title.x)("y",o.svg.title.y)("dy",t.dy)("font-size",o.svg.title.fontSize)("font-weight",o.svg.title.fontWeight)("fill",o.svg.title.color),e.xp6(1),e.Oqu(t.span)}}function V(i,g){if(1&i&&(e.O4$(),e.ynx(0),e.YNc(1,I,2,7,"tspan",8),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.svg.title.tspans)}}function j(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.uIk("font-size",t.svg.units.fontSize)("font-weight",t.svg.units.fontWeight)("fill",t.svg.units.color),e.xp6(1),e.Oqu(t.svg.units.text)}}function rt(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"tspan"),e._uU(1),e.qZA()),2&i){const t=g.$implicit,o=e.oxw(4);e.uIk("x",o.svg.subtitle.x)("y",o.svg.subtitle.y)("dy",t.dy)("font-size",o.svg.subtitle.fontSize)("font-weight",o.svg.subtitle.fontWeight)("fill",o.svg.subtitle.color),e.xp6(1),e.Oqu(t.span)}}function at(i,g){if(1&i&&(e.O4$(),e.ynx(0),e.YNc(1,rt,2,7,"tspan",8),e.BQk()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.svg.subtitle.tspans)}}function lt(i,g){if(1&i&&(e.O4$(),e.TgZ(0,"text",7),e.YNc(1,V,2,1,"ng-container",2),e.YNc(2,j,2,4,"tspan",2),e.YNc(3,at,2,1,"ng-container",2),e.qZA()),2&i){const t=e.oxw(2);e.uIk("x",t.svg.circle.cx)("y",t.svg.circle.cy)("text-anchor",t.svg.title.textAnchor),e.xp6(1),e.Q6J("ngIf",t.options.showTitle),e.xp6(1),e.Q6J("ngIf",t.options.showUnits),e.xp6(1),e.Q6J("ngIf",t.options.showSubtitle)}}function ct(i,g){if(1&i&&(e.O4$(),e._UZ(0,"image",9)),2&i){const t=e.oxw(2);e.uIk("height",t.svg.image.height)("width",t.svg.image.width)("href",t.svg.image.src,null,"xlink")("x",t.svg.image.x)("y",t.svg.image.y)}}function ut(i,g){if(1&i){const t=e.EpF();e.O4$(),e.TgZ(0,"svg",1),e.NdJ("click",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.emitClickEvent(r))}),e.TgZ(1,"defs"),e.YNc(2,E,3,5,"linearGradient",2),e.YNc(3,L,3,5,"radialGradient",2),e.qZA(),e.YNc(4,m,3,2,"ng-container",2),e.YNc(5,S,1,6,"circle",2),e.YNc(6,y,3,2,"ng-container",2),e.YNc(7,lt,4,6,"text",3),e.YNc(8,ct,1,5,"image",4),e.qZA()}if(2&i){const t=e.oxw();e.uIk("viewBox",t.svg.viewBox)("height",t.svg.height)("width",t.svg.width)("class",t.options.class),e.xp6(2),e.Q6J("ngIf",t.options.outerStrokeGradient),e.xp6(1),e.Q6J("ngIf",t.options.backgroundGradient),e.xp6(1),e.Q6J("ngIf",t.options.showBackground),e.xp6(1),e.Q6J("ngIf",t.options.showInnerStroke),e.xp6(1),e.Q6J("ngIf",0!=+t.options.percent||t.options.showZeroOuterStroke),e.xp6(1),e.Q6J("ngIf",!t.options.showImage&&(t.options.showTitle||t.options.showUnits||t.options.showSubtitle)),e.xp6(1),e.Q6J("ngIf",t.options.showImage)}}class ${constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=0,this.imageWidth=0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let gt=(()=>{class i{constructor(t,o,r,l){this.ngZone=o,this.elRef=r,this.onClick=new e.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new e.vpe,this._viewportChangedSubscriber=null,this.options=new $,this.defaultOptions=new $,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(a,h,x,c)=>{let v=c*Math.PI/180;return{x:a+Math.sin(v)*x,y:h-Math.cos(v)*x}},this.draw=a=>{let h=(a=void 0===a?this.options.percent:Math.abs(a))>100?100:a,x=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(x+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let A,P,c={x:x/2,y:x/2},v_x=c.x,v_y=c.y-this.options.radius,k=this.polarToCartesian(c.x,c.y,this.options.radius,360*(this.options.clockwise?h:100-h)/100);100===h&&(k.x=k.x+(this.options.clockwise?-.01:.01)),[A,P]=h>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let p=this.options.animateTitle?a:this.options.percent,G=p>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:p.toFixed(this.options.toFixed),R=this.options.animateSubtitle?a:this.options.percent,N={x:c.x,y:c.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let F=this.options.titleFormat(p);F instanceof Array?N.texts=[...F]:N.texts.push(F.toString())}else"auto"===this.options.title?N.texts.push(G):this.options.title instanceof Array?N.texts=[...this.options.title]:N.texts.push(this.options.title.toString());let U={x:c.x,y:c.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let F=this.options.subtitleFormat(R);F instanceof Array?U.texts=[...F]:U.texts.push(F.toString())}else this.options.subtitle instanceof Array?U.texts=[...this.options.subtitle]:U.texts.push(this.options.subtitle.toString());let B={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},z=0,Y=1;if(this.options.showTitle&&(z+=N.texts.length),this.options.showSubtitle&&(z+=U.texts.length),this.options.showTitle)for(let F of N.texts)N.tspans.push({span:F,dy:this.getRelativeY(Y,z)}),Y++;if(this.options.showSubtitle)for(let F of U.texts)U.tspans.push({span:F,dy:this.getRelativeY(Y,z)}),Y++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${x} ${x}`,width:this.options.responsive?"100%":x,height:this.options.responsive?"100%":x,backgroundCircle:{cx:c.x,cy:c.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${v_x} ${v_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${A} ${P} ${k.x} ${k.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:c.x,cy:c.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:N,units:B,subtitle:U,image:{x:c.x-this.options.imageWidth/2,y:c.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(a,h)=>{let c,v,k,A=this.options.startFromZero||a<0?0:a,P=h<0?0:this.min(h,this.options.maxPercent),p=Math.abs(Math.round(P-A));return p>=100?(c=100,v=this.options.animateTitle||this.options.animateSubtitle?Math.round(p/c):1):(c=p,v=1),k=Math.round(this.options.animationDuration/c),k<10&&(k=10,c=this.options.animationDuration/k,v=!this.options.animateTitle&&!this.options.animateSubtitle&&p>100?Math.round(100/c):Math.round(p/c)),v<1&&(v=1),{times:c,step:v,interval:k}},this.animate=(a,h)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let x=this.options.startFromZero?0:a,c=h,{step:v,interval:k}=this.getAnimationParameters(x,c),A=x;this._timerSubscription=x<c?f(0,k).subscribe(()=>{A+=v,A<=c?!this.options.animateTitle&&!this.options.animateSubtitle&&A>=100?(this.draw(c),this._timerSubscription.unsubscribe()):this.draw(A):(this.draw(c),this._timerSubscription.unsubscribe())}):f(0,k).subscribe(()=>{A-=v,A>=c?!this.options.animateTitle&&!this.options.animateSubtitle&&c>=100?(this.draw(c),this._timerSubscription.unsubscribe()):this.draw(A):(this.draw(c),this._timerSubscription.unsubscribe())})},this.applyOptions=()=>{for(let a of Object.keys(this.options))this.hasOwnProperty(a)&&void 0!==this[a]?this.options[a]=this[a]:this.templateOptions&&void 0!==this.templateOptions[a]&&(this.options[a]=this.templateOptions[a]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(a,h)=>(1*(a-h/2)-.18).toFixed(2)+"em",this.min=(a,h)=>a<h?a:h,this.max=(a,h)=>a>h?a:h,this.uuid=()=>{var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(x){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==x?c:3&c|8).toString(16)})},this.checkViewport=()=>{this.findSvgElement();let a=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),a!==this.isInViewport&&this.onViewportChanged.observers.length>0&&this.ngZone.run(()=>{this.onViewportChanged.emit({oldValue:a,newValue:this.isInViewport})})},this.onScroll=a=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.ngZone.runOutsideAngular(()=>{this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0)}),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:x})=>{x&&this.render()}));let a=f(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():a.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=l.get(n.K0),this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}emitClickEvent(t){this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.observers.length>0&&this.onClick.emit(t)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}findSvgElement(){if(null===this.svgElement){let t=this.elRef.nativeElement.getElementsByTagName("svg");t.length>0&&(this.svgElement=t[0])}}isElementInViewport(t){if(null==t)return!1;let l,o=t.getBoundingClientRect(),r=t.parentNode;do{if(l=r.getBoundingClientRect(),o.top>=l.bottom||o.bottom<=l.top||o.left>=l.right||o.right<=l.left)return!1;r=r.parentNode}while(r!=this.document.body);return!(o.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||o.bottom<=0||o.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||o.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(t){this.render(),"lazy"in t&&(t.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36($),e.Y36(e.R0b),e.Y36(e.SBq),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[e.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(t,o){1&t&&e.YNc(0,ut,9,11,"svg",0),2&t&&e.Q6J("ngIf",o.svg)},dependencies:[n.sg,n.O5],encapsulation:2}),i})(),dt=(()=>{class i{static forRoot(t={}){return{ngModule:i,providers:[{provide:$,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.ez]}),i})();var H=s(7151),tt=s(5050),T=s(5861),K=s(3905),pt=s(4128),et=s(8924),q=s(7423),Q=s(2368),nt=s(4382),ht=s(9386),mt=s(9393),vt=s(849),ft=s(7940),_t=s(2569),Ct=s(4465),yt=s(7278),bt=s(6994),xt=s(3646);let St=(()=>{class i{constructor(){this.isChecked=!1,this.checkedCallback=new e.vpe,this.uncheckedCallback=new e.vpe,this.valueCalback=new e.vpe}ngOnInit(){}onCheckboxChange(){this.isChecked?this.checkedCallback.emit():this.uncheckedCallback.emit(),this.valueCalback.emit(this.isChecked)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-toggle-switch"]],inputs:{isChecked:"isChecked"},outputs:{checkedCallback:"checkedCallback",uncheckedCallback:"uncheckedCallback",valueCalback:"valueCalback"},decls:3,vars:1,consts:[[1,"switch"],["type","checkbox",3,"ngModel","ngModelChange","change"],[1,"slider","round"]],template:function(t,o){1&t&&(e.TgZ(0,"label",0)(1,"input",1),e.NdJ("ngModelChange",function(l){return o.isChecked=l})("change",function(){return o.onCheckboxChange()}),e.qZA(),e._UZ(2,"span",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngModel",o.isChecked))},dependencies:[O.Wl,O.JJ,O.On],styles:['.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:40px;height:20px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#fff;transition:.3s}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:var(--gray-300);transition:.3s}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{background-color:var(--success-500);transform:translate(20px)}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px transparent}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}']}),i})();var Mt=s(7772),Tt=s(7236);function Pt(i,g){1&i&&e._UZ(0,"img",10)}function Ot(i,g){1&i&&e._UZ(0,"img",11)}function Dt(i,g){1&i&&e._UZ(0,"img",12)}function kt(i,g){1&i&&e._UZ(0,"img",13)}const wt=function(i,g,t,o){return{fsuccess:i,fwarning:g,ferror:t,fdefault:o}};function It(i,g){if(1&i&&(e.TgZ(0,"div",14),e._uU(1,"close"),e.qZA()),2&i){const t=e.oxw();e.Q6J("ngClass",e.l5B(1,wt,"success"===t.type,"warning"===t.type,"error"===t.type,"default"===t.type))}}const Lt=function(i){return{flex:i}};let Et=(()=>{class i{constructor(){this.type="default",this.close=!1,this.closeCallback=new e.vpe}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-message-banner"]],inputs:{type:"type",title:"title",subtitle:"subtitle",close:"close"},outputs:{closeCallback:"closeCallback"},decls:12,vars:11,consts:[[1,"banner-container",3,"ngClass"],[1,"banner-icon"],["src","../../../assets/icon/tick-circle-white.svg",4,"ngIf"],["src","../../../assets/icon/close-circle.svg",4,"ngIf"],["src","../../../assets/icon/info-circle.svg",4,"ngIf"],["src","../../../assets/icon/more-circle.svg",4,"ngIf"],[1,"banner-content",3,"ngStyle"],[1,"banner-title"],[1,"banner-subtitle"],["class","banner-close",3,"ngClass",4,"ngIf"],["src","../../../assets/icon/tick-circle-white.svg"],["src","../../../assets/icon/close-circle.svg"],["src","../../../assets/icon/info-circle.svg"],["src","../../../assets/icon/more-circle.svg"],[1,"banner-close",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Pt,1,0,"img",2),e.YNc(3,Ot,1,0,"img",3),e.YNc(4,Dt,1,0,"img",4),e.YNc(5,kt,1,0,"img",5),e.qZA(),e.TgZ(6,"div",6)(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e._uU(10),e.qZA()(),e.YNc(11,It,2,6,"div",9),e.qZA()),2&t&&(e.Q6J("ngClass",o.type),e.xp6(2),e.Q6J("ngIf","success"===o.type),e.xp6(1),e.Q6J("ngIf","error"===o.type),e.xp6(1),e.Q6J("ngIf","warning"===o.type),e.xp6(1),e.Q6J("ngIf","default"===o.type),e.xp6(1),e.Q6J("ngStyle",e.VKq(9,Lt,o.close?"1 calc(100% - 105px)":"1 calc(100% - 39px)")),e.xp6(2),e.Oqu(o.title),e.xp6(2),e.Oqu(o.subtitle),e.xp6(1),e.Q6J("ngIf",o.close))},dependencies:[n.mk,n.O5,n.PC],styles:[".banner-container[_ngcontent-%COMP%]{display:flex;gap:15px;align-items:center;padding:10px 15px;border-radius:100px}.banner-container[_ngcontent-%COMP%]   .banner-icon[_ngcontent-%COMP%]{flex:1 24px;display:flex;justify-content:center;align-items:center}.banner-container[_ngcontent-%COMP%]   .banner-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px;display:flex;justify-content:center;align-items:center}.banner-container[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:var(--gray-25)}.banner-container[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.banner-container[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   .banner-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.success[_ngcontent-%COMP%]{background-color:var(--success-500)}.warning[_ngcontent-%COMP%]{background-color:var(--warning-500)}.error[_ngcontent-%COMP%]{background-color:var(--error-500)}.default[_ngcontent-%COMP%]{background-color:var(--gray-500)}.fsuccess[_ngcontent-%COMP%]{color:var(--success-500)}.fwarning[_ngcontent-%COMP%]{color:var(--warning-500)}.ferror[_ngcontent-%COMP%]{color:var(--error-500)}.fdefault[_ngcontent-%COMP%]{color:var(--gray-500)}.banner-close[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:12px;font-weight:500;flex:1 51px;padding:3px;background-color:var(--gray-25);border-radius:50px;cursor:pointer}"]}),i})();var Zt=s(5960),Ut=s(8837),At=s(2092);let Bt=(()=>{class i{transform(t){const o=Math.floor(t/3600),r=Math.floor(t%3600/60);return`${String(o).padStart(2,"0")}h ${String(r).padStart(2,"0")}min`}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=e.Yjl({name:"convertSecondsToHoursAndMinutesHm",type:i,pure:!0}),i})();function Wt(i,g){if(1&i&&e._UZ(0,"app-message-banner",31),2&i){const t=e.oxw(2);e.Q6J("title",t.bannerInfo.title)("subtitle",t.bannerInfo.subtitle)("type",t.bannerInfo.type)}}function Ft(i,g){1&i&&(e.TgZ(0,"span"),e._uU(1,"Save"),e.qZA())}function Nt(i,g){1&i&&e._UZ(0,"ion-spinner",42)}function Jt(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"ion-content",0)(1,"app-header",32),e.NdJ("backButtonCallback",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancel())}),e.qZA(),e.TgZ(2,"div",33)(3,"app-duty-radio-button",34),e.NdJ("selectedValue",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.selectButton(r))}),e.qZA(),e.TgZ(4,"app-location-input",35),e.NdJ("valueChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.locationDescription=r)})("gpsCallback",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getLocalCurrentLocation())})("validationChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.validation.location=r)}),e.qZA(),e.TgZ(5,"app-comments",36),e.NdJ("valueChange",function(r){e.CHM(t);const l=e.oxw(2);return e.KtG(l.comments=r)}),e.qZA(),e.TgZ(6,"div",37)(7,"button",38),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancel())}),e._uU(8,"Back"),e.qZA(),e.TgZ(9,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.confirm())}),e.YNc(10,Ft,2,0,"span",40),e.YNc(11,Nt,1,0,"ion-spinner",41),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.Q6J("forceOverscroll",!1),e.xp6(1),e.Q6J("title","Select Duty Status")("backButton",!0),e.xp6(2),e.Q6J("currentValue",t.selectedButton),e.xp6(1),e.Q6J("label","Location")("fill",!0)("type","text")("value",t.locationDescription)("loading",t.locationLoading)("disabled",t.locationDisable)("validation",t.validation.location),e.xp6(1),e.Q6J("label","Comments")("fill",!0)("type","text")("value",t.comments)("noValidation",!0),e.xp6(5),e.Q6J("ngIf",!t.modalLoading),e.xp6(1),e.Q6J("ngIf",t.modalLoading)}}function Rt(i,g){if(1&i&&(e.TgZ(0,"div",43)(1,"div",44),e._UZ(2,"circle-progress",45),e.qZA(),e.TgZ(3,"div",44),e._UZ(4,"circle-progress",46),e.qZA(),e.TgZ(5,"div",44),e._UZ(6,"circle-progress",47),e.qZA(),e.TgZ(7,"div",44),e._UZ(8,"circle-progress",48),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("percent",t.percentBreak)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",t.convertSecondToHours(t.titleBreak))("showUnits",!1)("animation",t.animateCircles)("animationDuration",500),e.xp6(2),e.Q6J("percent",t.percentDriving)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",t.convertSecondToHours(t.titleDriving))("animation",t.animateCircles)("showUnits",!1)("animationDuration",500),e.xp6(2),e.Q6J("percent",t.percentShift)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",t.convertSecondToHours(t.titleShift))("showUnits",!1)("animation",t.animateCircles)("animationDuration",500),e.xp6(2),e.Q6J("percent",t.percentCycle)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",t.convertSecondToHours(t.titleCycle))("showUnits",!1)("animation",t.animateCircles)("animationDuration",500)}}function Ht(i,g){if(1&i&&(e.TgZ(0,"div",49)(1,"div",50)(2,"div",51)(3,"p",8),e._uU(4,"Minimum Break Required"),e.qZA(),e.TgZ(5,"p",8),e._uU(6),e.qZA()(),e.TgZ(7,"div",52),e._UZ(8,"div",53),e.qZA()(),e.TgZ(9,"div",50)(10,"div",51)(11,"p",8),e._uU(12,"Until shift reset"),e.qZA(),e.TgZ(13,"p",8),e._uU(14),e.qZA()(),e.TgZ(15,"div",52),e._UZ(16,"div",54),e.qZA()(),e.TgZ(17,"div",50)(18,"div",51)(19,"p",8),e._uU(20,"Until Cycle Reset"),e.qZA(),e.TgZ(21,"p",8),e._uU(22),e.qZA()(),e.TgZ(23,"div",52),e._UZ(24,"div",55),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(6),e.hij("",t.convertSecondToHours(t.restBreak)," / 00:30"),e.xp6(2),e.Akn("width: "+100*t.progressBreak+"%"),e.xp6(6),e.hij("",t.convertSecondToHours(t.restShift)," / 10:00"),e.xp6(2),e.Akn("width: "+100*t.progressShift+"%"),e.xp6(6),e.hij("",t.convertSecondToHours(t.restCycle)," / 34:00"),e.xp6(2),e.Akn("width: "+100*t.progressCycle+"%")}}function zt(i,g){1&i&&e._UZ(0,"img",56)}function Yt(i,g){1&i&&e._UZ(0,"img",57)}function Vt(i,g){if(1&i&&(e.TgZ(0,"div",65),e._UZ(1,"img",66),e._uU(2),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.violations.length)}}const it=function(i,g){return{"status-dot-error":i,"status-dot-success":g}};function Kt(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"div",58),e.NdJ("click",function(){const l=e.CHM(t).$implicit,a=e.oxw(2);return e.KtG(a.selectLog(l))}),e.TgZ(1,"div",59)(2,"div",8),e._uU(3),e.ALo(4,"date"),e.ALo(5,"date"),e.YNc(6,Vt,3,1,"div",60),e.qZA(),e.TgZ(7,"div",61),e._UZ(8,"div",62),e.TgZ(9,"p"),e._uU(10,"Form"),e.qZA(),e._UZ(11,"div",62),e.TgZ(12,"p"),e._uU(13,"Certify"),e.qZA()()(),e.TgZ(14,"div",63)(15,"p",64),e._uU(16),e.ALo(17,"convertSecotdsToHoursAndMinutes"),e.qZA()()()}if(2&i){const t=g.$implicit;e.xp6(3),e.AsE(" ",e.xi3(4,6,t.logDate,"EEEE"),", ",e.xi3(5,9,t.logDate,"MMMM dd")," "),e.xp6(3),e.Q6J("ngIf",0!==t.violations.length),e.xp6(2),e.Q6J("ngClass",e.WLB(14,it,!t.formManner,t.formManner)),e.xp6(3),e.Q6J("ngClass",e.WLB(17,it,!t.certified,t.certified)),e.xp6(5),e.Oqu(e.lcZ(17,12,t.timeWorked))}}const ot=function(i,g){return{"service-on":i,"service-off":g}},st=function(i){return{"background-color":i}};function Qt(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkLocation())}),e._UZ(3,"img",6),e.qZA(),e.TgZ(4,"div",7)(5,"p",8),e._uU(6),e.qZA(),e.TgZ(7,"p",9),e._uU(8),e.qZA()(),e.TgZ(9,"div",5),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.checkBluetooth())}),e._UZ(10,"img",10),e.qZA()(),e.YNc(11,Wt,1,3,"app-message-banner",11),e.TgZ(12,"div",12)(13,"p",8),e._uU(14,"Current Status"),e.qZA(),e.TgZ(15,"div",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.toggleModal())}),e.TgZ(16,"span",14),e._uU(17),e.qZA(),e._UZ(18,"img",15),e.qZA(),e.TgZ(19,"div",16),e._uU(20),e.qZA()(),e.TgZ(21,"ion-modal",17),e.YNc(22,Jt,12,18,"ng-template"),e.qZA(),e.TgZ(23,"div",18)(24,"p",19),e._uU(25,"Hours Remaining"),e.qZA(),e.YNc(26,Rt,9,36,"div",20),e.qZA(),e.YNc(27,Ht,25,9,"div",21),e.TgZ(28,"div",22)(29,"div",23)(30,"p",8),e._uU(31),e.ALo(32,"convertSecondsToHoursAndMinutesHm"),e.qZA(),e.TgZ(33,"p",9),e._uU(34,"Last 7 Days"),e.qZA()(),e.TgZ(35,"div",23)(36,"p",8),e._uU(37),e.ALo(38,"convertSecondsToHoursAndMinutesHm"),e.qZA(),e.TgZ(39,"p",9),e._uU(40,"Hours Tomorrow"),e.qZA()()(),e.TgZ(41,"div",24)(42,"p",8),e._uU(43,"Split Sleeper Berth"),e.qZA(),e.TgZ(44,"app-toggle-switch",25),e.NdJ("valueCalback",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.toggleSplitSleeperBerth(r))}),e.qZA()(),e.TgZ(45,"button",26),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.switchMode())}),e.YNc(46,zt,1,0,"img",27),e.YNc(47,Yt,1,0,"img",28),e._uU(48),e.qZA(),e.TgZ(49,"p",8),e._uU(50,"Logs and Recap Hours"),e.qZA(),e.TgZ(51,"div",29),e.YNc(52,Kt,18,20,"div",30),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngClass",e.WLB(23,ot,t.locationStatus,!t.locationStatus)),e.xp6(4),e.Oqu(t.driverName),e.xp6(2),e.hij("Vehicle Unit: ",null==t.vehicle?null:t.vehicle.vehicleUnit,""),e.xp6(1),e.Q6J("ngClass",e.WLB(26,ot,t.bluetoothStatus,!t.bluetoothStatus)),e.xp6(2),e.Q6J("ngIf",t.bannerInfo.show),e.xp6(4),e.Q6J("ngStyle",e.VKq(29,st,t.getStatusColor(t.selectedButton))),e.xp6(2),e.Oqu(t.currentStatus.statusName),e.xp6(2),e.Q6J("ngStyle",e.VKq(31,st,t.getStatusColor(t.selectedButton))),e.xp6(1),e.Oqu(t.currentStatusTime),e.xp6(1),e.Q6J("isOpen",t.isModalOpen),e.xp6(5),e.Q6J("ngIf",!t.restMode),e.xp6(1),e.Q6J("ngIf",t.restMode),e.xp6(4),e.Oqu(e.lcZ(32,19,t.getTotalWorkedHours())),e.xp6(6),e.Oqu(e.lcZ(38,21,t.hoursRecap)),e.xp6(7),e.Q6J("isChecked",t.splitSleeperBerth),e.xp6(2),e.Q6J("ngIf",!t.restMode),e.xp6(1),e.Q6J("ngIf",t.restMode),e.xp6(1),e.hij(" ",t.restMode?"Switch to Drive Mode":"Switch to Rest Mode"," "),e.xp6(4),e.Q6J("ngForOf",t.logDailies)}}function Gt(i,g){1&i&&e._UZ(0,"app-page-loader",67),2&i&&e.Q6J("height","100%")}const jt=[{path:"",component:(()=>{class i{constructor(t,o,r,l,a,h,x,c,v,k,A,P,p,G,R){this.navCtrl=t,this.route=o,this.databaseService=r,this.dashboardService=l,this.internetService=a,this.storage=h,this.storageService=x,this.locationService=c,this.bluetoothService=v,this.toastService=k,this.utilityService=A,this.shareService=P,this.changeDetectorRef=p,this.platform=G,this.ngZone=R,this.message="",this.someErrors=!1,this.bReady=!1,this.logDailies=[],this.logEvents=[],this.countDays=[],this.eventLogDailies={},this.selectedButton="",this.progressBreak=0,this.progressShift=0,this.progressCycle=0,this.modalLoading=!1,this.isConfirmButtonActive=!0,this.vehicleId="",this.driverId="",this.driverName="",this.companyId="",this.pickedVehicle="",this.timeZone="",this.percentBreak=0,this.percentDriving=0,this.percentShift=0,this.percentCycle=0,this.titleBreak=0,this.titleDriving=0,this.titleShift=0,this.titleCycle=0,this.redCircle=0,this.restBreak=0,this.restShift=0,this.restCycle=0,this.currentStatus={statusCode:"",statusName:""},this.currentStatusTime="",this.locationDescription="",this.location={locationType:"",description:"",latitude:0,longitude:0},this.comments="",this.restMode=!1,this.locationStatus=!1,this.locationServiceState=!1,this.locationLoading=!1,this.locationDisable=!1,this.bluetoothStatus=!1,this.lastSelectedButton="",this.validation={location:!1},this.animateCircles=!0,this.networkStatus=!0,this.bannerInfo={show:!1,type:"default",title:"",subtitle:""},this.hoursRecap=0,this.last7hours=0,this.recapData=[],this.cycle8Time=0,this.availableToday=0,this.availableTomorrow=0,this.restartFlag=!1,this.recapLoading=!1,this.bResetTimeLast7Day=!1,this.timeZones={},this.pageLoading=!1,this.newShift=36e6,this.driveLimit=396e5,this.shiftLimit=504e5,this.cycleLimit=252e6,this.driveWithoutBreakLimit=288e5,this.restartTime=1224e5,this.notDriveLimit=18e5,this.inspectionTime=6912e5,this.splitSleeperBerth=!1,this.violations={},this.ionViewTrigger=!1}ngOnInit(){var t=this;return(0,T.Z)(function*(){t.pageLoading=!0,t.timeZones=t.utilityService.checkSeason(),"web"!==q.dV.getPlatform()&&(yield t.getLocationState(),yield t.getBluetoothState(),t.platform.resume.subscribe(()=>{t.ngZone.run((0,T.Z)(function*(){yield t.getLocationState(),yield t.getBluetoothState()}))}),t.locationService.getLocationStatusObservable().subscribe(function(){var o=(0,T.Z)(function*(r){t.locationServiceState=r,yield t.getLocationState()});return function(r){return o.apply(this,arguments)}}()),t.bluetoothService.getBluetoothStatusObservable().subscribe(function(){var o=(0,T.Z)(function*(r){yield t.getBluetoothState(),yield t.bluetoothService.getBluetoothAuthorizationStatus()});return function(r){return o.apply(this,arguments)}}())),t.internetSub=t.internetService.interetStatusObs.subscribe(function(){var o=(0,T.Z)(function*(r){t.networkStatus=r,r?(t.bannerInfo.show=!1,t.changeDetectorRef.detectChanges()):(t.bannerInfo={show:!0,title:"Offline Mode",subtitle:"Check your internet connection.",type:"warning"},t.changeDetectorRef.detectChanges()),r&&(t.logEvents=yield(0,K.z)(t.databaseService.getLogEvents()),t.logDailies=yield(0,K.z)(t.databaseService.getLogDailies()))});return function(r){return o.apply(this,arguments)}}()),t.paramsSubscription=t.route.params.subscribe(function(){var o=(0,T.Z)(function*(r){t.bReady&&(yield(0,K.z)(t.databaseService.getLogDailies()).then(function(){var l=(0,T.Z)(function*(a){t.ionViewTrigger||(t.pageLoading=!0,0!==a.length&&(t.logDailies=a),yield(0,K.z)(t.databaseService.getLogEvents()).then(h=>0!==h.length?t.logEvents=h:null),yield t.createLogDailies(),yield t.calcViolations(),t.pageLoading=!1,console.log("Updated form params"))});return function(a){return l.apply(this,arguments)}}()))});return function(r){return o.apply(this,arguments)}}()),t.updateEveryMinute(),setTimeout(()=>t.animateCircles=!1,500)})()}ngOnDestroy(){this.shareService.destroyMessage()}ionViewWillEnter(){var t=this;return(0,T.Z)(function*(){t.ionViewTrigger=!0,t.getVehicle(),t.vehicleId=yield t.storage.get("vehicleId"),t.driverId=yield t.storage.get("driverId"),t.companyId=yield t.storage.get("companyId"),t.timeZone=yield t.storage.get("timeZone"),t.bAuthorized=yield t.storage.get("bAuthorized"),t.driverName=yield t.storage.get("name"),t.pickedVehicle=yield t.storage.get("vehicleUnit");let o=yield t.storage.get("splitSleeperBerth");yield t.handleSplitSleep(o),t.databaseSubscription=t.databaseService.databaseReadySubject.subscribe(r=>{if(r){t.bReady=r;const l=t.databaseService.getLogDailies(),a=t.databaseService.getLogEvents();(0,pt.D)([l,a]).subscribe(function(){var h=(0,T.Z)(function*([x,c]){t.logDailies=x,t.logEvents=c;const v=t.logEvents.filter(k=>["OFF","SB","D","ON","PC","YM"].includes(k.type.code));if(t.selectedButton=v[v.length-1].type.code,t.lastSelectedButton=v[v.length-1].type.code,!1===t.bAuthorized){const k=t.logEvents[t.logEvents.length-1];k.eventTime.logDate=(0,n.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",et.W3[t.timeZone]);let A={logEventId:t.utilityService.uuidv4(),companyId:k.companyId,driverId:t.driverId,eventTime:{logDate:(0,n.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",et.W3[t.timeZone]),timeStamp:(new Date).getTime(),timeStampEnd:(new Date).getTime(),timeZone:t.timeZone},vehicle:{vehicleId:t.vehicleId},eld:{eldId:"00000000-0000-0000-0000-000000000000",macAddress:"",serialNumber:""},location:{locationType:"AUTOMATIC",description:"2mi from Chisinau, Chisinau",latitude:0,longitude:0},sequenceNumber:k?k.sequenceNumber+1:1,type:{name:"Login",code:"LOGIN"},recordStatus:{name:"Active",code:"ACTIVE"},recordOrigin:{name:"Driver",code:"DRIVER"},odometer:0,engineHours:0,malfunction:!1,dataDiagnosticEvent:!1,certificationDate:k.certificationDate,comment:"",eventDataCheck:"",inspection:!1,sent:!0};t.storage.set("lastStatusCode",t.selectedButton),t.storage.set("bAuthorized",!0),t.networkStatus?(yield t.dashboardService.updateLogEvent(k).toPromise().then(function(){var P=(0,T.Z)(function*(p){console.log("Last LogEvent is updated on server:",p),yield t.updateIndexLogEvents(k,!0)});return function(p){return P.apply(this,arguments)}}()).catch(function(){var P=(0,T.Z)(function*(p){console.log("Internet Status: "+t.networkStatus),console.log("Last LogEvent Pushed in offline logEvents array"),yield t.updateIndexLogEvents(k,!1)});return function(p){return P.apply(this,arguments)}}()),yield t.dashboardService.updateLogEvent(A).toPromise().then(function(){var P=(0,T.Z)(function*(p){console.log("New status is updated on server:",p),yield t.updateLogEvents(A,!0)});return function(p){return P.apply(this,arguments)}}()).catch(function(){var P=(0,T.Z)(function*(p){console.log("Internet Status: "+t.networkStatus),console.log("New Log Event Status Pushed in offline logEvents Array"),yield t.updateLogEvents(A,!1)});return function(p){return P.apply(this,arguments)}}())):(console.log("Updated logEvents in offline array"),yield t.updateIndexLogEvents(k,!1),yield t.updateLogEvents(A,!1))}yield t.createLogDailies(),yield t.calcViolations(),t.ionViewTrigger=!1,t.pageLoading=!1});return function(x){return h.apply(this,arguments)}}())}})})()}handleSplitSleep(t){var o=this;return(0,T.Z)(function*(){o.splitSleeperBerth=null!=t&&t,yield o.storage.set("splitSleeperBerth",o.splitSleeperBerth)})()}updateLogEvents(t,o){var r=this;return(0,T.Z)(function*(){t.sent=o,r.logEvents.push(t),yield r.storage.set("logEvents",r.logEvents)})()}getLocationState(){var t=this;return(0,T.Z)(function*(){yield t.locationService.isLocationAvailable().then(function(){var o=(0,T.Z)(function*(r){null!=r&&(t.locationStatus=r,yield t.storage.set("locationStatus",t.locationStatus)),t.changeDetectorRef.detectChanges()});return function(r){return o.apply(this,arguments)}}())})()}getBluetoothState(){var t=this;return(0,T.Z)(function*(){let o=(yield t.bluetoothService.getBluetoothAuthorizationStatus()).status;t.bluetoothStatus=(yield t.bluetoothService.getBluetoothState())&&o,t.changeDetectorRef.detectChanges()})()}updateIndexLogEvents(t,o){var r=this;return(0,T.Z)(function*(){t.sent=o;const l=r.logEvents.findIndex(a=>a.logEventId===t.logEventId);-1!==l&&(r.logEvents[l]=t),yield r.storage.set("logEvents",r.logEvents)})()}getVehicle(){this.storageService.getVehicles().subscribe(t=>{this.vehicle=t[0]},t=>console.log(t))}switchMode(){this.restMode=!this.restMode}checkLocation(){var t=this;return(0,T.Z)(function*(){(yield t.locationService.isLocationServiceAvailable())?yield t.locationService.requestPermission():"android"===q.dV.getPlatform()?yield t.locationService.goToLocationServiceSettings():alert("Go to Settings -> Location Services to enable the location service.")})()}checkBluetooth(){var t=this;return(0,T.Z)(function*(){if(!(yield t.bluetoothService.getBluetoothState())){if(!confirm("Bluetooth service is turned off.\nProceed to settings?"))return void alert("In order to connect to a device, you have to turn on the bluetooth service");"android"===q.dV.getPlatform()?yield t.bluetoothService.goToBluetoothServiceSettings():alert("Go to Settings -> Bluetooth in order to enable the bluetooth service.")}yield t.bluetoothService.requestBluetoothPermission()})()}toggleMode(){const t=document.getElementById("driveModeContainer"),o=document.getElementById("restModeContainer"),r=document.querySelector(".drive_mode ion-button");t&&o&&r&&("none"===t.style.display?(t.style.display="block",o.style.display="none"):(t.style.display="none",o.style.display="block"))}calcViolations(){var t=this;return(0,T.Z)(function*(){t.eventLogDailies={},t.bResetTimeLast7Day=!1;const o=["OFF","SB","D","ON","PC","YM"];t.violations={};let c,v,r=0,l=0,a=0,h=0,x=0,k=0;t.splitSleepData=void 0;let A=JSON.parse(JSON.stringify(t.logEvents)),P=0;switch(A.forEach((p,G)=>{var R,N;if("ACTIVE"===(null===(R=p.recordStatus)||void 0===R?void 0:R.code)&&o.includes(null===(N=p.type)||void 0===N?void 0:N.code)){switch(c=JSON.parse(JSON.stringify(p)),v=JSON.parse(JSON.stringify(p)),v.eventTime.timeStamp=p.eventTime.timeStampEnd?JSON.parse(JSON.stringify(p.eventTime.timeStampEnd)):(new Date).getTime(),P=v.eventTime.timeStamp-c.eventTime.timeStamp,0===t.logEvents.length?t.currentStatus={statusCode:"OFF",statusName:"Off Duty"}:(t.currentStatus.statusCode=p.type.code,t.currentStatus.statusName=p.type.name),t.currentStatusTime=t.convertSecondToHours(P/1e3),c.type.code){case"OFF":case"SB":case"PC":if(r+=P,h+=P,k+=P,t.splitSleeperBerth&&("SB"===c.type.code||"OFF"===c.type.code)&&P>=72e5&&P<t.newShift){let U=Math.trunc(P/1e3/60/60),B=2;U>=2&&U<3?B=2:U>=3&&U<7?B=3:U>=3&&U<8&&"SB"===c.type.code?B=7:"SB"===c.type.code&&(B=8),(B>=7&&"SB"===c.type.code||B<7&&U<7)&&(h-=P,!t.splitSleepData&&h?t.splitSleepData={duration:B,time:h,drivingT:l}:t.splitSleepData&&h&&B+t.splitSleepData.duration>=10&&(h-=t.splitSleepData.time,l-=t.splitSleepData.drivingT,t.splitSleepData={duration:B,time:h,drivingT:l}))}if(r>=t.newShift&&(l=0,h=0,t.splitSleepData=void 0),r>=t.restartTime){h=0,x=0,l=0,t.splitSleepData=void 0;let U=new Date(t.logDailies[7].logDate).getTime();v.eventTime.timeStamp>U&&(t.bResetTimeLast7Day=!0)}break;case"ON":case"YM":r=0,k+=P,h+=P,x+=P,h>t.shiftLimit&&(t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(h-t.shiftLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.DUTY_LIMIT,v.eventTime.timeStamp-(h-t.shiftLimit)),h=0),x>t.cycleLimit&&(t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(x-t.cycleLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.US_70_8,v.eventTime.timeStamp-(x-t.cycleLimit)),x=0);break;case"D":r=0,a+=P,l+=P,h+=P,x+=P,a>t.driveWithoutBreakLimit&&k<t.notDriveLimit&&t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(a-t.driveWithoutBreakLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.REST_BREAK,v.eventTime.timeStamp-(a-t.driveWithoutBreakLimit)),l>t.driveLimit&&(t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(l-t.driveLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.DRIVING,v.eventTime.timeStamp-(l-t.driveLimit)),l=0),h>t.shiftLimit&&(t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(h-t.shiftLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.DUTY_LIMIT,v.eventTime.timeStamp-(h-t.shiftLimit)),h=0),x>t.cycleLimit&&(t.pushViolation((0,n.p6)(new Date(v.eventTime.timeStamp-(x-t.cycleLimit)),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]),Q.B.US_70_8,v.eventTime.timeStamp-(x-t.cycleLimit)),x=0),k=0}if(k>=t.notDriveLimit&&(k=0,a=0),c.eventTime.logDate===(0,n.p6)(new Date(v.eventTime.timeStamp),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone])){let U=(v.eventTime.timeStamp-c.eventTime.timeStamp)/1e3;switch(p.type.code.toUpperCase()){case"OFF":case"PC":t.eventLogDailies[c.eventTime.logDate].timeOff+=U;break;case"SB":t.eventLogDailies[c.eventTime.logDate].timeSleeper+=U;break;case"D":t.eventLogDailies[c.eventTime.logDate].timeDriving+=U;break;case"ON":case"YM":t.eventLogDailies[c.eventTime.logDate].timeOnDuty+=U}}else{let U=new Date((0,n.p6)(new Date(v.eventTime.timeStamp),"MMM dd hh:mm:ss a","en-US",t.timeZones[t.timeZone])),B=(0,n.p6)(new Date(v.eventTime.timeStamp),"yyyy/MM/dd","en-US",t.timeZones[t.timeZone]);const Y=(J,ce)=>{let X=ce/1e3;try{switch(t.eventLogDailies[J]||(t.eventLogDailies[J]={timeOff:0,timeOnDuty:0,timeDriving:0,timeSleeper:0,timeWorked:0}),p.type.code.toUpperCase()){case"OFF":case"PC":t.eventLogDailies[J].timeOff+=X;break;case"SB":t.eventLogDailies[J].timeSleeper+=X;break;case"D":t.eventLogDailies[J].timeDriving+=X;break;case"ON":case"YM":t.eventLogDailies[J].timeOnDuty+=X}}catch{console.log(J)}};for(Y(B,60*U.getHours()*60*1e3+60*U.getMinutes()*1e3+1e3*U.getSeconds()),B=(0,n.p6)(new Date(B).setDate(new Date(B).getDate()-1),"yyyy/MM/dd","en-US");B!=c.eventTime.logDate;){Y(B,864e5);let J=new Date(B);J.setDate(J.getDate()-1),B=(0,n.p6)(J,"yyyy/MM/dd","en-US")}let F=new Date((0,n.p6)(new Date(c.eventTime.timeStamp),"MMM dd hh:mm:ss a","en-US",t.timeZones[t.timeZone]));Y(B,864e5-(60*F.getHours()*60*1e3+60*F.getMinutes()*1e3+1e3*F.getSeconds()))}t.eventLogDailies[c.eventTime.logDate].timeWorked=t.eventLogDailies[c.eventTime.logDate].timeOnDuty+t.eventLogDailies[c.eventTime.logDate].timeDriving}}),t.titleBreak=(t.driveWithoutBreakLimit-a)/1e3<0?0:(t.driveWithoutBreakLimit-a)/1e3,t.titleCycle=(t.cycleLimit-x)/1e3<0?0:(t.cycleLimit-x)/1e3,t.titleDriving=(t.driveLimit-l)/1e3<0?0:(t.driveLimit-l)/1e3,t.titleShift=(t.shiftLimit-h)/1e3<0?0:(t.shiftLimit-h)/1e3,t.percentBreak=100*t.titleBreak/(t.driveWithoutBreakLimit/1e3),t.percentCycle=100*t.titleCycle/(t.cycleLimit/1e3),t.percentDriving=100*t.titleDriving/(t.driveLimit/1e3),t.percentShift=100*t.titleShift/(t.shiftLimit/1e3),t.hoursRecap=t.bResetTimeLast7Day?(t.cycleLimit-x)/1e3:(t.cycleLimit-x)/1e3+t.logDailies[7].timeWorked,t.currentStatus.statusCode){case"D":t.restBreak=1800,t.restShift=36e3,t.restCycle=122400;break;case"ON":case"YM":t.restBreak=t.notDriveLimit-P<0?0:(t.notDriveLimit-P)/1e3,t.restShift=36e3,t.restCycle=122400;break;case"OFF":case"PC":case"SB":t.restBreak=t.notDriveLimit-P<0?0:(t.notDriveLimit-P)/1e3,t.restShift=t.newShift-P<0?0:(t.newShift-P)/1e3,t.restCycle=t.restartTime-P<0?0:(t.restartTime-P)/1e3}t.progressBreak=100*t.restBreak/1800/100,t.progressShift=100*t.restShift/36e3/100,t.progressCycle=100*t.restCycle/122400/100;for(const p of t.logDailies)if(t.eventLogDailies[p.logDate]){let G=p.timeDriving!==Math.floor(t.eventLogDailies[p.logDate].timeDriving)||p.timeOffDuty!==Math.floor(t.eventLogDailies[p.logDate].timeOff)||p.timeOnDuty!==Math.floor(t.eventLogDailies[p.logDate].timeOnDuty)||p.timeSleeper!==Math.floor(t.eventLogDailies[p.logDate].timeSleeper),R=!(!t.violations[p.logDate]||0===t.violations[p.logDate].length)&&JSON.stringify(t.violations[p.logDate])!==JSON.stringify(p.violations);p.violations=t.violations[p.logDate]?JSON.parse(JSON.stringify(t.violations[p.logDate])):[],p.timeDriving=Math.floor(t.eventLogDailies[p.logDate].timeDriving),p.timeOffDuty=Math.floor(t.eventLogDailies[p.logDate].timeOff),p.timeOnDuty=Math.floor(t.eventLogDailies[p.logDate].timeOnDuty),p.timeSleeper=Math.floor(t.eventLogDailies[p.logDate].timeSleeper),p.timeWorked=Math.floor(t.eventLogDailies[p.logDate].timeWorked),(G||R)&&(yield t.updateLogDailies(p),t.changeDetectorRef.detectChanges())}console.log(t.violations)})()}pushViolation(t,o,r){let l={startTime:r,timeZone:"",regulations:{code:o.code,name:o.name}};this.violations[t]?this.violations[t].push(l):this.violations[t]=[l]}toggleModal(){var t=this;return(0,T.Z)(function*(){t.isModalOpen=!0,t.locationDescription="",t.comments="",t.currentStatus&&t.selectButton(t.currentStatus.statusCode),yield t.getLocalCurrentLocation()})()}getLocalCurrentLocation(){var t=this;return(0,T.Z)(function*(){t.locationLoading=!0,"web"!==q.dV.getPlatform()&&(t.locationStatus||t.toastService.showToast("Problems fetching location! Check the location service!","danger",2500)),yield t.locationService.getCurrentLocation().then(o=>{t.location=o,t.locationDescription=t.location.description,t.locationLoading=!1,t.locationDisable="AUTOMATIC"===t.location.locationType})})()}selectLog(t){this.navCtrl.navigateForward(["log-item",t.logDailyId])}selectButton(t){this.selectedButton=t,this.isConfirmButtonActive=this.selectedButton!==this.currentStatus.statusCode}cancel(){this.shareService.destroyMessage(),this.selectedButton=this.lastSelectedButton,this.isModalOpen=!1}confirm(){var t=this;return(0,T.Z)(function*(){t.shareService.changeMessage(t.utilityService.generateString(5)),t.utilityService.validateForm(t.validation)&&(t.selectedButton&&t.selectedButton!==t.lastSelectedButton?(t.lastSelectedButton=t.selectedButton,t.shareService.destroyMessage(),yield t.storage.set("lastStatusCode",t.selectedButton),yield t.onWillDismiss().then(()=>{t.isModalOpen=!1,t.modalLoading=!1})):t.toastService.showToast("You need to select a different status!","warning"))})()}onWillDismiss(){var t=this;return(0,T.Z)(function*(){t.modalLoading=!0;const o=(new Date).getTime(),r=["OFF","SB","D","ON","PC","YM"],l=t.logEvents.filter(c=>r.includes(c.type.code));let a=l[l.length-1];a&&(a.eventTime.timeStampEnd=o);let h={OFF:{statusName:"Off Duty",eventTypeType:"DUTY_STATUS"},SB:{statusName:"Sleeper Berth",eventTypeType:"DUTY_STATUS"},D:{statusName:"Driving",eventTypeType:"DUTY_STATUS"},ON:{statusName:"On Duty",eventTypeType:"DUTY_STATUS"},PC:{statusName:"Personal Conveyance",eventTypeType:"DRIVER_INDICATES"},YM:{statusName:"Yard Moves",eventTypeType:"DRIVER_INDICATES"}},x={logEventId:t.utilityService.uuidv4(),companyId:a.companyId,driverId:t.driverId,eventTime:{logDate:(0,n.p6)(new Date(o),"yyyy/MM/dd","en_US",et.W3[t.timeZone]),timeStamp:o,timeZone:t.timeZone},vehicle:{vehicleId:t.vehicleId},eld:{eldId:"00000000-0000-0000-0000-000000000000",macAddress:"",serialNumber:""},location:{locationType:t.location.locationType,description:t.locationDescription,latitude:t.location.latitude,longitude:t.location.longitude},sequenceNumber:a?a.sequenceNumber+1:1,type:{name:h[t.selectedButton]?h[t.selectedButton].statusName:"Unknown",code:t.selectedButton},recordStatus:{name:"Active",code:"ACTIVE"},recordOrigin:{name:"Driver",code:"DRIVER"},odometer:0,engineHours:0,malfunction:!1,dataDiagnosticEvent:!1,certificationDate:a.certificationDate,comment:t.comments,eventDataCheck:"",inspection:!1,sent:!0};t.networkStatus?(yield t.dashboardService.updateLogEvent(a).toPromise().then(function(){var c=(0,T.Z)(function*(v){console.log("Last LogEvent is updated on server:",v),yield t.updateIndexLogEvents(a,!0)});return function(v){return c.apply(this,arguments)}}()).catch(function(){var c=(0,T.Z)(function*(v){console.log("Internet Status: "+t.networkStatus),console.log("Last LogEvent Pushed in offline logEvents array"),yield t.updateIndexLogEvents(a,!1)});return function(v){return c.apply(this,arguments)}}()),yield t.dashboardService.updateLogEvent(x).toPromise().then(function(){var c=(0,T.Z)(function*(v){console.log("New status is updated on server:",v),yield t.updateLogEvents(x,!0)});return function(v){return c.apply(this,arguments)}}()).catch(function(){var c=(0,T.Z)(function*(v){console.log("Internet Status: "+t.networkStatus),console.log("New Log Event Status Pushed in offline logEvents Array"),yield t.updateLogEvents(x,!1)});return function(v){return c.apply(this,arguments)}}())):(console.log("Updated logEvents in offline array"),yield t.updateIndexLogEvents(a,!1),yield t.updateLogEvents(x,!1)),yield t.createLogDailies(),yield t.calcViolations()})()}convertSecondToHours(t){let o,r,l;return t<0?(o="-",t=-t):o="",r=(24*Math.trunc(t/86400%24)+Math.trunc(t/3600%24)).toString(),l=(Math.trunc(t/60)%60).toString(),0===r.length&&(r="00"),1===r.length&&(r="0"+r),0===l.length&&(l="0"),1===l.length&&(l="0"+l),o+r+":"+l}toggleSplitSleeperBerth(t){var o=this;return(0,T.Z)(function*(){o.handleSplitSleep(t),yield o.calcViolations()})()}createLogDailies(){var t=this;return(0,T.Z)(function*(){let o=new Date;t.countDays=[],t.logDailies=yield(0,K.z)(t.databaseService.getLogDailies());for(let r=0;r<14;r++){const l=o.toISOString().split("T")[0].replace(/-/g,"/"),a=t.logDailies.findIndex(h=>h.logDate.includes(l));if(-1!==a)t.countDays.push(t.logDailies[a]);else{let h={logDailyId:t.utilityService.uuidv4(),companyId:t.companyId,driverId:t.driverId,driverName:"",logDate:l.replace(/-/g,"/"),timeOffDuty:0,timeSleeper:0,timeDriving:0,timeOnDuty:0,timeWorked:0,violations:[],formManner:!1,certified:!1,form:{trailers:"",shippingDoc:"",fromAddress:"",toAddress:"",signatureId:"00000000-0000-0000-0000-000000000000"}};t.countDays.push(h)}o.setDate(o.getDate()-1)}t.countDays.sort((r,l)=>l.logDate.localeCompare(r.logDate)),t.logDailies=t.countDays.slice(),yield t.storage.set("logDailies",t.logDailies)})()}updateLogDailies(t){var o=this;return(0,T.Z)(function*(){o.networkStatus?o.dashboardService.updateLogDaily(t).subscribe(function(){var r=(0,T.Z)(function*(l){console.log("LogDaily (durationStatuses) is updated on server:",l),yield o.updateIndexLogDaily(t,!0)});return function(l){return r.apply(this,arguments)}}(),function(){var r=(0,T.Z)(function*(l){console.log("Internet Status: "+o.networkStatus),yield o.updateIndexLogDaily(t,!1),console.log("Pushed in logDailies")});return function(l){return r.apply(this,arguments)}}()):(console.log("Updated logEvents in offline array"),yield o.updateIndexLogDaily(t,!1))})()}updateLogDaily(t,o){var r=this;return(0,T.Z)(function*(){t.sent=o,r.logDailies.push(t),yield r.storage.set("logDailies",r.logDailies)})()}updateIndexLogDaily(t,o){var r=this;return(0,T.Z)(function*(){t.sent=o;const l=r.logDailies.findIndex(a=>a.logDailyId===t.logDailyId);-1!==l&&(r.logDailies[l]=t),yield r.storage.set("logDailies",r.logDailies)})()}getStatusColor(t){return t?{OFF:"var(--gray-300)",SB:"var(--gray-500)",ON:"var(--warning-400)",D:"var(--success-500)",PC:"var(--gray-300)",YM:"var(--warning-400)"}[t]:"var(--success-500)"}uploadDriverStatus(){var t=this;return(0,T.Z)(function*(){if(t.networkStatus){let o;yield t.locationService.getCurrentLocation().then(r=>{if("MANUAL"===r.locationType){let l=t.logEvents.slice().reverse().findIndex(a=>["OFF","SB","D","ON","PC","YM"].includes(a.type.code));o=t.logEvents.slice().reverse()[l].location}else o=r}),yield(0,K.z)(t.dashboardService.updateDriverStatuses({driverId:t.driverId,vehicleId:t.vehicleId,eventType:{code:t.currentStatus.statusCode},location:o,breakTime:{availableTime:parseInt(t.titleBreak.toPrecision()),limitTime:0,accumulatedTime:0},driveTime:{availableTime:parseInt(t.titleDriving.toPrecision()),limitTime:0,accumulatedTime:0},shiftTime:{availableTime:parseInt(t.titleShift.toPrecision()),limitTime:0,accumulatedTime:0},cycleTime:{availableTime:parseInt(t.titleCycle.toPrecision()),limitTime:0,accumulatedTime:0},lastEventDate:t.logEvents[t.logEvents.length-1].eventTime.timeStamp,updateDate:(new Date).getTime()}))}})()}updateEveryMinute(){var t=this;setInterval((0,T.Z)(function*(){console.log("Every Minute Update"),yield t.createLogDailies(),yield t.calcViolations(),yield t.uploadDriverStatus()}),6e4)}getTotalWorkedHours(){return this.logDailies.slice(1,8).reduce((t,o)=>t+(null==o.timeWorked?0:o.timeWorked),0)}ionViewWillLeave(){var t=this;return(0,T.Z)(function*(){t.databaseSubscription&&t.databaseSubscription.unsubscribe()})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(H.SH),e.Y36(tt.gz),e.Y36(nt.k),e.Y36(ht.s),e.Y36(mt.W),e.Y36(vt.K),e.Y36(nt.k),e.Y36(ft.a),e.Y36(_t.G),e.Y36(Ct.k),e.Y36(yt.t),e.Y36(bt.t),e.Y36(e.sBO),e.Y36(H.t4),e.Y36(e.R0b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-hos"]],decls:3,vars:3,consts:[[3,"forceOverscroll"],["class","hos-wrapper",4,"ngIf"],[3,"height",4,"ngIf"],[1,"hos-wrapper"],[1,"hos-header"],[1,"service",3,"ngClass","click"],["src","assets/icon/location_icon.svg"],[1,"hos-name"],[1,"subtitle"],[1,"text-1"],["src","assets/icon/bluetooth_icon.svg"],[3,"title","subtitle","type",4,"ngIf"],[1,"status-bar"],["id","trigger-status",1,"green",2,"max-width","39%",3,"ngStyle","click"],[1,"text-elipsis"],["src","assets/icon/arrow-bottom.svg","alt","arrow"],[1,"green",3,"ngStyle"],["trigger","trigger-status",3,"isOpen"],[1,"circles"],[1,"text-2",2,"margin-bottom","5px"],["class","circles-block",4,"ngIf"],["class","rest-mode",4,"ngIf"],[1,"time"],[1,"time-block"],[1,"switch-sleep"],[3,"isChecked","valueCalback"],[1,"btn","primary-btn",3,"click"],["src","assets/icon/moon.svg","alt","moon",4,"ngIf"],["src","assets/icon/drive.svg","alt","moon",4,"ngIf"],[1,"log-dailies"],["class","log-daily",3,"click",4,"ngFor","ngForOf"],[3,"title","subtitle","type"],[3,"title","backButton","backButtonCallback"],[1,"modal-content"],[3,"currentValue","selectedValue"],[3,"label","fill","type","value","loading","disabled","validation","valueChange","gpsCallback","validationChange"],[3,"label","fill","type","value","noValidation","valueChange"],[1,"btns-flex"],[1,"btn","secondary-btn","btn-custom",3,"click"],[1,"btn","primary-btn","btn-custom",3,"click"],[4,"ngIf"],["name","circular","color","light",4,"ngIf"],["name","circular","color","light"],[1,"circles-block"],[1,"circle-block"],["outerStrokeColor","rgb(254, 200, 75)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgb(254, 200, 75)","titleFontWeight","600","subtitle","Break","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animation","animationDuration"],["outerStrokeColor","rgba(18, 183, 106, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(18, 183, 106, 1)","titleFontWeight","600","subtitle","Driving","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","animation","showUnits","animationDuration"],["outerStrokeColor","rgba(155, 138, 251, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(155, 138, 251, 1)","titleFontWeight","600","subtitle","Shift","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animation","animationDuration"],["outerStrokeColor","rgba(251, 101, 20, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(251, 101, 20, 1)","titleFontWeight","600","subtitle","Cycle","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animation","animationDuration"],[1,"rest-mode"],[1,"rest-row"],[1,"row-1"],[1,"progress-bar-outer"],["id","inner-1",1,"progress-bar-inner"],["id","inner-2",1,"progress-bar-inner"],["id","inner-3",1,"progress-bar-inner"],["src","assets/icon/moon.svg","alt","moon"],["src","assets/icon/drive.svg","alt","moon"],[1,"log-daily",3,"click"],[1,"log-left"],["class","violation-number",4,"ngIf"],[1,"sub-info"],[1,"status-dot",3,"ngClass"],[1,"log-right"],[1,"hours-worked"],[1,"violation-number"],["src","../../../assets/icon/violation.svg"],[3,"height"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-content",0),e.YNc(1,Qt,53,33,"div",1),e.YNc(2,Gt,1,1,"app-page-loader",2),e.qZA()),2&t&&(e.Q6J("forceOverscroll",!1),e.xp6(1),e.Q6J("ngIf",!o.pageLoading),e.xp6(1),e.Q6J("ngIf",o.pageLoading))},dependencies:[n.mk,n.sg,n.O5,n.PC,H.W2,H.PQ,H.ki,gt,xt.G,St,Mt.U,Tt.L,Et,Zt.C,Ut.f,n.uU,At.k,Bt],styles:[".hos-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:20px;padding:20px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:10px;background-color:var(--gray-100);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]   .hos-name[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background-color:var(--warning-500);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%], .hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{color:var(--warning-25)}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{flex-grow:1}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;gap:10px;color:var(--gray-25);font-size:16px;border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;max-width:80%;min-width:60%;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]   .circle-block[_ngcontent-%COMP%]{width:45%;max-width:140px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-between;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]{width:100%;height:10px;background-color:var(--gray-200);border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   .progress-bar-inner[_ngcontent-%COMP%]{height:10px;border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-1[_ngcontent-%COMP%]{background-color:#fec84b}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-2[_ngcontent-%COMP%]{background-color:#9b8afb}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-3[_ngcontent-%COMP%]{background-color:#fb6514}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]{flex:1;border-radius:30px;background-color:var(--gray-100);text-align:center;padding:20px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:30px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--handle-background: var(--gray-300);--handle-background-checked: var(--success-500);--track-background: var(--gray-25);--track-background-checked: var(--gray-25);--handle-width: 23px;--handle-height: 23px}.hos-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:217px;height:50px;display:flex;justify-content:space-between;align-items:center;border-radius:41px;font-size:16px;padding:15px;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:10px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]   .sub-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]   .sub-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--gray-500)}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]   div.subtitle[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--gray-700);display:flex;align-items:center;gap:8px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]{background-color:var(--success-500);border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]   .hours-worked[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:30px}.modal-content[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{height:100px}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:41px;font-size:16px}ion-progress-bar[_ngcontent-%COMP%]{--background: var(--gray-200);--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-break[_ngcontent-%COMP%]{--progress-background: #fec84b}ion-progress-bar[_ngcontent-%COMP%]   #progress-shift[_ngcontent-%COMP%]{--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-cycle[_ngcontent-%COMP%]{--progress-background: #fb6514}.status-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.btn-custom[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.status-dot-error[_ngcontent-%COMP%]{background-color:var(--error-600)}.status-dot-success[_ngcontent-%COMP%]{background-color:var(--success-600)}.service[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;display:flex;justify-content:center;align-items:center}.service-on[_ngcontent-%COMP%]{background-color:var(--success-500)}.service-off[_ngcontent-%COMP%]{background-color:var(--error-500)}.violation-number[_ngcontent-%COMP%]{color:var(--error-600);display:flex;align-items:center;gap:4px;font-size:15px}.violation-number[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:18px;display:flex;align-items:center}"]}),i})()}];let $t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[tt.Bz.forChild(jt),tt.Bz]}),i})();var qt=s(4546);let Xt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.ez,O.u5,H.Pc]}),i})();var te=s(4166),ee=s(4877),ne=s(2218),ie=s(8134);let oe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.ez,O.u5,H.Pc]}),i})();var se=s(4748),re=s(8974);let ae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.ez,O.u5,H.Pc,$t,dt.forRoot(),qt.y,Xt,te.v,ee.r,ne.H,ie.y,oe,se.e,re.p]}),i})()},2092:(W,w,s)=>{s.d(w,{k:()=>O});var n=s(8256);let O=(()=>{class e{transform(b){const d=Math.floor(b/3600),C=Math.floor(b%3600/60);return`${String(d).padStart(2,"0")}:${String(C).padStart(2,"0")}`}}return e.\u0275fac=function(b){return new(b||e)},e.\u0275pipe=n.Yjl({name:"convertSecotdsToHoursAndMinutes",type:e,pure:!0}),e})()},6994:(W,w,s)=>{s.d(w,{t:()=>D});var n=s(7579),O=s(1135),e=s(8256);let D=(()=>{class b{constructor(){this.editDataDetails=[],this.subject=new n.x,this.messageSource=new O.X(this.editDataDetails),this.currentMessage=this.messageSource.asObservable()}changeMessage(C){this.messageSource.next(C)}destroyMessage(){this.messageSource.next("")}}return b.\u0275fac=function(C){return new(C||b)},b.\u0275prov=e.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},7278:(W,w,s)=>{s.d(w,{t:()=>D});var n=s(8924),O=s(8256),e=s(849);let D=(()=>{class b{constructor(C){this.storage=C}generateString(C){const f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let E=" ";const L=f.length;for(let Z=0;Z<C;Z++)E+=f.charAt(Math.floor(Math.random()*L));return E}validateForm(C){let f=!0;for(const E in C)f=f&&C[E];return f}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(C){const f=16*Math.random()|0;return("x"==C?f:3&f|8).toString(16)})}msToTime(C){let f=Math.floor(C/1e3%60),E=Math.floor(C/6e4%60),L=Math.floor(C/36e5);return L=L<10?"0"+L:L,E=E<10?"0"+E:E,f=f<10?"0"+f:f,L+"h "+E+"min "+f+"s"}checkSeason(){return(new Date).getTime()>=n.Rk[(new Date).getFullYear().toString()].summer&&(new Date).getTime()<n.Rk[(new Date).getFullYear().toString()].winter?n.Eb:n.bm}}return b.\u0275fac=function(C){return new(C||b)(O.LFG(e.K))},b.\u0275prov=O.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},2368:(W,w,s)=>{s.d(w,{B:()=>n});const n={REST_BREAK:{code:"M30_REST_BREAK",name:"Break violation"},DRIVING:{code:"H11_DRIVING",name:"Driving violation"},DUTY_LIMIT:{code:"H14_DUTY_LIMIT",name:"Shift violation"},US_70_8:{code:"US_70_8",name:"Cycle violation"}}},1566:(W,w,s)=>{s.d(w,{P:()=>L,z:()=>E});var n=s(727);class O extends n.w0{constructor(_,m){super()}schedule(_,m=0){return this}}const e={setInterval(Z,_,...m){const{delegate:S}=e;return null!=S&&S.setInterval?S.setInterval(Z,_,...m):setInterval(Z,_,...m)},clearInterval(Z){const{delegate:_}=e;return((null==_?void 0:_.clearInterval)||clearInterval)(Z)},delegate:void 0};var D=s(8737);const d={now:()=>(d.delegate||Date).now(),delegate:void 0};class C{constructor(_,m=C.now){this.schedulerActionCtor=_,this.now=m}schedule(_,m=0,S){return new this.schedulerActionCtor(this,_).schedule(S,m)}}C.now=d.now;const E=new class f extends C{constructor(_,m=C.now){super(_,m),this.actions=[],this._active=!1}flush(_){const{actions:m}=this;if(this._active)return void m.push(_);let S;this._active=!0;do{if(S=_.execute(_.state,_.delay))break}while(_=m.shift());if(this._active=!1,S){for(;_=m.shift();)_.unsubscribe();throw S}}}(class b extends O{constructor(_,m){super(_,m),this.scheduler=_,this.work=m,this.pending=!1}schedule(_,m=0){var S;if(this.closed)return this;this.state=_;const u=this.id,M=this.scheduler;return null!=u&&(this.id=this.recycleAsyncId(M,u,m)),this.pending=!0,this.delay=m,this.id=null!==(S=this.id)&&void 0!==S?S:this.requestAsyncId(M,this.id,m),this}requestAsyncId(_,m,S=0){return e.setInterval(_.flush.bind(_,this),S)}recycleAsyncId(_,m,S=0){if(null!=S&&this.delay===S&&!1===this.pending)return m;null!=m&&e.clearInterval(m)}execute(_,m){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const S=this._execute(_,m);if(S)return S;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(_,m){let u,S=!1;try{this.work(_)}catch(M){S=!0,u=M||new Error("Scheduled action threw falsy error")}if(S)return this.unsubscribe(),u}unsubscribe(){if(!this.closed){const{id:_,scheduler:m}=this,{actions:S}=m;this.work=this.state=this.scheduler=null,this.pending=!1,(0,D.P)(S,this),null!=_&&(this.id=this.recycleAsyncId(m,_,null)),this.delay=null,super.unsubscribe()}}}),L=E}}]);