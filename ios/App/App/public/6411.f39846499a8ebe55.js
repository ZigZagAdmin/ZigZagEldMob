"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6411,3646,8871,4576,4546],{3646:(_,d,i)=>{i.d(d,{G:()=>g});var n=i(8256),m=i(6895);function u(o,s){if(1&o){const r=n.EpF();n.TgZ(0,"img",6),n.NdJ("click",function(){n.CHM(r);const f=n.oxw();return n.KtG(f.goBack())}),n.qZA()}}const c=["*"];let g=(()=>{class o{constructor(){this.backButton=!1,this.backButtonCallback=new n.vpe}ngOnInit(){}goBack(){this.backButtonCallback.emit()}}return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-header"]],inputs:{title:"title",subtitle:"subtitle",backButton:"backButton"},outputs:{backButtonCallback:"backButtonCallback"},ngContentSelectors:c,decls:9,vars:3,consts:[[1,"title-container","padding-g"],[2,"display","flex","justify-content","space-between","align-items","center"],[1,"title-back"],["src","../../../assets/imgs/back-arrow.png",3,"click",4,"ngIf"],[1,"page-title"],[1,"subtitle","custom-subtitle"],["src","../../../assets/imgs/back-arrow.png",3,"click"]],template:function(r,t){1&r&&(n.F$t(),n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n.YNc(3,u,1,0,"img",3),n.TgZ(4,"div",4),n._uU(5),n.qZA()(),n.Hsn(6),n.qZA(),n.TgZ(7,"div",5),n._uU(8),n.qZA()()),2&r&&(n.xp6(3),n.Q6J("ngIf",t.backButton),n.xp6(2),n.Oqu(t.title),n.xp6(3),n.hij(" ",t.subtitle," "))},dependencies:[m.O5],styles:[".title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.title-back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.custom-subtitle[_ngcontent-%COMP%]{margin-left:35px}.title-container[_ngcontent-%COMP%]{padding-bottom:0}"]}),o})()},4546:(_,d,i)=>{i.d(d,{y:()=>g});var n=i(6895),m=i(4006),u=i(7151),c=i(8256);let g=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[n.ez,m.u5,u.Pc]}),o})()},8974:(_,d,i)=>{i.d(d,{p:()=>g});var n=i(6895),m=i(4006),u=i(7151),c=i(8256);let g=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[n.ez,m.u5,u.Pc]}),o})()},6411:(_,d,i)=>{i.r(d),i.d(d,{SelectVehiclePageModule:()=>D});var n=i(6895),m=i(4006),u=i(849),c=i(7151),g=i(5050),o=i(5861),s=i(3905),r=i(4128),t=i(8256),f=i(4382),y=i(3646);function k(a,v){if(1&a){const e=t.EpF();t.TgZ(0,"div",5),t.NdJ("click",function(){const p=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.selectVehicle(p))}),t.TgZ(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t._uU(4),t.qZA()()}if(2&a){const e=v.$implicit;t.xp6(2),t.Oqu((null==e?null:e.make)+" "+(null==e?null:e.model)),t.xp6(2),t.Oqu((null==e?null:e.year)+", Vehicle Unit: "+(null==e?null:e.vehicleUnit))}}const E=[{path:"",component:(()=>{class a{constructor(e,l,h){this.navCtrl=e,this.databaseService=l,this.storage=h,this.bReady=!1,this.showBackButton=!1,this.pickedVehicle="",this.vehicles=[]}ngOnInit(){var e=this;return(0,o.Z)(function*(){e.databaseSubscription=e.databaseService.isDatabaseReady().subscribe(function(){var l=(0,o.Z)(function*(h){if(h){e.bReady=h;let p=(0,s.z)(e.databaseService.getVehicles()),C=(0,s.z)(e.databaseService.getDrivers()),I=(0,s.z)(e.databaseService.getCompany());(0,r.D)([p,C,I]).subscribe(([R,P,Z])=>{var B,O,b,M,S;e.vehicles=R,P&&0!==P.length&&(e.driver=P[0]),e.company=Z,e.storage.set("HoursOfServiceRuleDays",null===(B=e.driver)||void 0===B||null===(O=B.driverInfo)||void 0===O?void 0:O.settings.hoursOfService.days),e.storage.set("HoursOfServiceRuleHours",null===(b=e.driver)||void 0===b||null===(M=b.driverInfo)||void 0===M?void 0:M.settings.hoursOfService.hours),e.storage.set("timeZone",null===(S=e.company)||void 0===S?void 0:S.mainOffice.timeZoneCode)})}});return function(h){return l.apply(this,arguments)}}())})()}ionViewWillEnter(){const e=localStorage.getItem("showBackButton");this.showBackButton=null!==e&&JSON.parse(e),this.bReady&&this.databaseService.getDrivers().subscribe(l=>{l&&(this.driver=l[0])})}handleRefresh(e){setTimeout(()=>{e.target.complete()},1e3)}selectVehicle(e){this.storage.set("vehicleId",e.vehicleId),this.storage.set("vehicleUnit",e.vehicleUnit),this.storage.set("vehicles",[e]),this.showBackButton?this.navCtrl.navigateBack("/unitab/others",{replaceUrl:!0}):this.navCtrl.navigateForward("/connect-mac")}ionViewWillLeave(){localStorage.removeItem("showBackButton"),this.databaseSubscription&&this.databaseSubscription.unsubscribe()}goBack(){this.navCtrl.navigateBack("unitab/others")}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.SH),t.Y36(f.k),t.Y36(u.K))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-select-vehicle"]],decls:6,vars:5,consts:[[3,"forceOverscroll","fullscreen"],[3,"title","backButton","backButtonCallback"],["slot","fixed",3,"ionRefresh"],[1,"vehicle-container"],["class","vehicle-card",3,"click",4,"ngFor","ngForOf"],[1,"vehicle-card",3,"click"],[1,"vehicle-card-title"],[1,"vehicle-card-subtitle"]],template:function(e,l){1&e&&(t.TgZ(0,"ion-content",0)(1,"app-header",1),t.NdJ("backButtonCallback",function(){return l.goBack()}),t.qZA(),t.TgZ(2,"ion-refresher",2),t.NdJ("ionRefresh",function(p){return l.handleRefresh(p)}),t._UZ(3,"ion-refresher-content"),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,k,5,2,"div",4),t.qZA()()),2&e&&(t.Q6J("forceOverscroll",!1)("fullscreen",!0),t.xp6(1),t.Q6J("title","Select Vehicle")("backButton",l.showBackButton),t.xp6(4),t.Q6J("ngForOf",null==l.driver||null==l.driver.driverInfo?null:l.driver.driverInfo.assignedVehicles))},dependencies:[n.sg,c.W2,c.nJ,c.Wo,y.G],styles:[".vehicle-container[_ngcontent-%COMP%]{padding:20px;display:flex;flex-direction:column;gap:15px}.vehicle-card[_ngcontent-%COMP%]{width:100%;background-color:var(--gray-100);padding:15px;border-radius:10px;display:flex;flex-direction:column;gap:10px}.vehicle-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:var(--gray-700)}.vehicle-card-subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--gray-500)}"]}),a})()}];let T=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[g.Bz.forChild(E),g.Bz]}),a})();var x=i(4546),V=i(8974);let D=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[u.K,f.k],imports:[n.ez,m.u5,c.Pc,T,x.y,V.p]}),a})()}}]);