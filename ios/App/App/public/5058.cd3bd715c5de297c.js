"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5058,3646,8871,4576,4546],{3646:(_,h,i)=>{i.d(h,{G:()=>g});var o=i(8256),C=i(6895);function p(s,c){if(1&s){const l=o.EpF();o.TgZ(0,"img",6),o.NdJ("click",function(){o.CHM(l);const m=o.oxw();return o.KtG(m.goBack())}),o.qZA()}}const v=["*"];let g=(()=>{class s{constructor(){this.backButton=!1,this.backButtonCallback=new o.vpe}ngOnInit(){}goBack(){this.backButtonCallback.emit()}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-header"]],inputs:{title:"title",subtitle:"subtitle",backButton:"backButton"},outputs:{backButtonCallback:"backButtonCallback"},ngContentSelectors:v,decls:9,vars:3,consts:[[1,"title-container","padding-g"],[2,"display","flex","justify-content","space-between","align-items","center"],[1,"title-back"],["src","../../../assets/imgs/back-arrow.png",3,"click",4,"ngIf"],[1,"page-title"],[1,"subtitle","custom-subtitle"],["src","../../../assets/imgs/back-arrow.png",3,"click"]],template:function(l,e){1&l&&(o.F$t(),o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o.YNc(3,p,1,0,"img",3),o.TgZ(4,"div",4),o._uU(5),o.qZA()(),o.Hsn(6),o.qZA(),o.TgZ(7,"div",5),o._uU(8),o.qZA()()),2&l&&(o.xp6(3),o.Q6J("ngIf",e.backButton),o.xp6(2),o.Oqu(e.title),o.xp6(3),o.hij(" ",e.subtitle," "))},dependencies:[C.O5],styles:[".title-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.title-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.title-back[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.custom-subtitle[_ngcontent-%COMP%]{margin-left:35px}.title-container[_ngcontent-%COMP%]{padding-bottom:0}"]}),s})()},4546:(_,h,i)=>{i.d(h,{y:()=>g});var o=i(6895),C=i(4006),p=i(7151),v=i(8256);let g=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=v.oAB({type:s}),s.\u0275inj=v.cJS({imports:[o.ez,C.u5,p.Pc]}),s})()},8546:(_,h,i)=>{i.d(h,{w:()=>g});var o=i(6895),C=i(4006),p=i(7151),v=i(8256);let g=(()=>{class s{}return s.\u0275fac=function(l){return new(l||s)},s.\u0275mod=v.oAB({type:s}),s.\u0275inj=v.cJS({imports:[o.ez,C.u5,p.Pc]}),s})()},8924:(_,h,i)=>{i.d(h,{Eb:()=>o,Rk:()=>v,W3:()=>p,bm:()=>C});const o={ET:"UTC-4",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-5",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-6",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-7",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-8",AKT:"UTC-8",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-9",HST:"UTC-10",HAST:"UTC-9"},C={ET:"UTC-5",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-6",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-7",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-8",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-9",AKT:"UTC-9",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-10",HST:"UTC-10",HAST:"UTC-9"},p={ET:"UTC-5",EST:"UTC-5",EDT:"UTC-4",CT:"UTC-6",CST:"UTC-6",CDT:"UTC-5",MT:"UTC-7",MST:"UTC-7",MDT:"UTC-6",PT:"UTC-8",PST:"UTC-8",PDT:"UTC-7",AT:"UTC-9",AKT:"UTC-9",AKST:"UTC-9",AKDT:"UTC-8",HT:"UTC-10",HST:"UTC-10",HAST:"UTC-9"},v={2024:{summer:17100288e5,winter:173059194e4},2025:{summer:17414784e5,winter:176204154e4},2026:{summer:1772928e6,winter:179349114e4},2027:{summer:18049824e5,winter:182554554e4}}},5058:(_,h,i)=>{i.r(h),i.d(h,{CoDriverPageModule:()=>R});var o=i(6895),C=i(4006),p=i(7151),v=i(5050),g=i(5861),s=i(5670),c=i(3905),l=i(4128),e=i(8256),m=i(4465),x=i(849),M=i(4382),P=i(9386),b=i(3646),O=i(7278);const y=function(n,d,t){return{"label-error":n,"input-label-top":d,"input-label-left":t}};function k(n,d){if(1&n&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.kEZ(3,y,!t.valid,"top"===t.labelPosition,"left"===t.labelPosition)),e.xp6(1),e.AsE(" ",t.label,"",t.required?"*":""," ")}}function U(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.NdJ("click",function(){const a=e.CHM(t),u=a.$implicit,f=a.index,D=e.oxw(2);return e.KtG(D.triggerCheck(u,f))}),e.TgZ(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14),e._UZ(4,"ion-checkbox",15),e.qZA()()}if(2&n){const t=d.$implicit;e.xp6(2),e.Oqu(t.value),e.xp6(2),e.Q6J("checked",t.checked)}}function S(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",7),e.YNc(1,U,5,2,"div",8),e.qZA(),e.TgZ(2,"div",9)(3,"div",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeModal())}),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"div",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e._uU(6,"Submit"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.optionsCheck)}}const E=function(n,d){return{"custom-input-top":n,"custom-input-left":d}},A=function(n,d,t){return{"input-fill":n,"validation-error":d,"input-left":t}};let Z=(()=>{class n{constructor(t){this.utilityService=t,this.fill=!0,this.validators=[],this.noValidation=!1,this.required=!1,this.labelPosition="top",this.changeDetection=new e.vpe,this.valueChange=new e.vpe,this.validationChange=new e.vpe,this.valid=!0,this.isModalOpen=!1,this.optionsCheck=[],this.lastStatus=[],this.id=""}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.valueChange.emit(t),this.changeDetection.emit(t))}get validation(){return this._validation}set validation(t){this._validation!==t&&(this._validation=t,this.validationChange.emit(t))}ngOnInit(){if(this.id=this.utilityService.generateString(8),this.optionsCheck=this.options.map(t=>({value:t,checked:!1})),this._value&&0!==this._value.length){const t=this._value.split(", ");this.optionsCheck.forEach(r=>t.forEach(a=>r.value===a?r.checked=!0:null))}this.lastStatus=this.cloneArray(this.optionsCheck)}triggerCheck(t,r){this.optionsCheck.forEach(u=>u.checked=!1);const a=this.optionsCheck.find(u=>u.value===t.value);a.checked=!a.checked}openModal(){this.isModalOpen=!0}closeModal(){this.isModalOpen=!1,this.optionsCheck=this.cloneArray(this.lastStatus)}submit(){let t=[];this.optionsCheck.forEach(r=>!0===r.checked?t.push(r.value):null),this.value=t.join(", "),this.lastStatus=this.cloneArray(this.optionsCheck),this.isModalOpen=!1}cloneArray(t){return JSON.parse(JSON.stringify(t))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(O.t))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-select"]],inputs:{label:"label",fill:"fill",validators:"validators",noValidation:"noValidation",required:"required",labelPosition:"labelPosition",options:"options",value:"value",validation:"validation"},outputs:{changeDetection:"changeDetection",valueChange:"valueChange",validationChange:"validationChange"},decls:8,vars:14,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],[1,"input-box",3,"id","ngClass","click"],[1,"input-box-value"],["src","assets/icon/bottom-arrow-18.svg"],["id","custom-modal",3,"isOpen","trigger"],[1,"input-label",3,"ngClass"],["id","optionBox",1,"option-box"],["class","select-option",3,"click",4,"ngFor","ngForOf"],[1,"submit-buttons"],[1,"action-button","default",3,"click"],[1,"action-button","primary",3,"click"],[1,"select-option",3,"click"],[1,"select-value"],[1,"select-icon"],[3,"checked"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,k,2,7,"div",1),e.TgZ(2,"div",2),e.NdJ("click",function(){return r.openModal()}),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e._UZ(5,"img",4),e.qZA(),e.TgZ(6,"ion-modal",5),e.YNc(7,S,7,1,"ng-template"),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(7,E,"top"===r.labelPosition,"left"===r.labelPosition)),e.xp6(1),e.Q6J("ngIf",r.label),e.xp6(1),e.Q6J("id",r.id)("ngClass",e.kEZ(10,A,r.fill,!r.valid,"left"===r.labelPosition)),e.xp6(2),e.Oqu(r.value||"No option selected"),e.xp6(2),e.Q6J("isOpen",r.isModalOpen)("trigger",r.id))},dependencies:[o.mk,o.sg,o.O5,p.nz,p.ki,p.w],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:15px;width:100%;height:45px;border-radius:10px;padding:10px 15px;font-size:14px;font-weight:400;color:var(--gray-500);border:1px solid var(--gray-200);background-position:right 15px center}.input-box[_ngcontent-%COMP%]   .input-box-value[_ngcontent-%COMP%]{flex:1 calc(92% - 15px);box-sizing:border-box;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.input-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex:1 8%;width:18px;height:18px}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}ion-modal#custom-modal[_ngcontent-%COMP%]{--width: fit-content;--min-width: 80%;--max-height: 70%;--overflow: hidden;--height: fit-content;--border-radius: 10px;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4)}.option-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:10px 0;overflow:auto;max-height:500px}.option-box[_ngcontent-%COMP%]   .select-option[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;padding:12px 20px;transition:all .2s}.option-box[_ngcontent-%COMP%]   .select-option[_ngcontent-%COMP%]:active{background-color:var(--gray-100)}.option-box[_ngcontent-%COMP%]   .select-option[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%]{display:flex;align-items:center}ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--checkbox-background-checked: var(--success-500);--border-color: var(--gray-200);--checkbox-background: var(--gray-100);--border-color-checked: transparent;--checkmark-width: 2px;pointer-events:none}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:50%}.submit-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;width:100%;padding:10px 20px;border-top:1px solid var(--gray-100)}.submit-buttons[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]{flex:1;font-size:15px;display:flex;justify-content:center;align-items:center;padding:10px;border-radius:50px;cursor:pointer}.default[_ngcontent-%COMP%]{color:var(--gray-500);background-color:var(--gray-100)}.primary[_ngcontent-%COMP%]{color:var(--gray-25);background-color:var(--primary-600)}@media screen and (max-height: 799px){.option-box[_ngcontent-%COMP%]{max-height:400px}}@media screen and (max-height: 659px){.option-box[_ngcontent-%COMP%]{max-height:350px}}"]}),n})();function I(n,d){1&n&&(e.TgZ(0,"span"),e._uU(1,"Save"),e.qZA())}function w(n,d){1&n&&e._UZ(0,"ion-spinner",9)}const B=function(n){return{"disable-click":n}};function N(n,d){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"app-select",5),e.NdJ("changeDetection",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSelection())})("valueChange",function(a){e.CHM(t);const u=e.oxw();return e.KtG(u.chosenDriver=a)}),e.qZA(),e.TgZ(2,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.save())}),e.YNc(3,I,2,0,"span",7),e.YNc(4,w,1,0,"ion-spinner",8),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("label","Select Co-Driver")("value",t.chosenDriver)("options",t.coDriverNames),e.xp6(1),e.Q6J("ngClass",e.VKq(6,B,t.loading)),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(1),e.Q6J("ngIf",t.loading)}}function K(n,d){1&n&&(e.TgZ(0,"div",10),e._UZ(1,"ion-spinner",11),e.TgZ(2,"div"),e._uU(3,"LOADING"),e.qZA()())}const J=[{path:"",component:(()=>{class n{constructor(t,r,a,u,f){this.navCtrl=t,this.toastService=r,this.storage=a,this.databaseService=u,this.dashboardService=f,this.chosenDriver="None",this.coDrivers=[],this.coDriverNames=[],this.loading=!1,this.logDailies=[],this.pageLoading=!1}ngOnInit(){var t=this;return(0,g.Z)(function*(){t.pageLoading=!0;let r=t.storage.get("driverId"),a=t.storage.get("coDriver"),u=t.storage.get("coDrivers"),f=(0,c.z)(t.databaseService.getLogDailies());(0,l.D)([r,a,u,f]).subscribe(([D,Y,z,Q])=>{t.coDriver=Y,z.forEach(T=>T.driverId!==D?t.coDrivers.push(T):null),t.coDrivers.forEach(T=>t.coDriverNames.push(T.name)),t.coDriverNames.unshift("None"),t.logDailies=Q,t.chosenDriver=0===Object.keys(t.coDriver).length||"00000000-0000-0000-0000-000000000000"===t.coDriver.driverId?"None":t.coDriver.firstName+" "+t.coDriver.lastName,t.pageLoading=!1})})()}save(){var t=this;return(0,g.Z)(function*(){t.loading=!0,t.logDailies[0].form.coDriver=t.coDriver,yield t.storage.set("coDriver",t.coDriver),(yield s.Z.getStatus()).connected?yield t.dashboardService.updateLogDaily(t.logDailies[0]).toPromise().then(function(){var a=(0,g.Z)(function*(u){console.log("LogDaily (durationStatuses) is updated on server:",u),yield t.updateIndexLogDaily(t.logDailies[0],!0),t.goBack(),t.loading=!1,0!==t.chosenDriver.length&&"None"!==t.chosenDriver&&t.toastService.showToast(t.chosenDriver+" is now your co-driver","medium"),0!==t.chosenDriver.length&&"None"===t.chosenDriver&&t.toastService.showToast("You have no co-driver now","medium")});return function(u){return a.apply(this,arguments)}}()).catch(function(){var a=(0,g.Z)(function*(u){yield t.updateIndexLogDaily(t.logDailies[0],!1),console.log("Pushed in offline logDailies"),t.goBack(),t.loading=!1});return function(u){return a.apply(this,arguments)}}()):(console.log("Updated logEvents in offline array"),yield t.updateIndexLogDaily(t.logDailies[0],!1),t.goBack(),t.loading=!1)})()}updateLogDaily(t,r){var a=this;return(0,g.Z)(function*(){t.sent=r,a.logDailies.push(t),yield a.storage.set("logDailies",a.logDailies)})()}updateIndexLogDaily(t,r){var a=this;return(0,g.Z)(function*(){t.sent=r;const u=a.logDailies.findIndex(f=>f.logDailyId===t.logDailyId);-1!==u&&(a.logDailies[u]=t),yield a.storage.set("logDailies",a.logDailies)})()}showSelection(){this.coDriver="None"===this.chosenDriver?{driverId:"00000000-0000-0000-0000-000000000000",driverIdentifier:null,driverInfo:null,email:null,firstName:null,lastName:null}:this.coDrivers.find(t=>t.name===this.chosenDriver)||{driverId:"00000000-0000-0000-0000-000000000000",driverIdentifier:null,driverInfo:null,email:null,firstName:null,lastName:null}}goBack(){this.navCtrl.navigateBack("unitab/others")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.SH),e.Y36(m.k),e.Y36(x.K),e.Y36(M.k),e.Y36(P.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-co-driver"]],decls:4,vars:6,consts:[[3,"fullscreen","forceOverscroll"],[3,"title","backButton","backButtonCallback"],["class","padding-g","style","display: flex; flex-direction: column; gap: 20px",4,"ngIf"],["class","spinner-container",4,"ngIf"],[1,"padding-g",2,"display","flex","flex-direction","column","gap","20px"],[3,"label","value","options","changeDetection","valueChange"],[1,"btn","primary-btn",3,"ngClass","click"],[4,"ngIf"],["name","circular","color","light",4,"ngIf"],["name","circular","color","light"],[1,"spinner-container"],["color","dark"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-content",0)(1,"app-header",1),e.NdJ("backButtonCallback",function(){return r.goBack()}),e.qZA(),e.YNc(2,N,5,8,"div",2),e.YNc(3,K,4,0,"div",3),e.qZA()),2&t&&(e.Q6J("fullscreen",!0)("forceOverscroll",!1),e.xp6(1),e.Q6J("title","Co-Driver")("backButton",!0),e.xp6(1),e.Q6J("ngIf",!r.pageLoading),e.xp6(1),e.Q6J("ngIf",r.pageLoading))},dependencies:[o.mk,o.O5,p.W2,p.PQ,b.G,Z],styles:[".btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:10px;width:100%;height:50px;border-radius:30px}.btn[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{zoom:.8}.spinner-container[_ngcontent-%COMP%]{width:100%;height:calc(100% - 114px);display:flex;justify-content:center;align-items:center;flex-direction:column;font-size:14px;gap:5px}.spinner-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:30px;height:30px}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.Bz.forChild(J),v.Bz]}),n})();var H=i(4546),F=i(8546);let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[o.ez,C.u5,p.Pc,L,H.y,F.w]}),n})()},7278:(_,h,i)=>{i.d(h,{t:()=>v});var o=i(8924),C=i(8256),p=i(849);let v=(()=>{class g{constructor(c){this.storage=c}generateString(c){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e=" ";const m=l.length;for(let x=0;x<c;x++)e+=l.charAt(Math.floor(Math.random()*m));return e}validateForm(c){let l=!0;for(const e in c)l=l&&c[e];return l}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const l=16*Math.random()|0;return("x"==c?l:3&l|8).toString(16)})}msToTime(c){let l=Math.floor(c/1e3%60),e=Math.floor(c/6e4%60),m=Math.floor(c/36e5);return m=m<10?"0"+m:m,e=e<10?"0"+e:e,l=l<10?"0"+l:l,m+"h "+e+"min"}checkSeason(){return(new Date).getTime()>=o.Rk[(new Date).getFullYear().toString()].summer&&(new Date).getTime()<o.Rk[(new Date).getFullYear().toString()].winter?o.Eb:o.bm}}return g.\u0275fac=function(c){return new(c||g)(C.LFG(p.K))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()}}]);