"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3230],{2187:(S,D,o)=>{o.d(D,{a:()=>x});var n=o(8256),c=o(4465),h=o(6994),m=o(6895),d=o(4006);const v=function(r,f,s){return{"label-error":r,"input-label-top":f,"input-label-left":s}};function e(r,f){if(1&r&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&r){const s=n.oxw();n.Q6J("ngClass",n.kEZ(3,v,!s.valid,"top"===s.labelPosition,"left"===s.labelPosition)),n.xp6(1),n.AsE(" ",s.label,"",s.required?"*":""," ")}}const P=function(r,f){return{"custom-input-top":r,"custom-input-left":f}},_=function(r,f,s){return{"input-fill":r,"validation-error":f,"input-left":s}};let x=(()=>{class r{constructor(s,C){this.toastService=s,this.shareService=C,this.type="text",this.placeholder="",this.fill=!0,this.validators=[],this.noValidation=!1,this.disabled=!1,this.required=!1,this.labelPosition="top",this.valueChange=new n.vpe,this.validationChange=new n.vpe,this.valid=!0}get value(){return this._value}set value(s){this._value!==s&&(this._value=s,this.valueChange.emit(s))}get validation(){return this._validation}set validation(s){this._validation!==s&&(this._validation=s,this.validationChange.emit(s))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(s=>{s&&0!==s.length&&this.validateInput()})}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(s){0!==s.target.value&&(this.valid=!0),this.value=s.target.value,this.valueChange.emit(this.value)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(s=>!!s.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(s.message),!1)),this.validation=this.valid)}}return r.\u0275fac=function(s){return new(s||r)(n.Y36(c.k),n.Y36(h.t))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-input"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",validators:"validators",noValidation:"noValidation",disabled:"disabled",required:"required",labelPosition:"labelPosition",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:3,vars:14,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],[1,"input-box",3,"type","ngModel","disabled","placeholder","ngClass","input","ngModelChange"],[1,"input-label",3,"ngClass"]],template:function(s,C){1&s&&(n.TgZ(0,"div",0),n.YNc(1,e,2,7,"div",1),n.TgZ(2,"input",2),n.NdJ("input",function(M){return C.onInputChange(M)})("ngModelChange",function(M){return C.value=M}),n.qZA()()),2&s&&(n.Q6J("ngClass",n.WLB(7,P,"top"===C.labelPosition,"left"===C.labelPosition)),n.xp6(1),n.Q6J("ngIf",C.label),n.xp6(1),n.Q6J("type",C.type)("ngModel",C.value)("disabled",C.disabled)("placeholder",C.placeholder)("ngClass",n.kEZ(10,_,C.fill,!C.valid,"left"===C.labelPosition)))},dependencies:[m.mk,m.O5,d.Fj,d.JJ,d.On],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{width:100%;height:45px;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200);background-color:#fff}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}"]}),r})()},4166:(S,D,o)=>{o.d(D,{v:()=>d});var n=o(6895),c=o(4006),h=o(6114),m=o(8256);let d=(()=>{class v{}return v.\u0275fac=function(P){return new(P||v)},v.\u0275mod=m.oAB({type:v}),v.\u0275inj=m.cJS({imports:[n.ez,c.u5,h.Pc]}),v})()},4081:(S,D,o)=>{o.d(D,{R:()=>P});var n=o(8256),c=o(4465),h=o(6994),m=o(6895);const d=function(_){return{"label-error":_}};function v(_,x){if(1&_&&(n.TgZ(0,"div",3),n._uU(1),n.qZA()),2&_){const r=n.oxw();n.Q6J("ngClass",n.VKq(2,d,!r.valid)),n.xp6(1),n.Oqu(r.label)}}const e=function(_,x){return{"input-fill":_,"validation-error":x}};let P=(()=>{class _{constructor(r,f){this.toastService=r,this.shareService=f,this.type="text",this.placeholder="",this.fill=!0,this.validators=[],this.noValidation=!1,this.valueChange=new n.vpe,this.validationChange=new n.vpe,this.valid=!0}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this.valueChange.emit(r))}get validation(){return this._validation}set validation(r){this._validation!==r&&(this._validation=r,this.validationChange.emit(r))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(r=>{r&&0!==r.length&&this.validateInput()})}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(r){0!==r.target.value&&(this.valid=!0),this.value=r.target.value,this.valueChange.emit(this.value)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(r=>!!r.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(r.message),!1)),console.log(this.valid),this.validation=this.valid)}}return _.\u0275fac=function(r){return new(r||_)(n.Y36(c.k),n.Y36(h.t))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-textarea"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",validators:"validators",noValidation:"noValidation",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:3,vars:6,consts:[[1,"custom-input"],["class","input-label",3,"ngClass",4,"ngIf"],[1,"input-box",3,"placeholder","ngClass","input"],[1,"input-label",3,"ngClass"]],template:function(r,f){1&r&&(n.TgZ(0,"div",0),n.YNc(1,v,2,4,"div",1),n.TgZ(2,"textarea",2),n.NdJ("input",function(C){return f.onInputChange(C)}),n.qZA()()),2&r&&(n.xp6(1),n.Q6J("ngIf",f.label),n.xp6(1),n.Q6J("placeholder",f.placeholder)("ngClass",n.WLB(3,e,f.fill,!f.valid)))},dependencies:[m.mk,m.O5],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;display:flex;flex-direction:column;gap:5px}.input-label[_ngcontent-%COMP%]{font-size:14px;font-weight:400;color:var(--gray-700)}.input-box[_ngcontent-%COMP%]{width:100%;height:100px;resize:none;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200)}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}"]}),_})()},4877:(S,D,o)=>{o.d(D,{r:()=>d});var n=o(6895),c=o(4006),h=o(6114),m=o(8256);let d=(()=>{class v{}return v.\u0275fac=function(P){return new(P||v)},v.\u0275mod=m.oAB({type:v}),v.\u0275inj=m.cJS({imports:[n.ez,c.u5,h.Pc]}),v})()},3230:(S,D,o)=>{o.r(D),o.d(D,{InsertDvirPageModule:()=>Q});var n=o(6895),c=o(4006),h=o(6114),m=o(4529),d=o(5861),v=o(4171),e=o(8256),P=o(4382),_=o(849),x=o(9386),r=o(7219),f=o(3646);function s(a,p){if(1&a){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("click",function(){const u=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.select(u))}),e.TgZ(1,"div",4)(2,"div",5),e._UZ(3,"img",6),e.qZA(),e.TgZ(4,"div",7),e._uU(5),e.qZA()(),e.TgZ(6,"div",8),e._UZ(7,"ion-checkbox",9),e.qZA()()}if(2&a){const t=p.$implicit;e.xp6(3),e.Q6J("src","success"===t.icon?"assets/icon/shield-tick.svg":"assets/icon/shield-cross.svg",e.LSH),e.xp6(1),e.Q6J("ngClass",t.icon),e.xp6(1),e.Oqu(t.label),e.xp6(2),e.Q6J("checked",t.checked)}}let C=(()=>{class a{constructor(){this.data=[{icon:"success",label:"Vehicle Condition Satisfactory",value:"VCS",checked:!1},{icon:"error",label:"Has Defects",value:"D",checked:!1},{icon:"success",label:"Defects Corrected",value:"DC",checked:!1},{icon:"error",label:"Defects Need Not Be Corrected",value:"DNNBC",checked:!1}],this.dataHalf=[{icon:"success",label:"Vehicle Condition Satisfactory",value:"VCS",checked:!1},{icon:"error",label:"Has Defects",value:"D",checked:!1}],this.half=!1,this.selectedValue=new e.vpe}ngOnInit(){}select(t){let i=this.data.findIndex(u=>u.value===t.value),l=[];l=this.half?this.dataHalf:this.data,l.forEach(u=>u.checked=!1),l[i].checked=!0,this.selectedValue.emit(l[i].value)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-status-radio-button"]],inputs:{half:"half"},outputs:{selectedValue:"selectedValue"},decls:4,vars:1,consts:[[1,"status-title"],[1,"list-container"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[1,"item-data"],[1,"status-icon"],[3,"src"],[1,"status-label",3,"ngClass"],[1,"item-checkbox"],[3,"checked"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._uU(1,"Status"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,s,8,4,"div",2),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",i.half?i.dataHalf:i.data))},dependencies:[n.mk,n.sg,h.nz,h.w],styles:[".list-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:10px}.list-item[_ngcontent-%COMP%]{width:100%;border:none;border-radius:10px;background-color:var(--gray-100);padding:15px;display:flex;align-items:center;justify-content:space-between}.item-data[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.status-icon[_ngcontent-%COMP%]{width:24px;height:24px}.status-label[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--gray-500)}.item-checkbox[_ngcontent-%COMP%]{display:flex;align-items:center}ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--checkbox-background-checked: var(--success-500);--border-color: transparent;--border-color-checked: transparent;--checkmark-width: 2px}ion-checkbox[_ngcontent-%COMP%]::part(container){border-radius:50%}.success[_ngcontent-%COMP%]{color:var(--success-500)}.error[_ngcontent-%COMP%]{color:var(--error-500)}.status-title[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:var(--gray-500);margin-bottom:5px}"]}),a})();var I=o(2187);const M=function(a,p,t){return{"label-error":a,"input-label-top":p,"input-label-left":t}};function Z(a,p){if(1&a&&(e.TgZ(0,"div",4),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.Q6J("ngClass",e.kEZ(3,M,!t.valid,"top"===t.labelPosition,"left"===t.labelPosition)),e.xp6(1),e.AsE(" ",t.label,"",t.required?"*":""," ")}}function A(a,p){if(1&a&&(e.TgZ(0,"option",5),e._uU(1),e.qZA()),2&a){const t=p.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}const B=function(a,p){return{"custom-input-top":a,"custom-input-left":p}},k=function(a,p,t){return{"input-fill":a,"validation-error":p,"input-left":t}};let V=(()=>{class a{constructor(){this.fill=!0,this.validators=[],this.noValidation=!1,this.required=!1,this.labelPosition="top",this.valueChange=new e.vpe,this.validationChange=new e.vpe,this.valid=!0}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.valueChange.emit(t))}get validation(){return this._validation}set validation(t){this._validation!==t&&(this._validation=t,this.validationChange.emit(t))}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-select"]],inputs:{label:"label",fill:"fill",validators:"validators",noValidation:"noValidation",required:"required",labelPosition:"labelPosition",options:"options",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:4,vars:12,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],["type","text",1,"input-box",3,"ngModel","ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"input-label",3,"ngClass"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Z,2,7,"div",1),e.TgZ(2,"select",2),e.NdJ("ngModelChange",function(u){return i.value=u}),e.YNc(3,A,2,2,"option",3),e.qZA()()),2&t&&(e.Q6J("ngClass",e.WLB(5,B,"top"===i.labelPosition,"left"===i.labelPosition)),e.xp6(1),e.Q6J("ngIf",i.label),e.xp6(1),e.Q6J("ngModel",i.value)("ngClass",e.kEZ(8,k,i.fill,!i.valid,"left"===i.labelPosition)),e.xp6(1),e.Q6J("ngForOf",i.options))},dependencies:[n.mk,n.sg,n.O5,c.YN,c.Kr,c.EJ,c.JJ,c.On],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{width:100%;height:45px;border-radius:10px;padding:10px 15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200);background-color:#fff;-moz-appearance:none;appearance:none;-webkit-appearance:none;background:url(bottom-arrow-18.e6aa79dfe7264905.svg) no-repeat;background-position:right 15px center}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}"]}),a})();var J=o(4081);const R=[{path:"",component:(()=>{class a{constructor(t,i,l,u,b,g){this.databaseService=t,this.formBuilder=i,this.storage=l,this.dashboardService=u,this.internetService=b,this.navCtrl=g,this.defectsVehicle=["Air Compressor","Battery","Body","Brake Accessories","Coupling Devices","Drive Line","Exhaust","Fluid Levels","Front Axle","Headlights","Horn","Muffler","Parking Breaks","Reflectors","Service Breaks","Starter","Suspension System","Tire Chains","Transmission","Turn Indicators","Windows","Wipers & Washers","Air Lines","Belts & Hoses","Clutch","Defroster","Engine","Fifth Wheel","Frame & Assembly","Fuel Tanks","Heater","Mirrors","Oil Level","Radiator Level","Safety Equipment","Service Door","Steering","Tail Lights","Tires","Trip Recorder","Wheels & Rims","Windshield"],this.defectsTrailers=["Brake Connections","Coupling Devices","Doors","Landing Gear","Other","Roof","Suspension System","Wheels & Rims","Breaks","Coupling Pin","Hitch","Lights","Reflectors","Straps","Tarpaulin"],this.DvirStatuses1=[{StatusCode:"VCS",StatusName:"Vehicle Condition Satisfactory"},{StatusCode:"D",StatusName:"Has Defects"},{StatusCode:"DC",StatusName:"Defects Corrected"},{StatusCode:"DNNBC",StatusName:"Defects Need Not Be Corrected"}],this.DvirStatuses=[{StatusCode:"VCS",StatusName:"Vehicle Condition Satisfactory"},{StatusCode:"D",StatusName:"Has Defects"}],this.signaturePadOptions={minWidth:2,maxWidth:3,backgroundColor:"#FFFFFF",penColor:"black"},this.DvirId="",this.dvirs=[],this.bReady=!1,this.vehicleUnit="",this.vehicleId="",this.driverId="",this.statusIcon="checkmark-circle-outline",this.networkStatus=!1,this.form=this.formBuilder.group({Date:[(new Date).toISOString().slice(0,19)],Time:[(new Date).toISOString().slice(0,19)],LocationDescription:["3mi from Chisinau, Chisinau"],VehicleUnit:[""],Trailers:[""],Odometer:["0"],DefectsVehicle:[""],DefectsTrailers:[""],Remarks:[""],StatusName:["Vehicle Condition Satisfactory",c.kI.required],StatusCode:["VCS",c.kI.required],Comments:[""],Signature:["",c.kI.required]})}ngOnInit(){var t=this;return(0,d.Z)(function*(){var i,l,u;t.initSignaturePad(),t.databaseSubscription=t.databaseService.databaseReadySubject.subscribe(b=>{b&&(t.bReady=b,t.databaseService.getCompany().subscribe(g=>{t.company=g}),t.databaseService.getDvirs().subscribe(g=>{t.dvirs=g}))}),t.vehicleUnit=yield t.storage.get("vehicleUnit"),t.vehicleId=yield t.storage.get("vehicleId"),t.driverId=yield t.storage.get("driverId"),null===(i=t.form.get("DefectsVehicle"))||void 0===i||i.valueChanges.subscribe(b=>{t.updateDvirStatusCode(b,t.form.value.DefectsTrailers||[])}),null===(l=t.form.get("DefectsTrailers"))||void 0===l||l.valueChanges.subscribe(b=>{t.updateDvirStatusCode(t.form.value.DefectsVehicle||[],b)}),null===(u=t.form.get("DefectsTrailers"))||void 0===u||u.valueChanges.subscribe(b=>{const g=t.form.get("Trailers");b&&b.length>0?null==g||g.setValidators(c.kI.required):null==g||g.clearValidators(),null==g||g.updateValueAndValidity()}),t.networkSub=t.internetService.internetStatus$.subscribe(b=>{t.networkStatus=b,console.log("Intenet Status"+b)})})()}switchStatus(t){console.log(t),this.form.value.StatusCode=t}updateDvirStatusCode(t,i){this.form.patchValue({StatusCode:t.length>0||i.length>0?"D":"VCS"})}isStatusDisabled(t){return(this.form.value.DefectsVehicle||[]).length>0||(this.form.value.DefectsTrailers||[]).length>0?"VCS"===t:"D"===t}getCurrentDate(){return(new Date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getCurrentTime(){return(new Date).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}initSignaturePad(){const t=document.querySelector("canvas");t&&(this.signaturePad=new v.Z(t,this.signaturePadOptions),t.addEventListener("touchend",()=>{this.updateSignatureField()}))}updateSignatureField(){if(this.signaturePad&&!this.signaturePad.isEmpty()){const t=this.signaturePad.toDataURL().slice(22);this.form.patchValue({Signature:t})}else this.form.patchValue({Signature:""})}clearSignature(){this.signaturePad&&(this.signaturePad.clear(),this.form.patchValue({Signature:""}))}onSubmit(){var t=this;return(0,d.Z)(function*(){if(t.form.valid){const i=t.form.value.StatusCode,l=t.DvirStatuses.find(y=>y.StatusCode===i),u=(null==l?void 0:l.StatusName)||"",b=Array.isArray(t.form.value.DefectsVehicle)?t.form.value.DefectsVehicle.join(", "):t.form.value.DefectsVehicle||"",g=Array.isArray(t.form.value.DefectsTrailers)?t.form.value.DefectsTrailers.join(", "):t.form.value.DefectsTrailers||"",T={dvirId:t.uuidv4(),driver:{driverId:t.driverId},vehicle:{vehicleUnit:t.vehicleUnit,vehicleId:t.vehicleId},odometer:t.form.value.Odometer,trailers:t.form.value.Trailers,defectsVehicle:b,defectsTrailers:g,remarks:t.form.value.Remarks||"",status:{code:i,name:u},location:{description:t.form.value.LocationDescription,latitude:0,longitude:0},createDate:new Date((0,n.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en-US")).getTime(),createTimeZone:"",repairDate:0,repairTimeZone:"",signatureId:t.uuidv4(),signatureBase64:t.form.value.Signature};if(!0===t.networkStatus)console.log("here uploading"),t.dashboardService.updateDVIR(T).subscribe(y=>{console.log("DVIR is on server:",y)},function(){var y=(0,d.Z)(function*(O){console.log("Internet Status"+t.networkStatus);let z={url:"api/EldDashboard/uploadDVIR",body:T},E=yield t.storage.get("offlineArray");E.push(z),yield t.storage.set("offlineArray",E),console.log("Pushed in offlineArray")});return function(O){return y.apply(this,arguments)}}());else{let y={url:"api/EldDashboard/uploadDVIR",body:T},O=yield t.storage.get("offlineArray");O.push(y),yield t.storage.set("offlineArray",O),console.log("Pushed in offlineArray")}t.dvirs.unshift(T),yield t.storage.set("dvirs",t.dvirs),t.navCtrl.navigateBack("/unitab/dvir")}})()}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const i=16*Math.random()|0;return("x"==t?i:3&i|8).toString(16)})}ionViewWillLeave(){this.databaseSubscription&&this.databaseSubscription.unsubscribe(),this.networkSub.unsubscribe()}goBack(){this.navCtrl.navigateBack("/unitab/dvir")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.k),e.Y36(c.qu),e.Y36(_.K),e.Y36(x.s),e.Y36(r.W),e.Y36(h.SH))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-insert-dvir"]],decls:36,vars:55,consts:[[3,"title","backButton","backButtonCallback"],[1,"padding-g",2,"padding-top","10px",3,"formGroup"],[1,"edit-form"],[1,"subtitle-lg"],[1,"edit-dvir-block"],[3,"label","fill","type","disabled","value","noValidation"],[1,"two-inputs"],[3,"label","fill","type","disabled","value","noValidation","valueChange"],[3,"label","options"],[3,"label","fill","type","value","noValidation","valueChange"],[1,"input-block-2"],[3,"half","selectedValue"],[1,"signature-container"],["height","200",2,"touch-action","none","user-select","none"],["sPad",""],["color","success","expand","block",1,"btn","primary-btn",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content")(1,"app-header",0),e.NdJ("backButtonCallback",function(){return i.goBack()}),e.qZA(),e.TgZ(2,"form",1)(3,"div",2)(4,"p",3),e._uU(5,"General Info"),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"app-input",5),e.TgZ(8,"div",6)(9,"app-input",7),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA(),e.TgZ(10,"app-input",7),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA()(),e.TgZ(11,"app-input",7),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA()(),e.TgZ(12,"p",3),e._uU(13,"Vehicle Info"),e.qZA(),e.TgZ(14,"div",4)(15,"app-input",7),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA(),e.TgZ(16,"app-input",7),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA(),e._UZ(17,"app-select",8),e.qZA(),e.TgZ(18,"p",3),e._uU(19,"Trailer Info"),e.qZA(),e.TgZ(20,"div",4)(21,"app-input",9),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA(),e._UZ(22,"app-select",8),e.qZA(),e.TgZ(23,"p",3),e._uU(24,"Status"),e.qZA(),e.TgZ(25,"div",4)(26,"div",10)(27,"app-status-radio-button",11),e.NdJ("selectedValue",function(u){return i.switchStatus(u)}),e.qZA()(),e.TgZ(28,"app-textarea",9),e.NdJ("valueChange",function(u){return i.Date=u}),e.qZA()(),e.TgZ(29,"p",3),e._uU(30,"Signature"),e.qZA(),e.TgZ(31,"div",12),e._UZ(32,"canvas",13,14),e.qZA(),e.TgZ(34,"button",15),e.NdJ("click",function(){return i.onSubmit()}),e._uU(35,"Save"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("title","Insert Dvir")("backButton",!0),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("label","Company")("fill",!0)("type","text")("disabled",!0)("value",null==i.company?null:i.company.name)("noValidation",!0),e.xp6(2),e.Q6J("label","Date")("fill",!0)("type","text")("disabled",!0)("value",i.Date)("noValidation",!0),e.xp6(1),e.Q6J("label","Time")("fill",!0)("type","text")("disabled",!0)("value",i.Date)("noValidation",!0),e.xp6(1),e.Q6J("label","Location")("fill",!0)("type","text")("disabled",!0)("value",i.Date)("noValidation",!0),e.xp6(4),e.Q6J("label","Vehicle Name")("fill",!0)("type","text")("disabled",!0)("value",i.Date)("noValidation",!0),e.xp6(1),e.Q6J("label","Odometer")("fill",!0)("type","text")("disabled",!0)("value",i.Date)("noValidation",!0),e.xp6(1),e.Q6J("label","Vehicle Defects (Optional)")("options",i.defectsVehicle),e.xp6(4),e.Q6J("label","Trailer Name")("fill",!0)("type","text")("value",i.Date)("noValidation",!0),e.xp6(1),e.Q6J("label","Trailer Defects (Optional)")("options",i.defectsTrailers),e.xp6(5),e.Q6J("half",!0),e.xp6(1),e.Q6J("label","Comments")("fill",!0)("type","text")("value",i.Date)("noValidation",!0),e.xp6(6),e.Q6J("disabled",!i.form.valid))},dependencies:[c._Y,c.JL,c.sg,h.W2,f.G,C,I.a,V,J.R],styles:[".input-block-2[_ngcontent-%COMP%]   textarea.input-2[_ngcontent-%COMP%]{height:89px;resize:none}.text-success[_ngcontent-%COMP%]{flex-grow:1;color:var(--success-500);font-size:16px;font-weight:500}.text-error[_ngcontent-%COMP%]{flex-grow:1;color:var(--error-500);font-size:16px;font-weight:600}.btn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:30px}.two-inputs[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:10px}.signature-container[_ngcontent-%COMP%]{width:100%;background-color:var(--gray-100);border-radius:10px;padding:15px;display:flex;justify-content:center;align-items:center}.signature-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%;border-radius:10px}"]}),a})()}];let U=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.Bz.forChild(R),m.Bz]}),a})();var L=o(4546);let w=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[n.ez,c.u5,h.Pc]}),a})();var N=o(4166);let F=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[n.ez,c.u5,h.Pc]}),a})();var W=o(4877);let Q=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[n.ez,c.u5,c.UX,h.Pc,U,L.y,w,N.v,F,W.r]}),a})()},6994:(S,D,o)=>{o.d(D,{t:()=>m});var n=o(7579),c=o(1135),h=o(8256);let m=(()=>{class d{constructor(){this.editDataDetails=[],this.subject=new n.x,this.messageSource=new c.X(this.editDataDetails),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}destroyMessage(){this.messageSource.next("")}}return d.\u0275fac=function(e){return new(e||d)},d.\u0275prov=h.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},4465:(S,D,o)=>{o.d(D,{k:()=>m});var n=o(5861),c=o(8256),h=o(6114);let m=(()=>{class d{constructor(e){this.toastController=e}showToast(e,P="danger",_=1e3){var x=this;return(0,n.Z)(function*(){x.currentToast&&(yield x.dismissToast());const r=yield x.toastController.create({message:e,duration:_,color:P});x.currentToast=r,r.onDidDismiss().then(()=>{x.currentToast=null}),r.present()})()}dismissToast(){var e=this;return(0,n.Z)(function*(){e.currentToast&&(yield e.toastController.dismiss(),e.currentToast=null)})()}}return d.\u0275fac=function(e){return new(e||d)(c.LFG(h.yF))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);