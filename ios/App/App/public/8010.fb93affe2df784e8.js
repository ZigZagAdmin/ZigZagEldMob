"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8010],{2187:(M,C,s)=>{s.d(C,{a:()=>I});var l=s(8256),x=s(4465),h=s(6994),y=s(6895),t=s(4006);const v=function(p,_,r,u){return{"label-error":p,"input-label-top":_,"input-label-left":r,"no-label":u}};function c(p,_){if(1&p&&(l.TgZ(0,"div",3),l._uU(1),l.qZA()),2&p){const r=l.oxw();l.Q6J("ngClass",l.l5B(3,v,!r.valid,"top"===r.labelPosition,"left"===r.labelPosition,"none"===r.label)),l.xp6(1),l.AsE(" ",r.label,"",r.required?"*":""," ")}}const D=function(p,_){return{"custom-input-top":p,"custom-input-left":_}},Z=function(p,_,r){return{"input-fill":p,"validation-error":_,"input-left":r}};let I=(()=>{class p{constructor(r,u){this.toastService=r,this.shareService=u,this.type="text",this.placeholder="",this.fill=!0,this.validators=[],this.noValidation=!1,this.disabled=!1,this.required=!1,this.labelPosition="top",this.valueChange=new l.vpe,this.validationChange=new l.vpe,this.valid=!0}get value(){return this._value}set value(r){this._value!==r&&(this._value=r,this.valueChange.emit(r))}get validation(){return this._validation}set validation(r){this._validation!==r&&(this._validation=r,this.validationChange.emit(r))}ngOnInit(){this.validateSubscription=this.shareService.currentMessage.subscribe(r=>{"reset"===r?this.valid=!0:r&&0!==r.length&&this.validateInput()})}ngOnDestroy(){this.validateSubscription.unsubscribe()}onInputChange(r){0!==r.target.value&&(this.valid=!0),this.value=r.target.value,this.valueChange.emit(this.value)}validateInput(){this.noValidation||(0===this.value.length?(this.valid=!1,this.toastService.showToast("Field required")):this.value.length>0&&(this.valid=!0),this.value.length>=0&&0!==this.validators.length&&this.validators.every(r=>!!r.regex.test(this.value)||(this.valid=!0,this.toastService.showToast(r.message),!1)),this.validation=this.valid)}}return p.\u0275fac=function(r){return new(r||p)(l.Y36(x.k),l.Y36(h.t))},p.\u0275cmp=l.Xpm({type:p,selectors:[["app-input"]],inputs:{label:"label",type:"type",placeholder:"placeholder",fill:"fill",validators:"validators",noValidation:"noValidation",disabled:"disabled",required:"required",labelPosition:"labelPosition",value:"value",validation:"validation"},outputs:{valueChange:"valueChange",validationChange:"validationChange"},decls:3,vars:14,consts:[[1,"custom-input",3,"ngClass"],["class","input-label",3,"ngClass",4,"ngIf"],["autocomplete","one-time-code",1,"input-box",3,"type","ngModel","disabled","placeholder","ngClass","input","ngModelChange"],[1,"input-label",3,"ngClass"]],template:function(r,u){1&r&&(l.TgZ(0,"div",0),l.YNc(1,c,2,8,"div",1),l.TgZ(2,"input",2),l.NdJ("input",function(b){return u.onInputChange(b)})("ngModelChange",function(b){return u.value=b}),l.qZA()()),2&r&&(l.Q6J("ngClass",l.WLB(7,D,"top"===u.labelPosition,"left"===u.labelPosition)),l.xp6(1),l.Q6J("ngIf",u.label),l.xp6(1),l.Q6J("type",u.type)("ngModel",u.value)("disabled",u.disabled)("placeholder",u.placeholder)("ngClass",l.kEZ(10,Z,u.fill,!u.valid,"left"===u.labelPosition)))},dependencies:[y.mk,y.O5,t.Fj,t.JJ,t.On],styles:[".custom-input[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content}.custom-input-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.custom-input-left[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;gap:24px}.input-label[_ngcontent-%COMP%]{color:var(--gray-500)}.input-label-top[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.input-label-left[_ngcontent-%COMP%]{flex:1;font-size:15px;font-weight:600}.input-box[_ngcontent-%COMP%]{width:100%;height:45px;border-radius:10px;padding:15px;font-size:14px;font-weight:400;color:var(--gray-500)!important;border:1px solid var(--gray-200);background-color:#fff}.input-box[_ngcontent-%COMP%]:focus{color:var(--gray-500)!important;outline:none;border:1px solid var(--gray-300)}.input-fill[_ngcontent-%COMP%]{border:none!important;background-color:var(--gray-100)}.input-left[_ngcontent-%COMP%]{flex:1}.validation-error[_ngcontent-%COMP%]{border:1px solid var(--error-600)!important}.validation-error[_ngcontent-%COMP%]:focus{border:1px solid var(--error-600)!important}.label-error[_ngcontent-%COMP%]{color:var(--error-600)}.no-label[_ngcontent-%COMP%]{color:transparent!important}"]}),p})()},4166:(M,C,s)=>{s.d(C,{v:()=>t});var l=s(6895),x=s(4006),h=s(7151),y=s(8256);let t=(()=>{class v{}return v.\u0275fac=function(D){return new(D||v)},v.\u0275mod=y.oAB({type:v}),v.\u0275inj=y.cJS({imports:[l.ez,x.u5,h.Pc]}),v})()},8924:(M,C,s)=>{s.d(C,{W3:()=>x});const x={ET:"UTC-4",CT:"UTC-5",MT:"UTC-6",PT:"UTC-7",AT:"UTC-8",HT:"UTC-10"}},8010:(M,C,s)=>{s.r(C),s.d(C,{LogItemPageModule:()=>et});var l=s(6895),x=s(4006),h=s(7151),y=s(5050),t=s(8256);let v=(()=>{class a{constructor(){}ngOnInit(){}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-log-item"]],decls:0,vars:0,template:function(e,n){}}),a})();var c=s(5861),D=s(4128),Z=s(4171),I=s(8924),p=s(4382),_=s(849),r=s(7219),u=s(9386),P=s(4465),b=s(7278),O=s(6994),S=s(4761),L=s(3646),E=s(2145),A=s(2187);const U=["sPad"];function k(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"div",73),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.nevigateToInspection())}),t._UZ(1,"img",74),t.qZA()}}function w(a,g){if(1&a&&(t.O4$(),t.TgZ(0,"g",75)(1,"g",76),t._UZ(2,"line",11),t.TgZ(3,"g",77),t._UZ(4,"line",78)(5,"line",79)(6,"line",80),t.qZA(),t.TgZ(7,"g",81),t._UZ(8,"line",78)(9,"line",79)(10,"line",80),t.qZA(),t.TgZ(11,"g",82),t._UZ(12,"line",83)(13,"line",84)(14,"line",85),t.qZA(),t.TgZ(15,"g",86),t._UZ(16,"line",83)(17,"line",84)(18,"line",85),t.qZA()()()),2&a){const e=g.$implicit;t.xp6(1),t.Udp("transform","translateX("+60*e+"px)")}}function F(a,g){if(1&a&&(t.O4$(),t._UZ(0,"line",89)),2&a){const e=t.oxw().$implicit;t.uIk("x1",e.x1)("x2",e.x1)("y1",e.y1)("y2",e.yV)}}function B(a,g){if(1&a&&(t.O4$(),t.TgZ(0,"g",87),t._UZ(1,"line"),t.YNc(2,F,1,4,"line",88),t.qZA()),2&a){const e=g.$implicit;t.xp6(1),t.Tol(e.class),t.uIk("x1",e.x1)("x2",e.x2)("y1",e.y1)("y2",e.y2),t.xp6(1),t.Q6J("ngIf",e.yV>0)}}function J(a,g){1&a&&(t.TgZ(0,"span"),t._uU(1,"Save"),t.qZA())}function q(a,g){1&a&&t._UZ(0,"ion-spinner",90)}const N=function(a){return{"btn-disabled ":a}};function Y(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"button",91),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.certifyLog())}),t._uU(1,"Certify"),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("ngClass",t.VKq(2,N,e.currentDay===e.today))("disabled",e.currentDay===e.today)}}function Q(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"button",92),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openModal())}),t._uU(1,"Certified"),t.qZA()}}function R(a,g){1&a&&t._UZ(0,"ion-spinner",97)}const V=function(a){return{"no-image":a}};function W(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"ion-content",0)(1,"app-header",1),t.NdJ("backButtonCallback",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancel())}),t.qZA(),t.TgZ(2,"div",93)(3,"div",94)(4,"img",95),t.NdJ("load",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.imageLoaded())}),t.qZA(),t.YNc(5,R,1,0,"ion-spinner",96),t.qZA()()()}if(2&a){const e=t.oxw();t.Q6J("forceOverscroll",!1),t.xp6(1),t.Q6J("title","Signature")("backButton",!0),t.xp6(3),t.Q6J("ngClass",t.VKq(6,V,e.imageLoading))("src",e.logDaily.form.signatureLink,t.LSH),t.xp6(1),t.Q6J("ngIf",e.imageLoading)}}const G=function(a){return{"background-color":a}};function H(a,g){if(1&a){const e=t.EpF();t.TgZ(0,"div",98)(1,"div",99),t._UZ(2,"div",100),t.TgZ(3,"p",58),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"p",101),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"div",99),t._UZ(10,"img",102),t.TgZ(11,"p",103),t._uU(12),t.qZA(),t.TgZ(13,"img",104),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editLog())}),t.qZA()()()}if(2&a){const e=g.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngStyle",t.VKq(11,G,n.getStatusColor(e.type.code))),t.xp6(2),t.AsE("",t.xi3(5,5,e.eventTime.timeStamp,"h:mm a")," - ",e.type.name,""),t.xp6(3),t.Oqu(t.xi3(8,8,e.eventTime.timeStamp,"mediumDate")),t.xp6(5),t.Oqu(e.location.description)}}const K=function(a,g){return{"status-circle-error":a,"status-circle-success":g}},j=[{path:"",component:v},{path:":id",component:(()=>{class a{constructor(e,n,i,o,m,d,f,T,nt,it,at){this.activatedRoute=e,this.router=n,this.databaseService=i,this.storage=o,this.internetService=m,this.dashboardService=d,this.toastService=f,this.navCtrl=T,this.utilityService=nt,this.shareService=it,this.manageService=at,this.bReady=!1,this.timeZone="",this.vehicleUnit="",this.logDailies=[],this.logEvents=[],this.currentDay="",this.networkStatus=!1,this.graphicsHour=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],this.statusesOnDay=[],this.eventGraphicLine=[],this.signature="",this.driverId="",this.vehicleId="",this.today=(0,l.p6)(new Date,"yyyy/MM/dd","en_US"),this.isModalOpen=!1,this.imageLoading=!1,this.saveFormLoading=!1,this.localForm={formManner:!1,form:{trailers:"",shippingDoc:"",toAddress:"",fromAddress:"",signatureId:""}},this.signaturePadOptions={minWidth:2,maxWidth:3,backgroundColor:"#FFFFFF",penColor:"black"},this.validation={shippingDoc:!1,toAddress:!1,fromAddress:!1}}ngOnInit(){}ionViewWillEnter(){var e=this;return(0,c.Z)(function*(){e.vehicleId=yield e.storage.get("vehicleId"),e.driverId=yield e.storage.get("driverId"),e.vehicleUnit=yield e.storage.get("vehicleUnit"),e.timeZone=yield e.storage.get("timeZone"),e.activatedRoute.params.subscribe(n=>{e.LogDailiesId=n.id}),e.databaseService.databaseReadySubject.subscribe(n=>{if(n){e.bReady=n;const i=e.databaseService.getLogDailies(),o=e.databaseService.getLogEvents();(0,D.D)([i,o]).subscribe(([m,d])=>{e.logDailies=m,e.logEvents=d,(0===e.logDailies.length||e.logDailies.length<14)&&e.storage.get("logDailies").then(f=>e.logDailies=f),e.logDaily=e.logDailies.find(f=>f.logDailyId===e.LogDailiesId),e.logDaily&&(e.currentDay=e.logDaily.logDate,e.fillFormWithLogDailyData()),e.drawGraph(),e.fillFormWithLogDailyData()})}}),e.networkSub=e.internetService.internetStatus$.subscribe(n=>{e.networkStatus=n}),e.logDailiesSub=e.manageService.getLogDailies(e.driverId,(0,l.p6)(new Date,"yyyy-MM-dd","en_US"),14).subscribe(n=>{e.logDailies=n,e.logDaily=e.logDailies.find(i=>i.logDailyId===e.LogDailiesId)})})()}ngOnDestroy(){this.shareService.destroyMessage(),this.logDailiesSub.unsubscribe()}getStatusColor(e){return e?{OFF:"var(--gray-300)",SB:"var(--gray-500)",ON:"var(--warning-400)",D:"var(--success-500)",PC:"var(--gray-300)",YM:"var(--warning-400)"}[e]:"var(--success-500)"}getDateSub(e){let n=(0,l.p6)(e,"EEEE, MMM d","en_US");return n===(0,l.p6)(new Date,"EEEE, MMM d","en_US")?n+" (Today)":n}fillFormWithLogDailyData(){this.logDaily&&(this.localForm={form:{trailers:this.logDaily.form.trailers||"",shippingDoc:this.logDaily.form.shippingDoc||"",fromAddress:this.logDaily.form.fromAddress||"",toAddress:this.logDaily.form.toAddress||"",signatureId:""}})}drawGraph(){var e;const n=["OFF","SB","D","ON","PC","YM"];this.eventGraphicLine=[],this.statusesOnDay=[];let i=null,o=null,m="";this.xBgn=0,this.xEnd=0,this.xBgnV=0,this.yBgnV=0,this.currentDay=null===(e=this.logDaily)||void 0===e?void 0:e.logDate,this.logEvents.forEach(d=>{if(n.includes(d.type.code)&&(m=d.eventTime.timeStampEnd?new Date(d.eventTime.timeStampEnd).toISOString():(new Date).toISOString(),"0001-01-01T00:00:00"==m&&(m=(0,l.p6)((new Date).toLocaleString("en-US",{timeZone:this.timeZone}),"yyyy-MM-ddTHH:mm:ss","en_US")),(0,l.p6)(new Date(d.eventTime.timeStamp),"yyyy-MM-dd","en_US")<=(0,l.p6)(new Date(this.currentDay),"yyyy-MM-dd","en_US")&&(0,l.p6)(new Date(this.currentDay),"yyyy-MM-dd","en_US")<=(0,l.p6)(new Date(m),"yyyy-MM-dd","en_US"))){switch(i=new Date(d.eventTime.timeStamp),this.xBgn=i.toLocaleDateString()===new Date(this.currentDay).toLocaleDateString()?60*i.getHours()+i.getMinutes():0,o=new Date(m),this.xEnd=o.toLocaleDateString()===new Date(this.currentDay).toLocaleDateString()?60*o.getHours()+o.getMinutes():1440,d.type.code){case"OFF":case"PC":this.yBgn=25,this.yEnd=25;break;case"SB":this.yBgn=75,this.yEnd=75;break;case"D":this.yBgn=125,this.yEnd=125;break;case"ON":case"YM":this.yBgn=175,this.yEnd=175}switch(d.type.code){case"OFF":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusOFF",name:"",historyId:d.logEventId,status:0,statusClick:0});break;case"SB":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusSB",name:"",historyId:d.logEventId,status:0,statusClick:0});break;case"D":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusD",name:"",historyId:d.logEventId,status:0,statusClick:0});break;case"ON":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusON",name:"",historyId:d.logEventId,status:0,statusClick:0});break;case"PC":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusPC",name:"",historyId:d.logEventId,status:0,statusClick:0});break;case"YM":this.eventGraphicLine.push({x1:this.xBgn,y1:this.yBgn,x2:this.xEnd,y2:this.yEnd,yV:this.yBgnV,class:"eventStatusYM",name:"",historyId:d.logEventId,status:0,statusClick:0})}this.xBgnV=this.xEnd,this.yBgnV=this.yEnd,this.statusesOnDay.push(d)}})}navigateToInsertDutyStatus(){}navigateToEditDutyStatus(){}goToNextLog(){const n=this.logDailies.findIndex(i=>{var o;return i.logDailyId===(null===(o=this.logDaily)||void 0===o?void 0:o.logDailyId)})+1;n<this.logDailies.length&&(this.logDaily=this.logDailies[n],this.fillFormWithLogDailyData(),this.drawGraph()),this.shareService.changeMessage("reset")}goToPreviousLog(){const n=this.logDailies.findIndex(i=>{var o;return i.logDailyId===(null===(o=this.logDaily)||void 0===o?void 0:o.logDailyId)})-1;n>=0&&(this.logDaily=this.logDailies[n],this.fillFormWithLogDailyData(),this.drawGraph()),this.shareService.changeMessage("reset")}onSubmit(){var e=this;return(0,c.Z)(function*(){e.shareService.changeMessage(e.utilityService.generateString(5)),e.utilityService.validateForm(e.validation)&&(e.logDaily&&(e.logDaily.form.trailers=e.localForm.form.trailers,e.logDaily.form.shippingDoc=e.localForm.form.shippingDoc,e.logDaily.form.fromAddress=e.localForm.form.fromAddress,e.logDaily.form.toAddress=e.localForm.form.toAddress,e.logDaily.formManner=!0),e.saveFormLoading=!0,!0===e.networkStatus?e.dashboardService.updateLogDaily(e.logDaily).subscribe(n=>{console.log(`LogDaily ${e.logDaily} is updated on server:`,n),e.updateLocalStorage(),e.saveFormLoading=!1,e.toastService.showToast("Saved successfully!","success")},function(){var n=(0,c.Z)(function*(i){e.updateLocalStorage(),e.saveFormLoading=!1,e.toastService.showToast("Offline save!","warning")});return function(i){return n.apply(this,arguments)}}()):(e.updateLocalStorage(),e.saveFormLoading=!1,e.toastService.showToast("Offline save!","warning")))})()}initSignaturePad(){const e=this.signaturePadElement.nativeElement;e&&(this.signaturePad=new Z.Z(e,this.signaturePadOptions),e.addEventListener("touchend",()=>{this.updateSignatureField()}))}restoreSignature(){const e=this.logDailies.find(n=>""!==n.form.signatureId);e&&this.renderSignature(e.form.signatureId)}renderSignature(e){const n=this.signaturePadElement.nativeElement;if(n){const i=n.getContext("2d"),o=new Image;o.onload=()=>{null==i||i.drawImage(o,0,0)},o.src="data:image/png;base64,"+e,this.signature=e}}updateSignatureField(){if(this.signaturePad&&!this.signaturePad.isEmpty()){const e=this.signaturePad.toDataURL().slice(22);this.signature=e}else this.signature=""}clearSignature(){this.signaturePad&&(this.signaturePad.clear(),this.signature="")}openModal(){this.isModalOpen=!0,this.imageLoading=!0}imageLoaded(){this.imageLoading=!1}cancel(){this.isModalOpen=!1}confirm(){this.modal.dismiss(this.signature,"confirm")}onWillDismiss(e){var n=this;return(0,c.Z)(function*(){if("confirm"===e.detail.role){var o;const m=n.logEvents[n.logEvents.length-1];let d={logEventId:n.utilityService.uuidv4(),companyId:"",driverId:n.driverId,eventTime:{logDate:(0,l.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",I.W3[n.timeZone]),timeStamp:(new Date).getTime(),timeStampEnd:(new Date).getTime(),timeZone:""},vehicle:{vehicleId:n.vehicleId},eld:{eldId:"",macAddress:"",serialNumber:""},location:{locationType:"AUTOMATIC",description:"2mi from Chisinau, Chisinau",latitude:0,longitude:0},sequenceNumber:m?m.sequenceNumber+1:1,type:{name:"Certification (1)",code:"CERTIFICATION_1"},recordStatus:{name:"Driver",code:"DRIVER"},recordOrigin:{name:"Active",code:"ACTIVE"},odometer:0,engineHours:0,malfunction:!1,dataDiagnosticEvent:!1,certificationDate:null===(o=n.logDaily)||void 0===o?void 0:o.logDate,comment:"",eventDataCheck:"",inspection:!1};!0===n.networkStatus?n.dashboardService.updateLogEvent(d).subscribe(f=>{console.log("Certification LogEvent is on server:",f),n.updateLogEvents(d,!0)},function(){var f=(0,c.Z)(function*(T){n.updateLogEvents(d,!1),console.log("Cerification LogEvent Pushed in offline logEvents array")});return function(T){return f.apply(this,arguments)}}()):(console.log("Internet Status:",n.networkStatus),n.updateLogEvents(d,!1),console.log("Cerification LogEvent Pushed in offline logEvents array")),n.logDaily&&(n.logDaily.certified=!0,n.logDaily.form.signatureId=n.signature),!0===n.networkStatus?n.dashboardService.updateLogDaily(n.logDaily).subscribe(f=>{console.log(" LogDaily is on server:",f),n.updateLogDaily(n.logDaily,!0)},function(){var f=(0,c.Z)(function*(T){n.updateLogDaily(n.logDaily,!1),console.log("LogDaily Pushed in offline logDailies array")});return function(T){return f.apply(this,arguments)}}()):(console.log("Internet Status"+n.networkStatus),n.updateLogDaily(n.logDaily,!1),console.log("LogDaily Pushed in offline logDailies array"))}})()}updateLogEvents(e,n){var i=this;return(0,c.Z)(function*(){e.sent=n,i.logEvents.push(e),yield i.storage.set("dvirs",i.logEvents)})()}updateIndexLogEvents(e,n){var i=this;return(0,c.Z)(function*(){e.sent=n;const o=i.logEvents.findIndex(m=>m.logEventId===e.logEventId);-1!==o&&(i.logEvents[o]=e),yield i.storage.set("dvirs",i.logEvents)})()}updateLogDaily(e,n){var i=this;return(0,c.Z)(function*(){e.sent=n;const o=i.logDailies.findIndex(m=>m.logDailyId===e.logDailyId);-1!==o&&(i.logDailies[o]=e),yield i.storage.set("dvirs",i.logEvents)})()}nevigateToInspection(){this.navCtrl.navigateForward("/inspection-preview",{queryParams:{logId:this.logDaily.logDailyId,url:"log-item"}})}ionViewWillLeave(){this.databaseSubscription&&this.databaseSubscription.unsubscribe(),this.networkSub.unsubscribe()}certifyLog(){this.navCtrl.navigateForward("log-certify",{queryParams:{date:this.logDaily.logDate,logId:this.logDaily.logDailyId}})}editLog(){this.navCtrl.navigateForward("edit-duty-status",{queryParams:{url:this.router.url}})}goBack(){this.navCtrl.navigateBack("unitab/hos")}updateLocalStorage(){var e=this;return(0,c.Z)(function*(){let n=yield e.storage.get("logDailies"),i=n.findIndex(o=>o.logDailyId===e.logDaily.logDailyId);n.splice(i,1,e.logDaily),yield e.storage.set("logDailies",n),console.log("log-certify: logDailies updated in the storage")})()}canBeInspected(){var e;let n=new Date;return n.setHours(0,0,0,0),n.setDate((new Date).getDate()-7),n.getTime()<=new Date(null===(e=this.logDaily)||void 0===e?void 0:e.logDate).getTime()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(y.gz),t.Y36(y.F0),t.Y36(p.k),t.Y36(_.K),t.Y36(r.W),t.Y36(u.s),t.Y36(P.k),t.Y36(h.SH),t.Y36(b.t),t.Y36(O.t),t.Y36(S.N))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-log-item-daily"]],viewQuery:function(e,n){if(1&e&&(t.Gf(U,5),t.Gf(h.ki,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.signaturePadElement=i.first),t.iGM(i=t.CRH())&&(n.modal=i.first)}},decls:112,vars:51,consts:[[3,"forceOverscroll"],[3,"title","backButton","backButtonCallback"],["class","preview-container",3,"click",4,"ngIf"],[3,"title","leftCallback","rightCallback"],[1,"padding-g"],[1,"card-info"],["preserveAspectRatio","xMidYMid","viewBox","0 0 1600 270"],["transform","translate(65, 40)",1,"grid"],["x","0","y","0","width","1440","height","200","rx","8","ry","8",1,"border"],["class","",4,"ngFor","ngForOf"],["transform","translate(1440, 0)",1,"column"],["x1","0","x2","0","y1","0","y2","200"],["x1","0","x2","1440","y1","0","y2","0",1,"row"],["x1","0","x2","1440","y1","50","y2","50",1,"row"],["x1","0","x2","1440","y1","100","y2","100",1,"row"],["x1","0","x2","1440","y1","150","y2","150",1,"row"],["x1","0","x2","1440","y1","200","y2","200",1,"row"],["transform","translate(35, 40)",1,"duty-status-labels"],["transform","translate(15, 25)","text-anchor","end","dy","0.35em",1,"label"],["transform","translate(15, 75)","text-anchor","end","dy","0.35em",1,"label"],["transform","translate(15, 125)","text-anchor","end","dy","0.35em",1,"label"],["transform","translate(15, 175)","text-anchor","end","dy","0.35em",1,"label"],["transform","translate(65, 40)",1,"hour-labels"],["transform","translate(0, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(60, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(120, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(180, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(240, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(300, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(360, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(420, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(480, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(540, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(600, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(660, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(720, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(780, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(840, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(900, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(960, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1020, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1080, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1140, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1200, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1260, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1320, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1380, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1440, 10)","text-anchor","middle","dy","-1em",1,"label"],["transform","translate(1520, 40)",1,"durations"],["transform","translate(0, 25)","dy","0.35em",1,"label"],["transform","translate(0, 75)","dy","0.35em",1,"label"],["transform","translate(0, 125)","dy","0.35em",1,"label"],["transform","translate(0, 175)","dy","0.35em",1,"label"],["transform","translate(65, 40)",1,"eventLine"],["class","eventRecord",4,"ngFor","ngForOf"],[1,"edit-form"],[1,"form-title"],[1,"status-circle",3,"ngClass"],[1,"subtitle"],[1,"btn","primary-btn",2,"width","63px",3,"click"],[4,"ngIf"],["style","zoom: 0.7","name","circular","color","light",4,"ngIf"],[1,"form-list"],[3,"label","fill","labelPosition","disabled","type","value","noValidation","valueChange"],[3,"label","fill","labelPosition","type","value","noValidation","valueChange"],[3,"label","required","fill","labelPosition","type","value","validation","valueChange","validationChange"],[1,"logs-certified"],[1,"logs-buttons"],["class","btn primary-btn",3,"ngClass","disabled","click",4,"ngIf"],["class","btn secondary-btn",3,"click",4,"ngIf"],[3,"isOpen"],[1,"form-cards"],["class","form-card",4,"ngFor","ngForOf"],[1,"preview-container",3,"click"],["src","../../../assets/imgs/eye.png"],[1,""],[1,"column"],["transform","translate(0, 0)",1,"cell","top"],["x1","15","x2","15","y1","0","y2","17.5"],["x1","30","x2","30","y1","0","y2","35"],["x1","45","x2","45","y1","0","y2","17.5"],["transform","translate(0, 50)",1,"cell","top"],["transform","translate(0, 100)",1,"cell","bottom"],["x1","15","x2","15","y1","50","y2","32.5"],["x1","30","x2","30","y1","50","y2","15"],["x1","45","x2","45","y1","50","y2","32.5"],["transform","translate(0, 150)",1,"cell","bottom"],[1,"eventRecord"],["class","vertical",4,"ngIf"],[1,"vertical"],["name","circular","color","light",2,"zoom","0.7"],[1,"btn","primary-btn",3,"ngClass","disabled","click"],[1,"btn","secondary-btn",3,"click"],[2,"display","flex","justify-content","center","align-items","center"],[1,"signature-visualization"],[3,"ngClass","src","load"],["name","dots","color","dark",4,"ngIf"],["name","dots","color","dark"],[1,"form-card"],[1,"card-row"],[1,"status-circle",3,"ngStyle"],[1,"text-14-600"],["src","assets/icon/location.svg","alt","location"],[1,"text-2"],["src","assets/icon/edit.svg","alt","edit",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content",0)(1,"app-header",1),t.NdJ("backButtonCallback",function(){return n.goBack()}),t.YNc(2,k,2,0,"div",2),t.qZA(),t.TgZ(3,"app-scroll-toolbar",3),t.NdJ("leftCallback",function(){return n.goToNextLog()})("rightCallback",function(){return n.goToPreviousLog()}),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t.O4$(),t.TgZ(6,"svg",6)(7,"g",7),t._UZ(8,"rect",8),t.YNc(9,w,19,2,"g",9),t.TgZ(10,"g",10),t._UZ(11,"line",11),t.qZA(),t._UZ(12,"line",12)(13,"line",13)(14,"line",14)(15,"line",15)(16,"line",16),t.qZA(),t.TgZ(17,"g",17)(18,"text",18),t._uU(19,"OFF"),t.qZA(),t.TgZ(20,"text",19),t._uU(21,"SB"),t.qZA(),t.TgZ(22,"text",20),t._uU(23,"D"),t.qZA(),t.TgZ(24,"text",21),t._uU(25,"ON"),t.qZA()(),t.TgZ(26,"g",22)(27,"text",23),t._uU(28,"M"),t.qZA(),t.TgZ(29,"text",24),t._uU(30,"1"),t.qZA(),t.TgZ(31,"text",25),t._uU(32,"2"),t.qZA(),t.TgZ(33,"text",26),t._uU(34,"3"),t.qZA(),t.TgZ(35,"text",27),t._uU(36,"4"),t.qZA(),t.TgZ(37,"text",28),t._uU(38,"5"),t.qZA(),t.TgZ(39,"text",29),t._uU(40,"6"),t.qZA(),t.TgZ(41,"text",30),t._uU(42,"7"),t.qZA(),t.TgZ(43,"text",31),t._uU(44,"8"),t.qZA(),t.TgZ(45,"text",32),t._uU(46,"9"),t.qZA(),t.TgZ(47,"text",33),t._uU(48,"10"),t.qZA(),t.TgZ(49,"text",34),t._uU(50,"11"),t.qZA(),t.TgZ(51,"text",35),t._uU(52,"N"),t.qZA(),t.TgZ(53,"text",36),t._uU(54,"1"),t.qZA(),t.TgZ(55,"text",37),t._uU(56,"2"),t.qZA(),t.TgZ(57,"text",38),t._uU(58,"3"),t.qZA(),t.TgZ(59,"text",39),t._uU(60,"4"),t.qZA(),t.TgZ(61,"text",40),t._uU(62,"5"),t.qZA(),t.TgZ(63,"text",41),t._uU(64,"6"),t.qZA(),t.TgZ(65,"text",42),t._uU(66,"7"),t.qZA(),t.TgZ(67,"text",43),t._uU(68,"8"),t.qZA(),t.TgZ(69,"text",44),t._uU(70,"9"),t.qZA(),t.TgZ(71,"text",45),t._uU(72,"10"),t.qZA(),t.TgZ(73,"text",46),t._uU(74,"11"),t.qZA(),t.TgZ(75,"text",47),t._uU(76,"M"),t.qZA()(),t.TgZ(77,"g",48)(78,"text",49),t._uU(79,"00:00"),t.qZA(),t.TgZ(80,"text",50),t._uU(81,"00:00"),t.qZA(),t.TgZ(82,"text",51),t._uU(83,"00:00"),t.qZA(),t.TgZ(84,"text",52),t._uU(85,"00:00"),t.qZA()(),t.TgZ(86,"g",53),t.YNc(87,B,3,7,"g",54),t.qZA()()(),t.kcU(),t.TgZ(88,"div",55)(89,"div",56),t._UZ(90,"div",57),t.TgZ(91,"p",58),t._uU(92,"Form"),t.qZA(),t.TgZ(93,"button",59),t.NdJ("click",function(){return n.onSubmit()}),t.YNc(94,J,2,0,"span",60),t.YNc(95,q,1,0,"ion-spinner",61),t.qZA()(),t.TgZ(96,"div",62)(97,"app-input",63),t.NdJ("valueChange",function(o){return n.vehicleUnit=o}),t.qZA(),t.TgZ(98,"app-input",64),t.NdJ("valueChange",function(o){return n.localForm.form.trailers=o}),t.qZA(),t.TgZ(99,"app-input",65),t.NdJ("valueChange",function(o){return n.localForm.form.shippingDoc=o})("validationChange",function(o){return n.validation.shippingDoc=o}),t.qZA(),t.TgZ(100,"app-input",65),t.NdJ("valueChange",function(o){return n.localForm.form.fromAddress=o})("validationChange",function(o){return n.validation.fromAddress=o}),t.qZA(),t.TgZ(101,"app-input",65),t.NdJ("valueChange",function(o){return n.localForm.form.toAddress=o})("validationChange",function(o){return n.validation.toAddress=o}),t.qZA()(),t.TgZ(102,"div",66)(103,"p",58),t._uU(104,"Logs"),t.qZA(),t.TgZ(105,"div",67),t.YNc(106,Y,2,4,"button",68),t.YNc(107,Q,2,0,"button",69),t.qZA()(),t.TgZ(108,"ion-modal",70),t.YNc(109,W,6,8,"ng-template"),t.qZA(),t.TgZ(110,"div",71),t.YNc(111,H,14,13,"div",72),t.qZA()()()()),2&e&&(t.Q6J("forceOverscroll",!1),t.xp6(1),t.Q6J("title","Log")("backButton",!0),t.xp6(1),t.Q6J("ngIf",n.canBeInspected()),t.xp6(1),t.Q6J("title",n.getDateSub(null==n.logDaily?null:n.logDaily.logDate)),t.xp6(6),t.Q6J("ngForOf",n.graphicsHour),t.xp6(78),t.Q6J("ngForOf",n.eventGraphicLine),t.xp6(3),t.Q6J("ngClass",t.WLB(48,K,!(null!=n.logDaily&&n.logDaily.formManner),null==n.logDaily?null:n.logDaily.formManner)),t.xp6(4),t.Q6J("ngIf",!n.saveFormLoading),t.xp6(1),t.Q6J("ngIf",n.saveFormLoading),t.xp6(2),t.Q6J("label","Vehicle")("fill",!0)("labelPosition","left")("disabled",!0)("type","text")("value",n.vehicleUnit)("noValidation",!0),t.xp6(1),t.Q6J("label","Trailers")("fill",!0)("labelPosition","left")("type","text")("value",n.localForm.form.trailers)("noValidation",!0),t.xp6(1),t.Q6J("label","Shipping Document")("required",!0)("fill",!0)("labelPosition","left")("type","text")("value",n.localForm.form.shippingDoc)("validation",n.validation.shippingDoc),t.xp6(1),t.Q6J("label","From Address")("required",!0)("fill",!0)("labelPosition","left")("type","text")("value",n.localForm.form.fromAddress)("validation",n.validation.fromAddress),t.xp6(1),t.Q6J("label","To Address")("required",!0)("fill",!0)("labelPosition","left")("type","text")("value",n.localForm.form.toAddress)("validation",n.validation.toAddress),t.xp6(5),t.Q6J("ngIf",!(null!=n.logDaily&&n.logDaily.certified)),t.xp6(1),t.Q6J("ngIf",null==n.logDaily?null:n.logDaily.certified),t.xp6(1),t.Q6J("isOpen",n.isModalOpen),t.xp6(3),t.Q6J("ngForOf",n.statusesOnDay))},dependencies:[l.mk,l.sg,l.O5,l.PC,h.W2,h.PQ,h.ki,L.G,E.w,A.a,l.uU],styles:['@charset "UTF-8";h2[_ngcontent-%COMP%]{margin:0}svg[_ngcontent-%COMP%]:not(:root){overflow:hidden}svg[_ngcontent-%COMP%]{display:block;width:100%}.SVGline[_ngcontent-%COMP%]{stroke:#141;stroke-width:3}rect[_ngcontent-%COMP%]{fill:transparent}rect.eventBorder[_ngcontent-%COMP%]{fill:transparent;stroke-opacity:0;transition:fill .3s ease;cursor:pointer}line[_ngcontent-%COMP%]{stroke:#94a4d7;stroke-width:.5}.eventStatusOFF[_ngcontent-%COMP%]{stroke:#c6c6c6;stroke-width:5}.eventStatusSB[_ngcontent-%COMP%]{stroke:#1f3140;stroke-width:5}.eventStatusD[_ngcontent-%COMP%]{stroke:#3c763d;stroke-width:5}.eventStatusON[_ngcontent-%COMP%]{stroke:#d58512;stroke-width:5}.eventStatusPC[_ngcontent-%COMP%]{stroke:#c6c6c6;stroke-width:5;stroke-dasharray:7}.eventStatusYM[_ngcontent-%COMP%]{stroke:#d58512;stroke-width:5;stroke-dasharray:7}.eventStatusNP[_ngcontent-%COMP%]{stroke-width:3;stroke:#3c763d}.eventStatusLogin[_ngcontent-%COMP%]{stroke-width:3;stroke:#0321fc;stroke-dasharray:6}.eventStatusLogout[_ngcontent-%COMP%]{stroke-width:3;stroke:red;stroke-dasharray:6}.vertical[_ngcontent-%COMP%]{stroke:#002ed0}.horizontalRed[_ngcontent-%COMP%]{stroke:#db2828;stroke-width:7}.card-info[_ngcontent-%COMP%]{z-index:5;margin-bottom:30px}ion-grid[_ngcontent-%COMP%]{margin:0}ion-col[_ngcontent-%COMP%]{text-align:center}.FormStatus[_ngcontent-%COMP%]{background:#3880ff;height:3em;display:flex;justify-content:center;align-items:center;color:#fff}.custom-card[_ngcontent-%COMP%]{position:relative}.custom-card-on[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#fae057}.custom-card-off[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#bdc3bf}.custom-card-d[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#8bc34a}.custom-card-sb[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#7e7e7e}.custom-card-pc[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#bdc3bf}.custom-card-ym[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:2%;height:100%;background-color:#fae057}.underline-text[_ngcontent-%COMP%]{text-decoration:underline;color:#00f}.form-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px}.form-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{flex-grow:1}.form-title[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:30px;padding:10px 15px;height:38px}.logs-certified[_ngcontent-%COMP%]{display:flex;align-items:center}.logs-certified[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{flex:1}.logs-certified[_ngcontent-%COMP%]   .logs-buttons[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:flex-start}.logs-certified[_ngcontent-%COMP%]   .logs-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:30px;padding:10px 15px;min-height:37px}.form-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.form-list[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.form-list[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:50%;background-color:var(--gray-100)}.form-cards[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.form-cards[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;background-color:var(--gray-100);border-radius:10px;padding:15px}.form-cards[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.form-cards[_ngcontent-%COMP%]   .form-card[_ngcontent-%COMP%]   .card-row[_ngcontent-%COMP%]   .text-2[_ngcontent-%COMP%], .subtitle[_ngcontent-%COMP%]{flex-grow:1}.preview-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.preview-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:24px;height:24px}.status-circle[_ngcontent-%COMP%]{width:15px;height:15px;border-radius:50%}.status-circle-error[_ngcontent-%COMP%]{background-color:var(--error-500)}.status-circle-success[_ngcontent-%COMP%]{background-color:var(--success-500)}.btn-disabled[_ngcontent-%COMP%]{background-color:var(--gray-500)!important}.signature-visualization[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;background-color:var(--gray-100);border-radius:10px;padding:15px;min-width:330px;min-height:320px}.signature-visualization[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.no-image[_ngcontent-%COMP%]{display:none;width:0;height:0}']}),a})()}];let z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[y.Bz.forChild(j),y.Bz]}),a})();var $=s(4546),X=s(5351),tt=s(4166);let et=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[l.ez,x.u5,h.Pc,z,x.UX,$.y,X.J,tt.v]}),a})()},6994:(M,C,s)=>{s.d(C,{t:()=>y});var l=s(7579),x=s(1135),h=s(8256);let y=(()=>{class t{constructor(){this.editDataDetails=[],this.subject=new l.x,this.messageSource=new x.X(this.editDataDetails),this.currentMessage=this.messageSource.asObservable()}changeMessage(c){this.messageSource.next(c)}destroyMessage(){this.messageSource.next("")}}return t.\u0275fac=function(c){return new(c||t)},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);