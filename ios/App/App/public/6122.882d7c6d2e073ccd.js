"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6122,4546,8144],{4546:(j,H,_)=>{_.d(H,{y:()=>P});var C=_(6895),M=_(4006),t=_(6114),F=_(8256);let P=(()=>{class O{}return O.\u0275fac=function(R){return new(R||O)},O.\u0275mod=F.oAB({type:O}),O.\u0275inj=F.cJS({imports:[C.ez,M.u5,t.Pc]}),O})()},6122:(j,H,_)=>{_.r(H),_.d(H,{HosPageModule:()=>ie});var C=_(6895),M=_(4006),t=_(8256),F=_(9751),P=_(727);class O extends P.w0{constructor(n,e){super()}schedule(n,e=0){return this}}const S={setInterval(i,n,...e){const{delegate:o}=S;return null!=o&&o.setInterval?o.setInterval(i,n,...e):setInterval(i,n,...e)},clearInterval(i){const{delegate:n}=S;return((null==n?void 0:n.clearInterval)||clearInterval)(i)},delegate:void 0};var R=_(8737);const X={now:()=>(X.delegate||Date).now(),delegate:void 0};class Y{constructor(n,e=Y.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,o){return new this.schedulerActionCtor(this,n).schedule(o,e)}}Y.now=X.now;const rt=new class st extends Y{constructor(n,e=Y.now){super(n,e),this.actions=[],this._active=!1}flush(n){const{actions:e}=this;if(this._active)return void e.push(n);let o;this._active=!0;do{if(o=n.execute(n.state,n.delay))break}while(n=e.shift());if(this._active=!1,o){for(;n=e.shift();)n.unsubscribe();throw o}}}(class nt extends O{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var o;if(this.closed)return this;this.state=n;const s=this.id,g=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(g,s,e)),this.pending=!0,this.delay=e,this.id=null!==(o=this.id)&&void 0!==o?o:this.requestAsyncId(g,this.id,e),this}requestAsyncId(n,e,o=0){return S.setInterval(n.flush.bind(n,this),o)}recycleAsyncId(n,e,o=0){if(null!=o&&this.delay===o&&!1===this.pending)return e;null!=e&&S.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const o=this._execute(n,e);if(o)return o;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let s,o=!1;try{this.work(n)}catch(g){o=!0,s=g||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:n,scheduler:e}=this,{actions:o}=e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,R.P)(o,this),null!=n&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}});var at=_(3532);function $(i=0,n,e=rt){let o=-1;return null!=n&&((0,at.K)(n)?e=n:o=n),new F.y(s=>{let g=function lt(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;g<0&&(g=0);let r=0;return e.schedule(function(){s.closed||(s.next(r++),0<=o?this.schedule(void 0,o):s.complete())},g)})}function ct(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"linearGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.outerLinearGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function gt(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"radialGradient"),t._UZ(1,"stop",5)(2,"stop",6),t.qZA()),2&i){const e=t.oxw(2);t.uIk("id",e.svg.radialGradient.id),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop1)("stop-opacity",1),t.xp6(1),t.uIk("stop-color",e.svg.radialGradient.colorStop2)("stop-opacity",1)}}function dt(i,n){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill",e.svg.backgroundCircle.fill)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function ut(i,n){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(3);t.zWS("fill","url(",e.window.location.href,"#",e.svg.radialGradient.id,")"),t.uIk("cx",e.svg.backgroundCircle.cx)("cy",e.svg.backgroundCircle.cy)("r",e.svg.backgroundCircle.r)("fill-opacity",e.svg.backgroundCircle.fillOpacity)("stroke",e.svg.backgroundCircle.stroke)("stroke-width",e.svg.backgroundCircle.strokeWidth)}}function pt(i,n){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,dt,1,7,"circle",2),t.YNc(2,ut,1,8,"circle",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient)}}function ht(i,n){if(1&i&&(t.O4$(),t._UZ(0,"circle")),2&i){const e=t.oxw(2);t.uIk("cx",e.svg.circle.cx)("cy",e.svg.circle.cy)("r",e.svg.circle.r)("fill",e.svg.circle.fill)("stroke",e.svg.circle.stroke)("stroke-width",e.svg.circle.strokeWidth)}}function _t(i,n){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.uIk("d",e.svg.path.d)("stroke",e.svg.path.stroke)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function ft(i,n){if(1&i&&(t.O4$(),t._UZ(0,"path")),2&i){const e=t.oxw(3);t.zWS("stroke","url(",e.window.location.href,"#",e.svg.outerLinearGradient.id,")"),t.uIk("d",e.svg.path.d)("stroke-width",e.svg.path.strokeWidth)("stroke-linecap",e.svg.path.strokeLinecap)("fill",e.svg.path.fill)}}function mt(i,n){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,_t,1,5,"path",2),t.YNc(2,ft,1,6,"path",2),t.BQk()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.outerStrokeGradient)}}function vt(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(4);t.uIk("x",o.svg.title.x)("y",o.svg.title.y)("dy",e.dy)("font-size",o.svg.title.fontSize)("font-weight",o.svg.title.fontWeight)("fill",o.svg.title.color),t.xp6(1),t.Oqu(e.span)}}function xt(i,n){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,vt,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.title.tspans)}}function Ct(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3);t.uIk("font-size",e.svg.units.fontSize)("font-weight",e.svg.units.fontWeight)("fill",e.svg.units.color),t.xp6(1),t.Oqu(e.svg.units.text)}}function yt(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"tspan"),t._uU(1),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(4);t.uIk("x",o.svg.subtitle.x)("y",o.svg.subtitle.y)("dy",e.dy)("font-size",o.svg.subtitle.fontSize)("font-weight",o.svg.subtitle.fontWeight)("fill",o.svg.subtitle.color),t.xp6(1),t.Oqu(e.span)}}function bt(i,n){if(1&i&&(t.O4$(),t.ynx(0),t.YNc(1,yt,2,7,"tspan",8),t.BQk()),2&i){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.svg.subtitle.tspans)}}function St(i,n){if(1&i&&(t.O4$(),t.TgZ(0,"text",7),t.YNc(1,xt,2,1,"ng-container",2),t.YNc(2,Ct,2,4,"tspan",2),t.YNc(3,bt,2,1,"ng-container",2),t.qZA()),2&i){const e=t.oxw(2);t.uIk("x",e.svg.circle.cx)("y",e.svg.circle.cy)("text-anchor",e.svg.title.textAnchor),t.xp6(1),t.Q6J("ngIf",e.options.showTitle),t.xp6(1),t.Q6J("ngIf",e.options.showUnits),t.xp6(1),t.Q6J("ngIf",e.options.showSubtitle)}}function kt(i,n){if(1&i&&(t.O4$(),t._UZ(0,"image",9)),2&i){const e=t.oxw(2);t.uIk("height",e.svg.image.height)("width",e.svg.image.width)("href",e.svg.image.src,null,"xlink")("x",e.svg.image.x)("y",e.svg.image.y)}}function wt(i,n){if(1&i){const e=t.EpF();t.O4$(),t.TgZ(0,"svg",1),t.NdJ("click",function(s){t.CHM(e);const g=t.oxw();return t.KtG(g.emitClickEvent(s))}),t.TgZ(1,"defs"),t.YNc(2,ct,3,5,"linearGradient",2),t.YNc(3,gt,3,5,"radialGradient",2),t.qZA(),t.YNc(4,pt,3,2,"ng-container",2),t.YNc(5,ht,1,6,"circle",2),t.YNc(6,mt,3,2,"ng-container",2),t.YNc(7,St,4,6,"text",3),t.YNc(8,kt,1,5,"image",4),t.qZA()}if(2&i){const e=t.oxw();t.uIk("viewBox",e.svg.viewBox)("height",e.svg.height)("width",e.svg.width)("class",e.options.class),t.xp6(2),t.Q6J("ngIf",e.options.outerStrokeGradient),t.xp6(1),t.Q6J("ngIf",e.options.backgroundGradient),t.xp6(1),t.Q6J("ngIf",e.options.showBackground),t.xp6(1),t.Q6J("ngIf",e.options.showInnerStroke),t.xp6(1),t.Q6J("ngIf",0!=+e.options.percent||e.options.showZeroOuterStroke),t.xp6(1),t.Q6J("ngIf",!e.options.showImage&&(e.options.showTitle||e.options.showUnits||e.options.showSubtitle)),t.xp6(1),t.Q6J("ngIf",e.options.showImage)}}class z{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=0,this.imageWidth=0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let Tt=(()=>{class i{constructor(e,o,s,g){this.ngZone=o,this.elRef=s,this.onClick=new t.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new t.vpe,this._viewportChangedSubscriber=null,this.options=new z,this.defaultOptions=new z,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(r,d,u,a)=>{let l=a*Math.PI/180;return{x:r+Math.sin(l)*u,y:d-Math.cos(l)*u}},this.draw=r=>{let d=(r=void 0===r?this.options.percent:Math.abs(r))>100?100:r,u=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(u+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let c,h,a={x:u/2,y:u/2},l_x=a.x,l_y=a.y-this.options.radius,p=this.polarToCartesian(a.x,a.y,this.options.radius,360*(this.options.clockwise?d:100-d)/100);100===d&&(p.x=p.x+(this.options.clockwise?-.01:.01)),[c,h]=d>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let b=this.options.animateTitle?r:this.options.percent,Z=b>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:b.toFixed(this.options.toFixed),D=this.options.animateSubtitle?r:this.options.percent,w={x:a.x,y:a.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let m=this.options.titleFormat(b);m instanceof Array?w.texts=[...m]:w.texts.push(m.toString())}else"auto"===this.options.title?w.texts.push(Z):this.options.title instanceof Array?w.texts=[...this.options.title]:w.texts.push(this.options.title.toString());let f={x:a.x,y:a.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let m=this.options.subtitleFormat(D);m instanceof Array?f.texts=[...m]:f.texts.push(m.toString())}else this.options.subtitle instanceof Array?f.texts=[...this.options.subtitle]:f.texts.push(this.options.subtitle.toString());let x={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},y=0,v=1;if(this.options.showTitle&&(y+=w.texts.length),this.options.showSubtitle&&(y+=f.texts.length),this.options.showTitle)for(let m of w.texts)w.tspans.push({span:m,dy:this.getRelativeY(v,y)}),v++;if(this.options.showSubtitle)for(let m of f.texts)f.tspans.push({span:m,dy:this.getRelativeY(v,y)}),v++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${u} ${u}`,width:this.options.responsive?"100%":u,height:this.options.responsive?"100%":u,backgroundCircle:{cx:a.x,cy:a.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${l_x} ${l_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${c} ${h} ${p.x} ${p.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:a.x,cy:a.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:w,units:x,subtitle:f,image:{x:a.x-this.options.imageWidth/2,y:a.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(r,d)=>{let a,l,p,c=this.options.startFromZero||r<0?0:r,h=d<0?0:this.min(d,this.options.maxPercent),b=Math.abs(Math.round(h-c));return b>=100?(a=100,l=this.options.animateTitle||this.options.animateSubtitle?Math.round(b/a):1):(a=b,l=1),p=Math.round(this.options.animationDuration/a),p<10&&(p=10,a=this.options.animationDuration/p,l=!this.options.animateTitle&&!this.options.animateSubtitle&&b>100?Math.round(100/a):Math.round(b/a)),l<1&&(l=1),{times:a,step:l,interval:p}},this.animate=(r,d)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let u=this.options.startFromZero?0:r,a=d,{step:l,interval:p}=this.getAnimationParameters(u,a),c=u;this._timerSubscription=u<a?$(0,p).subscribe(()=>{c+=l,c<=a?!this.options.animateTitle&&!this.options.animateSubtitle&&c>=100?(this.draw(a),this._timerSubscription.unsubscribe()):this.draw(c):(this.draw(a),this._timerSubscription.unsubscribe())}):$(0,p).subscribe(()=>{c-=l,c>=a?!this.options.animateTitle&&!this.options.animateSubtitle&&a>=100?(this.draw(a),this._timerSubscription.unsubscribe()):this.draw(c):(this.draw(a),this._timerSubscription.unsubscribe())})},this.applyOptions=()=>{for(let r of Object.keys(this.options))this.hasOwnProperty(r)&&void 0!==this[r]?this.options[r]=this[r]:this.templateOptions&&void 0!==this.templateOptions[r]&&(this.options[r]=this.templateOptions[r]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(r,d)=>(1*(r-d/2)-.18).toFixed(2)+"em",this.min=(r,d)=>r<d?r:d,this.max=(r,d)=>r>d?r:d,this.uuid=()=>{var r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var a=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"==u?a:3&a|8).toString(16)})},this.checkViewport=()=>{this.findSvgElement();let r=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),r!==this.isInViewport&&this.onViewportChanged.observers.length>0&&this.ngZone.run(()=>{this.onViewportChanged.emit({oldValue:r,newValue:this.isInViewport})})},this.onScroll=r=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.ngZone.runOutsideAngular(()=>{this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0)}),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:u})=>{u&&this.render()}));let r=$(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():r.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=g.get(C.K0),this.window=this.document.defaultView,Object.assign(this.options,e),Object.assign(this.defaultOptions,e)}emitClickEvent(e){this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.observers.length>0&&this.onClick.emit(e)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}findSvgElement(){if(null===this.svgElement){let e=this.elRef.nativeElement.getElementsByTagName("svg");e.length>0&&(this.svgElement=e[0])}}isElementInViewport(e){if(null==e)return!1;let g,o=e.getBoundingClientRect(),s=e.parentNode;do{if(g=s.getBoundingClientRect(),o.top>=g.bottom||o.bottom<=g.top||o.left>=g.right||o.right<=g.left)return!1;s=s.parentNode}while(s!=this.document.body);return!(o.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||o.bottom<=0||o.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||o.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(e){this.render(),"lazy"in e&&(e.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(z),t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.zs3))},i.\u0275cmp=t.Xpm({type:i,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[t.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(e,o){1&e&&t.YNc(0,wt,9,11,"svg",0),2&e&&t.Q6J("ngIf",o.svg)},dependencies:[C.sg,C.O5],encapsulation:2}),i})(),Mt=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[{provide:z,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[C.ez]}),i})();var A=_(6114),K=_(4529),I=_(5861),Pt=_(4128);const E={ET:"UTC-4",CT:"UTC-5",MT:"UTC-6",PT:"UTC-7",AT:"UTC-8",HT:"UTC-10"};var tt=_(4382),Ot=_(9386),Dt=_(7219),Zt=_(849),At=_(3646);let It=(()=>{class i{transform(e){const o=Math.floor(e/3600),s=Math.floor(e%3600/60);return`${String(o).padStart(2,"0")}:${String(s).padStart(2,"0")}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=t.Yjl({name:"convertSecotdsToHoursAndMinutes",type:i,pure:!0}),i})();function Ut(i,n){1&i&&t._UZ(0,"img",49)}function Ht(i,n){1&i&&t._UZ(0,"img",50)}function Ft(i,n){1&i&&t._UZ(0,"img",49)}function Et(i,n){1&i&&t._UZ(0,"img",50)}function Bt(i,n){1&i&&t._UZ(0,"img",49)}function Lt(i,n){1&i&&t._UZ(0,"img",50)}function Nt(i,n){1&i&&t._UZ(0,"img",49)}function Wt(i,n){1&i&&t._UZ(0,"img",50)}function Rt(i,n){1&i&&t._UZ(0,"img",49)}function Yt(i,n){1&i&&t._UZ(0,"img",50)}function Jt(i,n){1&i&&t._UZ(0,"img",49)}function zt(i,n){1&i&&t._UZ(0,"img",50)}function Gt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"ion-content")(1,"app-header",30),t.NdJ("backButtonCallback",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.cancel())}),t.qZA(),t.TgZ(2,"div",31)(3,"div",32)(4,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("OFF"))}),t._UZ(5,"img",34),t.TgZ(6,"p",6),t._uU(7,"Off Duty"),t.qZA(),t.YNc(8,Ut,1,0,"img",35),t.YNc(9,Ht,1,0,"img",36),t.qZA(),t.TgZ(10,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("SB"))}),t._UZ(11,"img",37),t.TgZ(12,"p",6),t._uU(13,"Sleeper Berth"),t.qZA(),t.YNc(14,Ft,1,0,"img",35),t.YNc(15,Et,1,0,"img",36),t.qZA(),t.TgZ(16,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("ON"))}),t._UZ(17,"img",38),t.TgZ(18,"p",6),t._uU(19,"On Duty"),t.qZA(),t.YNc(20,Bt,1,0,"img",35),t.YNc(21,Lt,1,0,"img",36),t.qZA(),t.TgZ(22,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("D"))}),t._UZ(23,"img",39),t.TgZ(24,"p",6),t._uU(25,"Driving"),t.qZA(),t.YNc(26,Nt,1,0,"img",35),t.YNc(27,Wt,1,0,"img",36),t.qZA(),t.TgZ(28,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("PC"))}),t._UZ(29,"img",40),t.TgZ(30,"p",6),t._uU(31,"Personal Conveyance"),t.qZA(),t.YNc(32,Rt,1,0,"img",35),t.YNc(33,Yt,1,0,"img",36),t.qZA(),t.TgZ(34,"div",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.selectButton("YM"))}),t._UZ(35,"img",41),t.TgZ(36,"p",6),t._uU(37,"Yard Moves"),t.qZA(),t.YNc(38,Jt,1,0,"img",35),t.YNc(39,zt,1,0,"img",36),t.qZA()(),t.TgZ(40,"div",42)(41,"label",43),t._uU(42,"Location"),t.qZA(),t.TgZ(43,"input",44),t.NdJ("ngModelChange",function(s){t.CHM(e);const g=t.oxw(2);return t.KtG(g.location=s)}),t.qZA()(),t.TgZ(44,"div",42)(45,"label",43),t._uU(46,"Comments"),t.qZA(),t.TgZ(47,"textarea",45),t.NdJ("ngModelChange",function(s){t.CHM(e);const g=t.oxw(2);return t.KtG(g.comments=s)}),t.qZA()(),t.TgZ(48,"div",46)(49,"button",47),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.cancel())}),t._uU(50,"Back"),t.qZA(),t.TgZ(51,"button",48),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.confirm())}),t._uU(52,"Save"),t.qZA()()()()}if(2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("title","Select Duty Status")("backButton",!0),t.xp6(7),t.Q6J("ngIf","OFF"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","OFF"===e.selectedButton),t.xp6(5),t.Q6J("ngIf","SB"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","SB"===e.selectedButton),t.xp6(5),t.Q6J("ngIf","ON"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","ON"===e.selectedButton),t.xp6(5),t.Q6J("ngIf","D"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","D"===e.selectedButton),t.xp6(5),t.Q6J("ngIf","PC"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","PC"===e.selectedButton),t.xp6(5),t.Q6J("ngIf","YM"!==e.selectedButton),t.xp6(1),t.Q6J("ngIf","YM"===e.selectedButton),t.xp6(4),t.Q6J("ngModel",e.location),t.xp6(4),t.Q6J("ngModel",e.comments),t.xp6(4),t.Q6J("disabled",!e.isConfirmButtonActive)}}function qt(i,n){if(1&i&&(t.TgZ(0,"div",51)(1,"div",52),t._UZ(2,"circle-progress",53),t.qZA(),t.TgZ(3,"div",52),t._UZ(4,"circle-progress",54),t.qZA(),t.TgZ(5,"div",52),t._UZ(6,"circle-progress",55),t.qZA(),t.TgZ(7,"div",52),t._UZ(8,"circle-progress",56),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.Q6J("percent",e.percentBreak)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleBreak))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentDriving)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleDriving))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentShift)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleShift))("showUnits",!1)("animationDuration",500),t.xp6(2),t.Q6J("percent",e.percentCycle)("responsive",!0)("space",-15)("outerStrokeWidth",15)("innerStrokeWidth",15)("title",e.convertSecondToHours(e.titleCycle))("showUnits",!1)("animationDuration",500)}}function Qt(i,n){if(1&i&&(t.TgZ(0,"div",57)(1,"div",58)(2,"div",59)(3,"p",6),t._uU(4,"Minimum Break Required"),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.qZA()(),t.TgZ(7,"div",60),t._UZ(8,"div",61),t.qZA()(),t.TgZ(9,"div",58)(10,"div",59)(11,"p",6),t._uU(12,"Until shift reset"),t.qZA(),t.TgZ(13,"p",6),t._uU(14),t.qZA()(),t.TgZ(15,"div",60),t._UZ(16,"div",62),t.qZA()(),t.TgZ(17,"div",58)(18,"div",59)(19,"p",6),t._uU(20,"Until Cycle Reset"),t.qZA(),t.TgZ(21,"p",6),t._uU(22),t.qZA()(),t.TgZ(23,"div",60),t._UZ(24,"div",63),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(6),t.hij("",e.restBreak," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressBreak+"%"),t.xp6(6),t.hij("",e.restShift," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressShift+"%"),t.xp6(6),t.hij("",e.restCycle," / 00:30"),t.xp6(2),t.Akn("width: "+100*e.progressCycle+"%")}}function Vt(i,n){1&i&&t._UZ(0,"img",64)}function $t(i,n){1&i&&t._UZ(0,"img",65)}function Kt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",66),t.NdJ("click",function(){const g=t.CHM(e).$implicit,r=t.oxw(2);return t.KtG(r.selectLog(g))}),t.TgZ(1,"div",67)(2,"p",6),t._uU(3),t.ALo(4,"date"),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"div",68),t._UZ(7,"img",69),t.TgZ(8,"p"),t._uU(9,"Form"),t.qZA(),t._UZ(10,"img",69),t.TgZ(11,"p"),t._uU(12,"Certify"),t.qZA()()(),t.TgZ(13,"div",70)(14,"p",71),t._uU(15),t.ALo(16,"convertSecotdsToHoursAndMinutes"),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(3),t.AsE("",t.xi3(4,3,e.logDate,"EEEE"),", ",t.xi3(5,6,e.logDate,"MMMM dd"),""),t.xp6(12),t.Oqu(t.lcZ(16,9,e.timeWorked))}}function jt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"img",4),t.TgZ(3,"div",5)(4,"p",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()(),t._UZ(8,"img",8),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"img",10),t.TgZ(11,"div",11)(12,"p",6),t._uU(13,"Warning"),t.qZA(),t.TgZ(14,"p",7),t._uU(15,"Make sure that ELD hardware is properly installed and Vehicle power is ON"),t.qZA()()(),t.TgZ(16,"div",12)(17,"p",6),t._uU(18,"Current Status"),t.qZA(),t.TgZ(19,"div",13),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.toggleModal())}),t._uU(20),t._UZ(21,"img",14),t.qZA(),t.TgZ(22,"div",15),t._uU(23),t.qZA()(),t.TgZ(24,"ion-modal",16),t.NdJ("willDismiss",function(s){t.CHM(e);const g=t.oxw();return t.KtG(g.onWillDismiss(s))}),t.YNc(25,Gt,53,17,"ng-template"),t.qZA(),t.TgZ(26,"div",17)(27,"p",18),t._uU(28,"Hours Remaining"),t.qZA(),t.YNc(29,qt,9,32,"div",19),t.qZA(),t.YNc(30,Qt,25,9,"div",20),t.TgZ(31,"div",21)(32,"div",22)(33,"p",6),t._uU(34,"8 h 33 m"),t.qZA(),t.TgZ(35,"p",7),t._uU(36,"WH Last 7 Days"),t.qZA()(),t.TgZ(37,"div",22)(38,"p",6),t._uU(39,"+ 00h 00h"),t.qZA(),t.TgZ(40,"p",7),t._uU(41,"Hours Recap"),t.qZA()()(),t.TgZ(42,"div",23)(43,"p",6),t._uU(44,"Split Sleeper Berth"),t.qZA(),t._UZ(45,"ion-toggle",24),t.qZA(),t.TgZ(46,"button",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.switchMode())}),t.YNc(47,Vt,1,0,"img",26),t.YNc(48,$t,1,0,"img",27),t._uU(49),t.qZA(),t.TgZ(50,"p",6),t._uU(51,"Logs and Recap Hours"),t.qZA(),t.TgZ(52,"div",28),t.YNc(53,Kt,17,11,"div",29),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(5),t.Oqu(e.name),t.xp6(2),t.hij("Vehicle Unit: ",e.vehicle.vehicleUnit,""),t.xp6(13),t.hij(" ",e.currentStatus.statusName," "),t.xp6(3),t.Oqu(e.currentStatusTime),t.xp6(1),t.Q6J("isOpen",e.isModalOpen),t.xp6(5),t.Q6J("ngIf",!e.restMode),t.xp6(1),t.Q6J("ngIf",e.restMode),t.xp6(17),t.Q6J("ngIf",!e.restMode),t.xp6(1),t.Q6J("ngIf",e.restMode),t.xp6(1),t.hij(" ",e.restMode?"Switch to Drive Mode":"Switch to Rest Mode"," "),t.xp6(4),t.Q6J("ngForOf",e.logDailies)}}const Xt=[{path:"",component:(()=>{class i{constructor(e,o,s,g,r,d,u,a){this.navCtrl=e,this.route=o,this.databaseService=s,this.dashboardService=g,this.internetService=r,this.storage=d,this.modalController=u,this.storageService=a,this.message="",this.someErrors=!1,this.bReady=!1,this.logDailies=[],this.logHistories=[],this.countDays=[],this.selectedButton="",this.progressBreak=0,this.progressShift=0,this.progressCycle=0,this.isConfirmButtonActive=!0,this.vehicleId="",this.driverId="",this.driverName="",this.companyId="",this.name="",this.pickedVehicle="",this.TimeZoneCity="",this.networkStatus=!1,this.percentBreak=0,this.percentDriving=0,this.percentShift=0,this.percentCycle=0,this.titleBreak=0,this.titleDriving=0,this.titleShift=0,this.titleCycle=0,this.redCircle=0,this.restBreak="",this.restShift="",this.restCycle="",this.currentStatus={statusCode:"",statusName:""},this.currentStatusTime="",this.location="",this.comments="",this.restMode=!1}ngOnInit(){var e=this;return(0,I.Z)(function*(){e.getVehicle(),console.log("init hos"),e.vehicleId=yield e.storage.get("vehicleId"),e.driverId=yield e.storage.get("driverId"),e.driverName=yield e.storage.get("driverName"),e.companyId=yield e.storage.get("companyId"),e.TimeZoneCity=yield e.storage.get("TimeZoneCity"),e.bAuthorized=yield e.storage.get("bAuthorized"),e.name=yield e.storage.get("name"),e.pickedVehicle=yield e.storage.get("pickedVehicle"),e.databaseSubscription=e.databaseService.databaseReadySubject.subscribe(o=>{if(o){e.bReady=o;const s=e.databaseService.getLogDailies(),g=e.databaseService.getLogHistories();(0,Pt.D)([s,g]).subscribe(([r,d])=>{if(e.logDailies=r,e.logHistories=d,console.log(d),!1===e.bAuthorized){const u=e.logHistories[e.logHistories.length-1];u.DateEnd=(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[e.TimeZoneCity]);let a={City:"",CoDriverId:"",Comment:"",CountryCode:"",DataDiagnosticEvent:!1,DateBgn:(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[e.TimeZoneCity]),DateEnd:(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[e.TimeZoneCity]),DistanceSince:0,DriverId:e.driverId,ELDId:"00000000-0000-0000-0000-000000000000",EngineHours:0,EventDataCheck:"",EventRecordOriginCode:"DRIVER",EventRecordOriginName:"Driver",EventRecordStatusCode:"ACTIVE",EventRecordStatusName:"Active",EventSequenceNumber:u?u.EventSequenceNumber+1:1,EventTypeCode:"LOGIN",EventTypeName:"Login",EventTypeType:"LOGIN",Latitude:0,LocationDescription:"2mi from Chisinau, Chisinau",LocationDescriptionManual:"",LocationSourceCode:"AUTOMATIC",LocationSourceName:"Location generated when connected to ECM",LogDailiesId:"",LogHistoriesId:e.uuidv4(),Longitude:0,Malfunction:!1,Odometer:0,PositioningCode:"AUTOMATIC",PositioningName:"Automatic",SendLogToInspector:!1,StateProvinceCode:"",VehicleId:e.vehicleId};e.logHistories.push(a),e.storage.set("bAuthorized",!0),e.storage.set("logHistories",e.logHistories),e.dashboardService.updateLogHistory(a).subscribe(l=>{console.log("Login LogHistory is updated on server:",l)},function(){var l=(0,I.Z)(function*(p){console.log("Internet Status"+e.networkStatus);let c={url:"api/eldDashboard/UploadLogHistories",body:a},h=yield e.storage.get("offlineArray");h.push(c),yield e.storage.set("offlineArray",h),console.log("Login LogHistory Pushed in offlineArray")});return function(p){return l.apply(this,arguments)}}()),e.dashboardService.updateLogHistory(u).subscribe(l=>{console.log("Predposlednii LogHistory is updated on server:",l)},function(){var l=(0,I.Z)(function*(p){console.log("Internet Status"+e.networkStatus);let c={url:"api/eldDashboard/UploadLogHistories",body:u},h=yield e.storage.get("offlineArray");h.push(c),yield e.storage.set("offlineArray",h),console.log("Predposlednii LogHistory Pushed in offlineArray")});return function(p){return l.apply(this,arguments)}}())}e.updateLogDailies()})}}),e.networkSub=e.internetService.internetStatus$.subscribe(o=>{e.networkStatus=o,console.log("Intenet Status"+o)}),e.sayHello(),e.calculateCircles(),e.paramsSubscription=e.route.params.subscribe(o=>{console.log("after ngOnInit dvir"),e.bReady&&(e.databaseSubscription=e.databaseService.getLogDailies().subscribe(s=>{e.logDailies=s}))})})()}getVehicle(){this.storageService.getVehicles().subscribe(e=>{this.vehicle=e[0]},e=>console.log(e))}switchMode(){this.restMode=!this.restMode}ionViewWillEnter(){console.log("willEnter hos"),this.logDailies=this.countDays}toggleMode(){const e=document.getElementById("driveModeContainer"),o=document.getElementById("restModeContainer"),s=document.querySelector(".drive_mode ion-button");e&&o&&s&&("none"===e.style.display?(e.style.display="block",o.style.display="none"):(e.style.display="none",o.style.display="block"))}calculateCircles(){var e=this;return(0,I.Z)(function*(){const o=["OFF","SB","D","ON","PC","YM"];let s=yield e.storage.get("HoursOfServiceRuleHours"),r=(yield e.storage.get("HoursOfServiceRuleDays"),28800),d=39600,u=50400,a=60*s*60,l=28800,p=39600,c=50400,h=60*s*60,b=0,Z=0,D=0,w=0,f=0,x=0,y=0,v=0,m=0,k=0,T=0,oe=0,B=0,L=0,G=0,N=0,W=0,q=36e3,Q=122400,it="",V="",U="",ot="",ne=!1;e.logHistories.forEach(J=>{if(o.includes(J.EventTypeCode)){switch(it=J.DateBgn,U=J.EventTypeCode,ot=J.EventTypeName,V=J.DateEnd,"0001-01-01T00:00:00"==V&&(V=(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[e.TimeZoneCity])),f=(new Date(V).getTime()-new Date(it).getTime())/1e3,U){case"OFF":case"SB":T+=f,y+=f,f>=7200&&f<14400&&(B+=f),"SB"==U&&f>=25200&&f<32400&&(L+=f),f>=Q&&(v=0,oe=0,ne=!0),f>=q&&(m=0,k=0,T=0,B=0,L=0),N=q-f,W=Q-f;break;case"D":k+=f,x+=f,v+=f,y=0,N=q,W=Q;break;case"ON":case"PC":case"YM":m+=f,v+=f,y+=f,N=q,W=Q}y>=1800&&(x=0),G=1800-y}}),e.currentStatus.statusCode=U,e.currentStatus.statusName=ot,e.currentStatusTime=e.convertSecondToHours(f),e.restBreak=e.convertSecondToHours(0),e.restShift=e.convertSecondToHours(0),e.restCycle=e.convertSecondToHours(0),G>=0&&(e.restBreak=e.convertSecondToHours(G),e.progressBreak=100*G/1800/100),N>=0&&(e.restShift=e.convertSecondToHours(N),e.progressShift=100*N/36e3/100),W>=0&&(e.restCycle=e.convertSecondToHours(W),e.progressCycle=100*W/122400/100),(U="")&&(U="OFF",e.message="Off Duty"),h<v&&(l=0,p=0,c=0),p<k&&(l=0),c-k-m-T<0?"OFF"==U||"SB"==U?c=c-k-m<0?-1:k+m+T<c?c-k-m-T:0:(c=c+L+B-k-m-T,c=c-k-m-T):c=c-k-m-T,c>=0?(D=100*c/u,e.percentShift=D,e.titleShift=c,e.redCircle+=0,console.log(D)):(D=100*-c/u,c=u+c,e.percentShift=D,e.titleShift=c,e.redCircle+=1),p-=k,p>=0?(Z=100*p/d,e.percentDriving=Z,e.titleDriving=p,e.redCircle+=0):(p=d-p,Z=100*-p/d,e.percentDriving=Z,e.titleDriving=-p,e.redCircle+=1),l-=x,l>=0?(b=100*l/r,e.percentBreak=b,e.titleBreak=l,e.redCircle+=0):(b=100*-l/r,l=r-l,e.percentBreak=b,e.titleBreak=-l,e.redCircle+=1,console.log(e.percentBreak)),h-=v,h>=0?(w=100*h/a,e.percentCycle=w,e.titleCycle=h,e.redCircle+=0):(h=a-h,w=100*h/a,e.percentCycle=w,e.titleCycle=-h,e.redCircle+=1),console.log("iAvailableBreak: ",l),console.log("iAvailableDrive: ",p),console.log("iAvailableShift: ",c),console.log("iAvailableCycle: ",h)})()}getStatusColor(e){switch(e){case"Off Duty":return"light";case"Driving":case"Personal Conveyance":return"success";case"On Duty":case"Yard Moves":return"warning";default:return"medium"}}toggleModal(){this.isModalOpen=!0,this.currentStatus&&this.selectButton(this.currentStatus.statusCode)}selectLog(e){this.navCtrl.navigateForward(["/log-item",{logId:e.logDailyId}])}selectButton(e){this.selectedButton=e,this.isConfirmButtonActive=this.selectedButton!==this.currentStatus.statusCode}cancel(){this.modal.dismiss(null,"cancel"),this.isModalOpen=!1}confirm(){var e=this;return(0,I.Z)(function*(){e.selectedButton&&(yield e.modal.dismiss(e.selectedButton,"confirm")),e.isModalOpen=!1})()}onWillDismiss(e){var o=this;if("confirm"===e.detail.role){const g=["OFF","SB","D","ON","PC","YM"],r=this.logHistories.filter(l=>g.includes(l.EventTypeCode));let d=r[r.length-1];if(d){const l=(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[this.TimeZoneCity]);d.DateEnd=l,console.log("LAST LOGHISTORY = ",d)}let u={OFF:{statusName:"Off Duty",eventTypeType:"DUTY_STATUS"},SB:{statusName:"Sleeper Berth",eventTypeType:"DUTY_STATUS"},D:{statusName:"Driving",eventTypeType:"DUTY_STATUS"},ON:{statusName:"On Duty",eventTypeType:"DUTY_STATUS"},PC:{statusName:"Personal Conveyance",eventTypeType:"DRIVER_INDICATES"},YM:{statusName:"Yard Moves",eventTypeType:"DRIVER_INDICATES"}},a={City:"",CoDriverId:"",Comment:"",CountryCode:"",DataDiagnosticEvent:!1,DateBgn:(0,C.p6)(new Date,"yyyy-MM-ddTHH:mm:ss","en_US",E[this.TimeZoneCity]),DateEnd:"0001-01-01T00:00:00",DistanceSince:0,DriverId:this.driverId,ELDId:"00000000-0000-0000-0000-000000000000",EngineHours:0,EventDataCheck:"",EventRecordOriginCode:"DRIVER",EventRecordOriginName:"Driver",EventRecordStatusCode:"ACTIVE",EventRecordStatusName:"Active",EventSequenceNumber:d?d.EventSequenceNumber+1:1,EventTypeCode:this.selectedButton,EventTypeName:u[this.selectedButton]?u[this.selectedButton].statusName:"Unknown",EventTypeType:u[this.selectedButton]?u[this.selectedButton].eventTypeType:"Unknown",Latitude:0,LocationDescription:"2mi from Chisinau, Chisinau",LocationDescriptionManual:"",LocationSourceCode:"AUTOMATIC",LocationSourceName:"Location generated when connected to ECM",LogDailiesId:"",LogHistoriesId:this.uuidv4(),Longitude:0,Malfunction:!1,Odometer:0,PositioningCode:"AUTOMATIC",PositioningName:"Automatic",SendLogToInspector:!1,StateProvinceCode:"",VehicleId:this.vehicleId};this.logHistories.push(a),this.storage.set("logHistories",this.logHistories),this.updateLogDailies(),this.calculateCircles(),this.dashboardService.updateLogHistory(d).subscribe(l=>{console.log("Last LogHistory is updated on server:",l)},function(){var l=(0,I.Z)(function*(p){console.log("Internet Status"+o.networkStatus);let c={url:"api/eldDashboard/UploadLogHistories",body:d},h=yield o.storage.get("offlineArray");h.push(c),yield o.storage.set("offlineArray",h),console.log("Last   LogHistory Pushed in offlineArray")});return function(p){return l.apply(this,arguments)}}()),this.dashboardService.updateLogHistory(a).subscribe(l=>{console.log("New status is updated on server:",l)},function(){var l=(0,I.Z)(function*(p){console.log("Internet Status"+o.networkStatus);let c={url:"api/eldDashboard/UploadLogHistories",body:a},h=yield o.storage.get("offlineArray");h.push(c),yield o.storage.set("offlineArray",h),console.log("New status Pushed in offlineArray")});return function(p){return l.apply(this,arguments)}}())}this.isModalOpen=!1}convertSecondToHours(e){let o,s,g;return e<0?(o="-",e=-e):o="",s=(24*Math.trunc(e/86400%24)+Math.trunc(e/3600%24)).toString(),g=(Math.trunc(e/60)%60).toString(),0===s.length&&(s="00"),1===s.length&&(s="0"+s),0===g.length&&(g="0"),1===g.length&&(g="0"+g),o+s+":"+g}updateLogDailies(){var e=this;console.log("updating...");let o=new Date;this.countDays=[];for(let x=0;x<14;x++){const y=o.toISOString().split("T")[0],v=this.logDailies.findIndex(m=>m.logDate.includes(y));this.countDays.push(-1!==v?this.logDailies[v]:{logDailyId:"00000000-0000-0000-0000-000000000000",companyId:this.companyId,driverId:this.driverId,driverName:"",logDate:y+"T00:00:00",timeOffDuty:0,timeSleeper:0,timeDriving:0,timeOnDuty:0,timeWorked:0,violations:[],formManner:!1,certified:!1,form:{trailers:"",shippingDoc:"",fromAddress:"",toAddress:"",signatureId:"00000000-0000-0000-0000-000000000000"}}),o.setDate(o.getDate()-1)}this.logDailies=this.countDays;const s=["OFF","SB","D","ON","PC","YM"];let g=null,r=null,d=0,u=0,a=0,l=0,p=0,c=0,h=0,b=0,Z=0,D=0;console.log(this.logDailies);for(let x=0;x<this.logDailies.length;x++){let y=this.logDailies[x].logDate;a=0,l=0,p=0,c=0,h=this.logDailies[x].timeOffDuty,b=this.logDailies[x].timeSleeper,Z=this.logDailies[x].timeDriving,D=this.logDailies[x].timeOnDuty,this.logHistories.forEach(v=>{if(s.includes(v.EventTypeCode)&&(0,C.p6)(new Date(v.DateBgn),"yyyy-MM-dd","en_US")<=(0,C.p6)(new Date(y),"yyyy-MM-dd","en_US")&&(0,C.p6)(new Date(y),"yyyy-MM-dd","en_US")<=(0,C.p6)(new Date(v.DateEnd),"yyyy-MM-dd","en_US"))switch(g=new Date(v.DateBgn),d=g.toLocaleDateString()===new Date(y).toLocaleDateString()?60*g.getHours()+g.getMinutes():0,r=new Date(v.DateEnd),u=r.toLocaleDateString()===new Date(y).toLocaleDateString()?60*r.getHours()+r.getMinutes():1440,v.EventTypeCode.toUpperCase()){case"OFF":case"PC":a+=60*(u-d);break;case"SB":l+=60*(u-d);break;case"D":p+=60*(u-d);break;case"ON":case"YM":c+=60*(u-d)}}),(h!=a||b!=l||Z!=p||D!=c)&&(this.logDailies[x].timeOffDuty=a,this.logDailies[x].timeSleeper=l,this.logDailies[x].timeDriving=p,this.logDailies[x].timeOnDuty=c,this.logDailies[x].timeWorked=p+c,this.dashboardService.updateLogDaily(this.logDailies[x]).subscribe(v=>{console.log("LogDaily (durationStatuses) is updated on server:",v)},function(){var v=(0,I.Z)(function*(m){console.log("Internet Status"+e.networkStatus);let k={url:"api/eldDashboard/UploadLogDailies",body:e.logDailies[x]},T=yield e.storage.get("offlineArray");T.push(k),yield e.storage.set("offlineArray",T),console.log("Pushed in offlineArray")});return function(m){return v.apply(this,arguments)}}()))}}sayHello(){setInterval(()=>{this.updateLogDailies(),this.calculateCircles()},6e4)}uuidv4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})}ionViewWillLeave(){this.databaseSubscription&&this.databaseSubscription.unsubscribe(),this.networkSub.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(A.SH),t.Y36(K.gz),t.Y36(tt.k),t.Y36(Ot.s),t.Y36(Dt.W),t.Y36(Zt.K),t.Y36(A.IN),t.Y36(tt.k))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-hos"]],viewQuery:function(e,o){if(1&e&&t.Gf(A.ki,5),2&e){let s;t.iGM(s=t.CRH())&&(o.modal=s.first)}},decls:2,vars:2,consts:[[3,"forceOverscroll"],["class","hos-wrapper",4,"ngIf"],[1,"hos-wrapper"],[1,"hos-header"],["src","assets/icon/point-green.svg","alt","point"],[1,"hos-name"],[1,"subtitle"],[1,"text-1"],["src","assets/icon/bluetooth-red.svg","alt","bluetooth"],[1,"warning"],["src","assets/icon/warning.svg","alt","warning"],[1,"warning-text"],[1,"status-bar"],[1,"green",3,"click"],["src","assets/icon/arrow-bottom.svg","alt","arrow"],[1,"green"],[3,"isOpen","willDismiss"],[1,"circles"],[1,"text-2",2,"margin-bottom","5px"],["class","circles-block",4,"ngIf"],["class","rest-mode",4,"ngIf"],[1,"time"],[1,"time-block"],[1,"switch-sleep"],[1,"custom-toggle"],[1,"btn","primary-btn",3,"click"],["src","assets/icon/moon.svg","alt","moon",4,"ngIf"],["src","assets/icon/drive.svg","alt","moon",4,"ngIf"],[1,"log-dailies"],["class","log-daily",3,"click",4,"ngFor","ngForOf"],[3,"title","backButton","backButtonCallback"],[1,"modal-content"],[1,"select-statuses"],[1,"select-status",3,"click"],["src","assets/icon/circle-gray.svg","alt","circle"],["src","assets/icon/circle-white.svg","alt","circle",4,"ngIf"],["src","assets/icon/check-mark.svg","alt","circle",4,"ngIf"],["src","assets/icon/circle-blue.svg","alt","circle"],["src","assets/icon/circle-green.svg","alt","circle"],["src","assets/icon/circle-orange.svg","alt","circle"],["src","assets/icon/circle-purple.svg","alt","circle"],["src","assets/icon/circle-red.svg","alt","circle"],[1,"input-block"],[1,"label"],["type","text","name","location",1,"input",3,"ngModel","ngModelChange"],["type","text","name","location",1,"input","textarea",3,"ngModel","ngModelChange"],[1,"btns-flex"],[1,"btn","secondary-btn",3,"click"],[1,"btn","primary-btn",3,"disabled","click"],["src","assets/icon/circle-white.svg","alt","circle"],["src","assets/icon/check-mark.svg","alt","circle"],[1,"circles-block"],[1,"circle-block"],["outerStrokeColor","rgb(254, 200, 75)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgb(254, 200, 75)","titleFontWeight","600","subtitle","Break","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(18, 183, 106, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(18, 183, 106, 1)","titleFontWeight","600","subtitle","Driving","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(155, 138, 251, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(155, 138, 251, 1)","titleFontWeight","600","subtitle","Shift","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],["outerStrokeColor","rgba(250, 26, 26, 1)","innerStrokeColor","rgba(228, 231, 236, 1)","titleFontSize","22","titleColor","rgba(250, 26, 26, 1)","titleFontWeight","600","subtitle","Cycle","subtitleFontWeight","500","subtitleColor","rgba(152, 162, 179, 1)","subtitleFontSize","22","outerStrokeLinecap","round",3,"percent","responsive","space","outerStrokeWidth","innerStrokeWidth","title","showUnits","animationDuration"],[1,"rest-mode"],[1,"rest-row"],[1,"row-1"],[1,"progress-bar-outer"],["id","inner-1",1,"progress-bar-inner"],["id","inner-2",1,"progress-bar-inner"],["id","inner-3",1,"progress-bar-inner"],["src","assets/icon/moon.svg","alt","moon"],["src","assets/icon/drive.svg","alt","moon"],[1,"log-daily",3,"click"],[1,"log-left"],[1,"sub-info"],["src","assets/icon/red-point.svg","alt","point"],[1,"log-right"],[1,"hours-worked"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0),t.YNc(1,jt,54,11,"div",1),t.qZA()),2&e&&(t.Q6J("forceOverscroll",!1),t.xp6(1),t.Q6J("ngIf",o.vehicle))},dependencies:[C.sg,C.O5,M.Fj,M.JJ,M.On,A.W2,A.ho,A.ki,A.w,Tt,At.G,C.uU,It],styles:[".hos-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:30px;padding:30px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:10px;background-color:var(--gray-100);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .hos-header[_ngcontent-%COMP%]   .hos-name[_ngcontent-%COMP%]{flex-grow:1;text-align:center}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;background-color:var(--warning-500);border-radius:50px;padding:10px 15px}.hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%], .hos-wrapper[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]   .text-1[_ngcontent-%COMP%]{color:var(--warning-25)}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{flex-grow:1}.hos-wrapper[_ngcontent-%COMP%]   .status-bar[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;gap:10px;background-color:var(--success-500);color:var(--gray-25);font-size:16px;border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]{display:flex;justify-content:space-around;flex-wrap:wrap;max-width:80%;min-width:60%;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .circles-block[_ngcontent-%COMP%]   .circle-block[_ngcontent-%COMP%]{width:45%;max-width:140px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-between;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .row-1[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]{width:100%;height:10px;background-color:var(--gray-200);border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   .progress-bar-inner[_ngcontent-%COMP%]{height:10px;border-radius:20px}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-1[_ngcontent-%COMP%]{background-color:#fec84b}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-2[_ngcontent-%COMP%]{background-color:#9b8afb}.hos-wrapper[_ngcontent-%COMP%]   .rest-mode[_ngcontent-%COMP%]   .rest-row[_ngcontent-%COMP%]   .progress-bar-outer[_ngcontent-%COMP%]   #inner-3[_ngcontent-%COMP%]{background-color:#fb6514}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;gap:15px}.hos-wrapper[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   .time-block[_ngcontent-%COMP%]{flex-grow:1;border-radius:30px;background-color:var(--gray-100);text-align:center;padding:20px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:30px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .switch-sleep[_ngcontent-%COMP%]   ion-toggle[_ngcontent-%COMP%]{--handle-background: var(--gray-300);--handle-background-checked: var(--success-500);--track-background: var(--gray-25);--track-background-checked: var(--gray-25);--handle-width: 23px;--handle-height: 23px}.hos-wrapper[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:217px;height:50px;display:flex;justify-content:space-between;align-items:center;border-radius:41px;font-size:16px;padding:15px;margin:0 auto}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:var(--gray-100);border-radius:10px;padding:15px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-left[_ngcontent-%COMP%]   .sub-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]{background-color:var(--success-500);border-radius:30px;padding:5px 10px}.hos-wrapper[_ngcontent-%COMP%]   .log-dailies[_ngcontent-%COMP%]   .log-daily[_ngcontent-%COMP%]   .log-right[_ngcontent-%COMP%]   .hours-worked[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:500}.modal-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:30px}.modal-content[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{height:100px}.modal-content[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:41px;font-size:16px}ion-progress-bar[_ngcontent-%COMP%]{--background: var(--gray-200);--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-break[_ngcontent-%COMP%]{--progress-background: #fec84b}ion-progress-bar[_ngcontent-%COMP%]   #progress-shift[_ngcontent-%COMP%]{--progress-background: #9b8afb}ion-progress-bar[_ngcontent-%COMP%]   #progress-cycle[_ngcontent-%COMP%]{--progress-background: #fb6514}.custom-toggle[_ngcontent-%COMP%]{zoom:.8}"]}),i})()}];let te=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[K.Bz.forChild(Xt),K.Bz]}),i})();var ee=_(4546);let ie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[C.ez,M.u5,A.Pc,te,Mt.forRoot(),ee.y]}),i})()},9386:(j,H,_)=>{_.d(H,{s:()=>F});var C=_(5505),M=_(8256),t=_(529);let F=(()=>{class P{constructor(S,R){this.http=S,this.apiUrl=R}updateDVIR(S){return this.http.post(this.apiUrl+"api/EldDashboard/uploadDVIR",S)}updateLogDaily(S){return this.http.post(this.apiUrl+"api/eldDashboard/UploadLogDailies",S)}updateLogHistory(S){return this.http.post(this.apiUrl+"api/eldDashboard/UploadLogHistories",S)}}return P.\u0275fac=function(S){return new(S||P)(M.LFG(t.eN),M.LFG(C.f))},P.\u0275prov=M.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})()}}]);